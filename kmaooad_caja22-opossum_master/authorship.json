[{"path":".github/workflows/ci.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"Anton Shabinskiy"},"content":"name: CI"},{"lineNumber":2,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":3,"author":{"gitId":"Anton Shabinskiy"},"content":"on:"},{"lineNumber":4,"author":{"gitId":"Anton Shabinskiy"},"content":"  pull_request:"},{"lineNumber":5,"author":{"gitId":"Anton Shabinskiy"},"content":"  push:"},{"lineNumber":6,"author":{"gitId":"Anton Shabinskiy"},"content":"    branches:"},{"lineNumber":7,"author":{"gitId":"Anton Shabinskiy"},"content":"      - master"},{"lineNumber":8,"author":{"gitId":"Anton Shabinskiy"},"content":"  workflow_dispatch:"},{"lineNumber":9,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":10,"author":{"gitId":"Anton Shabinskiy"},"content":"env:"},{"lineNumber":11,"author":{"gitId":"Anton Shabinskiy"},"content":"  PACKAGE_DIRECTORY: \u0027./kmaooad-functions\u0027 # set this to the directory which contains pom.xml file"},{"lineNumber":12,"author":{"gitId":"Anton Shabinskiy"},"content":"  JAVA_VERSION: \u002711\u0027 # set this to the java version to use"},{"lineNumber":13,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":14,"author":{"gitId":"Anton Shabinskiy"},"content":"jobs:"},{"lineNumber":15,"author":{"gitId":"Anton Shabinskiy"},"content":"  build-and-test:"},{"lineNumber":16,"author":{"gitId":"Anton Shabinskiy"},"content":"    runs-on: windows-latest"},{"lineNumber":17,"author":{"gitId":"Anton Shabinskiy"},"content":"    steps:"},{"lineNumber":18,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: \u0027Checkout GitHub Action\u0027"},{"lineNumber":19,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: actions/checkout@v2"},{"lineNumber":20,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":21,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: Setup Java Sdk ${{ env.JAVA_VERSION }}"},{"lineNumber":22,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: actions/setup-java@v1"},{"lineNumber":23,"author":{"gitId":"Anton Shabinskiy"},"content":"        with:"},{"lineNumber":24,"author":{"gitId":"Anton Shabinskiy"},"content":"          java-version: ${{ env.JAVA_VERSION }}"},{"lineNumber":25,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":26,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: Install dependencies"},{"lineNumber":27,"author":{"gitId":"Anton Shabinskiy"},"content":"        shell: pwsh"},{"lineNumber":28,"author":{"gitId":"Anton Shabinskiy"},"content":"        run: |"},{"lineNumber":29,"author":{"gitId":"Anton Shabinskiy"},"content":"          pushd \u0027./${{ env.PACKAGE_DIRECTORY }}\u0027"},{"lineNumber":30,"author":{"gitId":"Anton Shabinskiy"},"content":"          mvn install -DskipTests\u003dtrue -B -V"},{"lineNumber":31,"author":{"gitId":"Anton Shabinskiy"},"content":"          popd"},{"lineNumber":32,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":33,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: Run tests and collect coverage"},{"lineNumber":34,"author":{"gitId":"Anton Shabinskiy"},"content":"        shell: pwsh"},{"lineNumber":35,"author":{"gitId":"Anton Shabinskiy"},"content":"        run: |"},{"lineNumber":36,"author":{"gitId":"Anton Shabinskiy"},"content":"          pushd \u0027./${{ env.PACKAGE_DIRECTORY }}\u0027"},{"lineNumber":37,"author":{"gitId":"Anton Shabinskiy"},"content":"          mvn -B test"},{"lineNumber":38,"author":{"gitId":"Anton Shabinskiy"},"content":"          popd"},{"lineNumber":39,"author":{"gitId":"Anton Shabinskiy"},"content":"      "},{"lineNumber":40,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: Upload coverage to Codecov"},{"lineNumber":41,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: codecov/codecov-action@v3"},{"lineNumber":42,"author":{"gitId":"Anton Shabinskiy"},"content":"      "},{"lineNumber":43,"author":{"gitId":"Anton Shabinskiy"},"content":"      "}],"authorContributionMap":{"Anton Shabinskiy":43}},{"path":".github/workflows/deploy.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"Anton Shabinskiy"},"content":"# Docs for the Azure Web Apps Deploy action: https://github.com/azure/functions-action"},{"lineNumber":2,"author":{"gitId":"Anton Shabinskiy"},"content":"# More GitHub Actions for Azure: https://github.com/Azure/actions"},{"lineNumber":3,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":4,"author":{"gitId":"Anton Shabinskiy"},"content":"name: Deploy"},{"lineNumber":5,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":6,"author":{"gitId":"Anton Shabinskiy"},"content":"on:"},{"lineNumber":7,"author":{"gitId":"Anton Shabinskiy"},"content":"  push:"},{"lineNumber":8,"author":{"gitId":"Anton Shabinskiy"},"content":"    branches:"},{"lineNumber":9,"author":{"gitId":"Anton Shabinskiy"},"content":"      - master"},{"lineNumber":10,"author":{"gitId":"Anton Shabinskiy"},"content":"  workflow_dispatch:"},{"lineNumber":11,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":12,"author":{"gitId":"Anton Shabinskiy"},"content":"env:"},{"lineNumber":13,"author":{"gitId":"Anton Shabinskiy"},"content":"  AZURE_FUNCTIONAPP_NAME: kmaooad-opossum # set this to your function app name on Azure"},{"lineNumber":14,"author":{"gitId":"Anton Shabinskiy"},"content":"  PACKAGE_DIRECTORY: \u0027./kmaooad-functions\u0027 # set this to the directory which contains pom.xml file"},{"lineNumber":15,"author":{"gitId":"Anton Shabinskiy"},"content":"  JAVA_VERSION: \u002711\u0027 # set this to the java version to use"},{"lineNumber":16,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":17,"author":{"gitId":"Anton Shabinskiy"},"content":"jobs:"},{"lineNumber":18,"author":{"gitId":"Anton Shabinskiy"},"content":"  build-and-deploy:"},{"lineNumber":19,"author":{"gitId":"Anton Shabinskiy"},"content":"    runs-on: windows-latest"},{"lineNumber":20,"author":{"gitId":"Anton Shabinskiy"},"content":"    steps:"},{"lineNumber":21,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: \u0027Checkout GitHub Action\u0027"},{"lineNumber":22,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: actions/checkout@v2"},{"lineNumber":23,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":24,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: Setup Java Sdk ${{ env.JAVA_VERSION }}"},{"lineNumber":25,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: actions/setup-java@v1"},{"lineNumber":26,"author":{"gitId":"Anton Shabinskiy"},"content":"        with:"},{"lineNumber":27,"author":{"gitId":"Anton Shabinskiy"},"content":"          java-version: ${{ env.JAVA_VERSION }}"},{"lineNumber":28,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":29,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: \u0027Restore Project Dependencies Using Mvn\u0027"},{"lineNumber":30,"author":{"gitId":"Anton Shabinskiy"},"content":"        shell: pwsh"},{"lineNumber":31,"author":{"gitId":"Anton Shabinskiy"},"content":"        run: |"},{"lineNumber":32,"author":{"gitId":"Anton Shabinskiy"},"content":"          pushd \u0027./${{ env.PACKAGE_DIRECTORY }}\u0027"},{"lineNumber":33,"author":{"gitId":"Anton Shabinskiy"},"content":"          mvn clean package"},{"lineNumber":34,"author":{"gitId":"Anton Shabinskiy"},"content":"          popd"},{"lineNumber":35,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: \u0027Run Azure Functions Action\u0027"},{"lineNumber":36,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: Azure/functions-action@v1"},{"lineNumber":37,"author":{"gitId":"Anton Shabinskiy"},"content":"        id: fa"},{"lineNumber":38,"author":{"gitId":"Anton Shabinskiy"},"content":"        with:"},{"lineNumber":39,"author":{"gitId":"Anton Shabinskiy"},"content":"          app-name: \u0027kmaooad-opossum\u0027"},{"lineNumber":40,"author":{"gitId":"Anton Shabinskiy"},"content":"          slot-name: \u0027Production\u0027"},{"lineNumber":41,"author":{"gitId":"Anton Shabinskiy"},"content":"          publish-profile: ${{ secrets.AZUREAPPSERVICE_PUBLISHPROFILE_120448604DE24C839DA998F7EDCA4D23 }}"},{"lineNumber":42,"author":{"gitId":"Anton Shabinskiy"},"content":"          package: \u0027${{ env.PACKAGE_DIRECTORY }}\u0027"},{"lineNumber":43,"author":{"gitId":"Anton Shabinskiy"},"content":"          respect-pom-xml: true"}],"authorContributionMap":{"Anton Shabinskiy":43}},{"path":"LICENSE","fileType":"LICENSE","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"MIT License"},{"lineNumber":2,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":3,"author":{"gitId":"github-classroom[bot]"},"content":"Copyright (c) 2022 NAUKMA OOAD 2022"},{"lineNumber":4,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":5,"author":{"gitId":"github-classroom[bot]"},"content":"Permission is hereby granted, free of charge, to any person obtaining a copy"},{"lineNumber":6,"author":{"gitId":"github-classroom[bot]"},"content":"of this software and associated documentation files (the \"Software\"), to deal"},{"lineNumber":7,"author":{"gitId":"github-classroom[bot]"},"content":"in the Software without restriction, including without limitation the rights"},{"lineNumber":8,"author":{"gitId":"github-classroom[bot]"},"content":"to use, copy, modify, merge, publish, distribute, sublicense, and/or sell"},{"lineNumber":9,"author":{"gitId":"github-classroom[bot]"},"content":"copies of the Software, and to permit persons to whom the Software is"},{"lineNumber":10,"author":{"gitId":"github-classroom[bot]"},"content":"furnished to do so, subject to the following conditions:"},{"lineNumber":11,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":12,"author":{"gitId":"github-classroom[bot]"},"content":"The above copyright notice and this permission notice shall be included in all"},{"lineNumber":13,"author":{"gitId":"github-classroom[bot]"},"content":"copies or substantial portions of the Software."},{"lineNumber":14,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":15,"author":{"gitId":"github-classroom[bot]"},"content":"THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR"},{"lineNumber":16,"author":{"gitId":"github-classroom[bot]"},"content":"IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,"},{"lineNumber":17,"author":{"gitId":"github-classroom[bot]"},"content":"FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE"},{"lineNumber":18,"author":{"gitId":"github-classroom[bot]"},"content":"AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER"},{"lineNumber":19,"author":{"gitId":"github-classroom[bot]"},"content":"LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,"},{"lineNumber":20,"author":{"gitId":"github-classroom[bot]"},"content":"OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE"},{"lineNumber":21,"author":{"gitId":"github-classroom[bot]"},"content":"SOFTWARE."}],"authorContributionMap":{"github-classroom[bot]":21}},{"path":"README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"Students"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":"- Bulk import"},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"  - Mass create/update students from CSV, send email notifications"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"- Manage group templates and groups"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"  - Create/update/delete student group templates (e.g. “4th grade”)"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"  - Create/update/delete groups (e.g. “4th grade 2022”)"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"- Assign activities (pending and completed)"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"  - Manually assign/unassign activity to group"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"  - Manually assign/unassign activity to student"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"- Auto-update activities based on schedule (i.e. when activity start date passes, mark it as ‘in progress’ for the group, when activity end date passes, mark it as completed by the group)"}],"authorContributionMap":{"Mishok":10}},{"path":"kmaooad-functions/.gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"# Build output"},{"lineNumber":2,"author":{"gitId":"github-classroom[bot]"},"content":"target/"},{"lineNumber":3,"author":{"gitId":"github-classroom[bot]"},"content":"*.class"},{"lineNumber":4,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":5,"author":{"gitId":"github-classroom[bot]"},"content":"# Log file"},{"lineNumber":6,"author":{"gitId":"github-classroom[bot]"},"content":"*.log"},{"lineNumber":7,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":8,"author":{"gitId":"github-classroom[bot]"},"content":"# BlueJ files"},{"lineNumber":9,"author":{"gitId":"github-classroom[bot]"},"content":"*.ctxt"},{"lineNumber":10,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":11,"author":{"gitId":"github-classroom[bot]"},"content":"# Mobile Tools for Java (J2ME)"},{"lineNumber":12,"author":{"gitId":"github-classroom[bot]"},"content":".mtj.tmp/"},{"lineNumber":13,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":14,"author":{"gitId":"github-classroom[bot]"},"content":"# Package Files #"},{"lineNumber":15,"author":{"gitId":"github-classroom[bot]"},"content":"*.jar"},{"lineNumber":16,"author":{"gitId":"github-classroom[bot]"},"content":"*.war"},{"lineNumber":17,"author":{"gitId":"github-classroom[bot]"},"content":"*.ear"},{"lineNumber":18,"author":{"gitId":"github-classroom[bot]"},"content":"*.zip"},{"lineNumber":19,"author":{"gitId":"github-classroom[bot]"},"content":"*.tar.gz"},{"lineNumber":20,"author":{"gitId":"github-classroom[bot]"},"content":"*.rar"},{"lineNumber":21,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":22,"author":{"gitId":"github-classroom[bot]"},"content":"# virtual machine crash logs, see http://www.java.com/en/download/help/error_hotspot.xml"},{"lineNumber":23,"author":{"gitId":"github-classroom[bot]"},"content":"hs_err_pid*"},{"lineNumber":24,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":25,"author":{"gitId":"github-classroom[bot]"},"content":"# IDE"},{"lineNumber":26,"author":{"gitId":"github-classroom[bot]"},"content":".idea/"},{"lineNumber":27,"author":{"gitId":"github-classroom[bot]"},"content":"*.iml"},{"lineNumber":28,"author":{"gitId":"github-classroom[bot]"},"content":".settings/"},{"lineNumber":29,"author":{"gitId":"github-classroom[bot]"},"content":".project"},{"lineNumber":30,"author":{"gitId":"github-classroom[bot]"},"content":".classpath"},{"lineNumber":31,"author":{"gitId":"github-classroom[bot]"},"content":".vscode/"},{"lineNumber":32,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":33,"author":{"gitId":"github-classroom[bot]"},"content":"# macOS"},{"lineNumber":34,"author":{"gitId":"github-classroom[bot]"},"content":".DS_Store"},{"lineNumber":35,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":36,"author":{"gitId":"github-classroom[bot]"},"content":"# Azure Functions"},{"lineNumber":37,"author":{"gitId":"github-classroom[bot]"},"content":"local.settings.json"},{"lineNumber":38,"author":{"gitId":"github-classroom[bot]"},"content":"bin/"},{"lineNumber":39,"author":{"gitId":"github-classroom[bot]"},"content":"obj/"}],"authorContributionMap":{"github-classroom[bot]":39}},{"path":"kmaooad-functions/host.json","fileType":"json","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"{"},{"lineNumber":2,"author":{"gitId":"github-classroom[bot]"},"content":"  \"version\": \"2.0\","},{"lineNumber":3,"author":{"gitId":"github-classroom[bot]"},"content":"  \"extensionBundle\": {"},{"lineNumber":4,"author":{"gitId":"github-classroom[bot]"},"content":"    \"id\": \"Microsoft.Azure.Functions.ExtensionBundle\","},{"lineNumber":5,"author":{"gitId":"github-classroom[bot]"},"content":"    \"version\": \"[3.*, 4.0.0)\""},{"lineNumber":6,"author":{"gitId":"github-classroom[bot]"},"content":"  } "},{"lineNumber":7,"author":{"gitId":"github-classroom[bot]"},"content":"}"}],"authorContributionMap":{"github-classroom[bot]":7}},{"path":"kmaooad-functions/pom.xml","fileType":"xml","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\" ?\u003e"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":"\u003cproject xmlns\u003d\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi\u003d\"http://www.w3.org/2001/XMLSchema-instance\""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"         xsi:schemaLocation\u003d\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\u003e"},{"lineNumber":4,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cmodelVersion\u003e4.0.0\u003c/modelVersion\u003e"},{"lineNumber":5,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":6,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cgroupId\u003eedu.kmaooad\u003c/groupId\u003e"},{"lineNumber":7,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cartifactId\u003ekmaooad-functions\u003c/artifactId\u003e"},{"lineNumber":8,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cversion\u003e1.0-SNAPSHOT\u003c/version\u003e"},{"lineNumber":9,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cpackaging\u003ejar\u003c/packaging\u003e"},{"lineNumber":10,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":11,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cname\u003eAzure Java Functions\u003c/name\u003e"},{"lineNumber":12,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"    \u003cparent\u003e"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"        \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"        \u003cartifactId\u003espring-boot-starter-parent\u003c/artifactId\u003e"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"        \u003cversion\u003e2.6.6\u003c/version\u003e"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"        \u003crelativePath/\u003e \u003c!-- lookup parent from repository --\u003e"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"    \u003c/parent\u003e"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":20,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cproperties\u003e"},{"lineNumber":21,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cproject.build.sourceEncoding\u003eUTF-8\u003c/project.build.sourceEncoding\u003e"},{"lineNumber":22,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cjava.version\u003e11\u003c/java.version\u003e"},{"lineNumber":23,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cazure.functions.maven.plugin.version\u003e1.20.0\u003c/azure.functions.maven.plugin.version\u003e"},{"lineNumber":24,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cazure.functions.java.library.version\u003e2.0.1\u003c/azure.functions.java.library.version\u003e"},{"lineNumber":25,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cfunctionAppName\u003ekmaooad-functions-20220927162321908\u003c/functionAppName\u003e"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"        \u003cstart-class\u003eedu.kmaooad.Application\u003c/start-class\u003e"},{"lineNumber":27,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003c/properties\u003e"},{"lineNumber":28,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    \u003cdependencyManagement\u003e"},{"lineNumber":30,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cdependencies\u003e"},{"lineNumber":31,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cdependency\u003e"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"                \u003cgroupId\u003eorg.springframework.cloud\u003c/groupId\u003e"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"                \u003cartifactId\u003espring-cloud-function-dependencies\u003c/artifactId\u003e"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"                \u003cversion\u003e3.2.3\u003c/version\u003e"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"                \u003ctype\u003epom\u003c/type\u003e"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"                \u003cscope\u003eimport\u003c/scope\u003e"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"            \u003c/dependency\u003e"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"        \u003c/dependencies\u003e"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    \u003c/dependencyManagement\u003e"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    \u003cdependencies\u003e"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"        \u003cdependency\u003e"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"            \u003cgroupId\u003eorg.springframework.cloud\u003c/groupId\u003e"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"            \u003cartifactId\u003espring-cloud-function-adapter-azure\u003c/artifactId\u003e"},{"lineNumber":45,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003c/dependency\u003e"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        \u003cdependency\u003e"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"            \u003cgroupId\u003eorg.springframework.cloud\u003c/groupId\u003e"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"            \u003cartifactId\u003espring-cloud-starter-function-webflux\u003c/artifactId\u003e"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"            \u003cscope\u003eprovided\u003c/scope\u003e"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"        \u003cdependency\u003e"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"            \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"            \u003cartifactId\u003espring-boot-starter-data-mongodb\u003c/artifactId\u003e"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"            \u003cversion\u003e2.7.5\u003c/version\u003e"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":56,"author":{"gitId":"KateKolokhina"},"content":"        \u003cdependency\u003e"},{"lineNumber":57,"author":{"gitId":"KateKolokhina"},"content":"            \u003cgroupId\u003eorg.telegram\u003c/groupId\u003e"},{"lineNumber":58,"author":{"gitId":"KateKolokhina"},"content":"            \u003cartifactId\u003etelegrambots-spring-boot-starter\u003c/artifactId\u003e"},{"lineNumber":59,"author":{"gitId":"KateKolokhina"},"content":"            \u003cversion\u003e6.1.0\u003c/version\u003e"},{"lineNumber":60,"author":{"gitId":"KateKolokhina"},"content":"        \u003c/dependency\u003e"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"        \u003cdependency\u003e"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"            \u003cgroupId\u003ecom.microsoft.azure.functions\u003c/groupId\u003e"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"            \u003cartifactId\u003eazure-functions-java-library\u003c/artifactId\u003e"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"            \u003cversion\u003e${azure.functions.java.library.version}\u003c/version\u003e"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":67,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":68,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003c!-- Test --\u003e"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"        \u003cdependency\u003e"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"            \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"            \u003cartifactId\u003espring-boot-starter-test\u003c/artifactId\u003e"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"            \u003cversion\u003e2.7.5\u003c/version\u003e"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"            \u003cscope\u003etest\u003c/scope\u003e"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        \u003c/dependency\u003e"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":77,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cdependency\u003e"},{"lineNumber":78,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cgroupId\u003eorg.mockito\u003c/groupId\u003e"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"            \u003cartifactId\u003emockito-core\u003c/artifactId\u003e"},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":"            \u003cversion\u003e4.9.0\u003c/version\u003e"},{"lineNumber":81,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cscope\u003etest\u003c/scope\u003e"},{"lineNumber":82,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003c/dependency\u003e"},{"lineNumber":83,"author":{"gitId":"Mishok"},"content":"        \u003cdependency\u003e"},{"lineNumber":84,"author":{"gitId":"Mishok"},"content":"            \u003cgroupId\u003eorg.mockito\u003c/groupId\u003e"},{"lineNumber":85,"author":{"gitId":"Mishok"},"content":"            \u003cartifactId\u003emockito-inline\u003c/artifactId\u003e"},{"lineNumber":86,"author":{"gitId":"Mishok"},"content":"            \u003cversion\u003e4.9.0\u003c/version\u003e"},{"lineNumber":87,"author":{"gitId":"Mishok"},"content":"            \u003cscope\u003etest\u003c/scope\u003e"},{"lineNumber":88,"author":{"gitId":"Mishok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":89,"author":{"gitId":"Mishok"},"content":"        \u003cdependency\u003e"},{"lineNumber":90,"author":{"gitId":"Mishok"},"content":"            \u003cgroupId\u003enet.bytebuddy\u003c/groupId\u003e"},{"lineNumber":91,"author":{"gitId":"Mishok"},"content":"            \u003cartifactId\u003ebyte-buddy\u003c/artifactId\u003e"},{"lineNumber":92,"author":{"gitId":"Mishok"},"content":"            \u003cversion\u003e1.12.16\u003c/version\u003e"},{"lineNumber":93,"author":{"gitId":"Mishok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":94,"author":{"gitId":"BlackKyiv"},"content":"        \u003cdependency\u003e"},{"lineNumber":95,"author":{"gitId":"BlackKyiv"},"content":"            \u003cgroupId\u003eorg.projectlombok\u003c/groupId\u003e"},{"lineNumber":96,"author":{"gitId":"BlackKyiv"},"content":"            \u003cartifactId\u003elombok\u003c/artifactId\u003e"},{"lineNumber":97,"author":{"gitId":"BlackKyiv"},"content":"            \u003cversion\u003e1.18.24\u003c/version\u003e"},{"lineNumber":98,"author":{"gitId":"BlackKyiv"},"content":"            \u003cscope\u003eprovided\u003c/scope\u003e"},{"lineNumber":99,"author":{"gitId":"BlackKyiv"},"content":"        \u003c/dependency\u003e"},{"lineNumber":100,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":101,"author":{"gitId":"Mishok"},"content":"        \u003cdependency\u003e"},{"lineNumber":102,"author":{"gitId":"Mishok"},"content":"            \u003cgroupId\u003eorg.modelmapper\u003c/groupId\u003e"},{"lineNumber":103,"author":{"gitId":"Mishok"},"content":"            \u003cartifactId\u003emodelmapper\u003c/artifactId\u003e"},{"lineNumber":104,"author":{"gitId":"Mishok"},"content":"            \u003cversion\u003e3.1.0\u003c/version\u003e"},{"lineNumber":105,"author":{"gitId":"Mishok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":106,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":107,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":108,"author":{"gitId":"BlackKyiv"},"content":"        \u003cdependency\u003e"},{"lineNumber":109,"author":{"gitId":"BlackKyiv"},"content":"            \u003cgroupId\u003ejavax.mail\u003c/groupId\u003e"},{"lineNumber":110,"author":{"gitId":"BlackKyiv"},"content":"            \u003cartifactId\u003email\u003c/artifactId\u003e"},{"lineNumber":111,"author":{"gitId":"BlackKyiv"},"content":"            \u003cversion\u003e1.4\u003c/version\u003e"},{"lineNumber":112,"author":{"gitId":"BlackKyiv"},"content":"        \u003c/dependency\u003e"},{"lineNumber":113,"author":{"gitId":"dgoptsii"},"content":"        \u003cdependency\u003e"},{"lineNumber":114,"author":{"gitId":"dgoptsii"},"content":"            \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e"},{"lineNumber":115,"author":{"gitId":"dgoptsii"},"content":"            \u003cartifactId\u003espring-boot-starter-mail\u003c/artifactId\u003e"},{"lineNumber":116,"author":{"gitId":"dgoptsii"},"content":"        \u003c/dependency\u003e"},{"lineNumber":117,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":118,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003c/dependencies\u003e"},{"lineNumber":119,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":120,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cbuild\u003e"},{"lineNumber":121,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cplugins\u003e"},{"lineNumber":122,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cplugin\u003e"},{"lineNumber":123,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cgroupId\u003eorg.apache.maven.plugins\u003c/groupId\u003e"},{"lineNumber":124,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cartifactId\u003emaven-compiler-plugin\u003c/artifactId\u003e"},{"lineNumber":125,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cversion\u003e3.8.1\u003c/version\u003e"},{"lineNumber":126,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cconfiguration\u003e"},{"lineNumber":127,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003csource\u003e${java.version}\u003c/source\u003e"},{"lineNumber":128,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003ctarget\u003e${java.version}\u003c/target\u003e"},{"lineNumber":129,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cencoding\u003e${project.build.sourceEncoding}\u003c/encoding\u003e"},{"lineNumber":130,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003c/configuration\u003e"},{"lineNumber":131,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003c/plugin\u003e"},{"lineNumber":132,"author":{"gitId":"BlackKyiv"},"content":"            \u003cplugin\u003e"},{"lineNumber":133,"author":{"gitId":"BlackKyiv"},"content":"                \u003cgroupId\u003eorg.jacoco\u003c/groupId\u003e"},{"lineNumber":134,"author":{"gitId":"BlackKyiv"},"content":"                \u003cartifactId\u003ejacoco-maven-plugin\u003c/artifactId\u003e"},{"lineNumber":135,"author":{"gitId":"BlackKyiv"},"content":"                \u003cversion\u003e0.8.8\u003c/version\u003e"},{"lineNumber":136,"author":{"gitId":"BlackKyiv"},"content":"                \u003cexecutions\u003e"},{"lineNumber":137,"author":{"gitId":"BlackKyiv"},"content":"                    \u003cexecution\u003e"},{"lineNumber":138,"author":{"gitId":"BlackKyiv"},"content":"                        \u003cid\u003eprepare-agent\u003c/id\u003e"},{"lineNumber":139,"author":{"gitId":"BlackKyiv"},"content":"                        \u003cgoals\u003e"},{"lineNumber":140,"author":{"gitId":"BlackKyiv"},"content":"                            \u003cgoal\u003eprepare-agent\u003c/goal\u003e"},{"lineNumber":141,"author":{"gitId":"BlackKyiv"},"content":"                        \u003c/goals\u003e"},{"lineNumber":142,"author":{"gitId":"BlackKyiv"},"content":"                    \u003c/execution\u003e"},{"lineNumber":143,"author":{"gitId":"BlackKyiv"},"content":"                    \u003cexecution\u003e"},{"lineNumber":144,"author":{"gitId":"BlackKyiv"},"content":"                        \u003cid\u003ereport\u003c/id\u003e"},{"lineNumber":145,"author":{"gitId":"BlackKyiv"},"content":"                        \u003cphase\u003etest\u003c/phase\u003e"},{"lineNumber":146,"author":{"gitId":"BlackKyiv"},"content":"                        \u003cgoals\u003e"},{"lineNumber":147,"author":{"gitId":"BlackKyiv"},"content":"                            \u003cgoal\u003ereport\u003c/goal\u003e"},{"lineNumber":148,"author":{"gitId":"BlackKyiv"},"content":"                        \u003c/goals\u003e"},{"lineNumber":149,"author":{"gitId":"BlackKyiv"},"content":"                    \u003c/execution\u003e"},{"lineNumber":150,"author":{"gitId":"BlackKyiv"},"content":"                \u003c/executions\u003e"},{"lineNumber":151,"author":{"gitId":"BlackKyiv"},"content":"            \u003c/plugin\u003e"},{"lineNumber":152,"author":{"gitId":"BlackKyiv"},"content":"            \u003cplugin\u003e"},{"lineNumber":153,"author":{"gitId":"BlackKyiv"},"content":"                \u003cgroupId\u003eorg.apache.maven.plugins\u003c/groupId\u003e"},{"lineNumber":154,"author":{"gitId":"BlackKyiv"},"content":"                \u003cartifactId\u003emaven-surefire-plugin\u003c/artifactId\u003e"},{"lineNumber":155,"author":{"gitId":"Mishok"},"content":"                \u003cversion\u003e3.0.0-M7\u003c/version\u003e"},{"lineNumber":156,"author":{"gitId":"BlackKyiv"},"content":"                \u003cconfiguration\u003e"},{"lineNumber":157,"author":{"gitId":"BlackKyiv"},"content":"                    \u003cfailIfNoTests\u003etrue\u003c/failIfNoTests\u003e"},{"lineNumber":158,"author":{"gitId":"BlackKyiv"},"content":"                \u003c/configuration\u003e"},{"lineNumber":159,"author":{"gitId":"BlackKyiv"},"content":"            \u003c/plugin\u003e"},{"lineNumber":160,"author":{"gitId":"BlackKyiv"},"content":"            \u003c!--Remove obj folder generated by .NET SDK in maven clean--\u003e"},{"lineNumber":161,"author":{"gitId":"BlackKyiv"},"content":"            \u003cplugin\u003e"},{"lineNumber":162,"author":{"gitId":"BlackKyiv"},"content":"                \u003cartifactId\u003emaven-clean-plugin\u003c/artifactId\u003e"},{"lineNumber":163,"author":{"gitId":"BlackKyiv"},"content":"                \u003cversion\u003e3.1.0\u003c/version\u003e"},{"lineNumber":164,"author":{"gitId":"BlackKyiv"},"content":"                \u003cconfiguration\u003e"},{"lineNumber":165,"author":{"gitId":"BlackKyiv"},"content":"                    \u003cfilesets\u003e"},{"lineNumber":166,"author":{"gitId":"BlackKyiv"},"content":"                        \u003cfileset\u003e"},{"lineNumber":167,"author":{"gitId":"BlackKyiv"},"content":"                            \u003cdirectory\u003eobj\u003c/directory\u003e"},{"lineNumber":168,"author":{"gitId":"BlackKyiv"},"content":"                        \u003c/fileset\u003e"},{"lineNumber":169,"author":{"gitId":"BlackKyiv"},"content":"                    \u003c/filesets\u003e"},{"lineNumber":170,"author":{"gitId":"BlackKyiv"},"content":"                \u003c/configuration\u003e"},{"lineNumber":171,"author":{"gitId":"BlackKyiv"},"content":"            \u003c/plugin\u003e"},{"lineNumber":172,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":173,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cplugin\u003e"},{"lineNumber":174,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cgroupId\u003ecom.microsoft.azure\u003c/groupId\u003e"},{"lineNumber":175,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cartifactId\u003eazure-functions-maven-plugin\u003c/artifactId\u003e"},{"lineNumber":176,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cversion\u003e${azure.functions.maven.plugin.version}\u003c/version\u003e"},{"lineNumber":177,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cconfiguration\u003e"},{"lineNumber":178,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- function app name --\u003e"},{"lineNumber":179,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cappName\u003e${functionAppName}\u003c/appName\u003e"},{"lineNumber":180,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- function app resource group --\u003e"},{"lineNumber":181,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cresourceGroup\u003ejava-functions-group\u003c/resourceGroup\u003e"},{"lineNumber":182,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- function app service plan name --\u003e"},{"lineNumber":183,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cappServicePlanName\u003ejava-functions-app-service-plan\u003c/appServicePlanName\u003e"},{"lineNumber":184,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- function app region--\u003e"},{"lineNumber":185,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-regions for all valid values --\u003e"},{"lineNumber":186,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cregion\u003ewestus\u003c/region\u003e"},{"lineNumber":187,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- function pricingTier, default to be consumption if not specified --\u003e"},{"lineNumber":188,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-pricing-tiers for all valid values --\u003e"},{"lineNumber":189,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- \u003cpricingTier\u003e\u003c/pricingTier\u003e --\u003e"},{"lineNumber":190,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- Whether to disable application insights, default is false --\u003e"},{"lineNumber":191,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details for all valid configurations for application insights--\u003e"},{"lineNumber":192,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- \u003cdisableAppInsights\u003e\u003c/disableAppInsights\u003e --\u003e"},{"lineNumber":193,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cruntime\u003e"},{"lineNumber":194,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003c!-- runtime os, could be windows, linux or docker--\u003e"},{"lineNumber":195,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cos\u003ewindows\u003c/os\u003e"},{"lineNumber":196,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cjavaVersion\u003e11\u003c/javaVersion\u003e"},{"lineNumber":197,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c/runtime\u003e"},{"lineNumber":198,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cappSettings\u003e"},{"lineNumber":199,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cproperty\u003e"},{"lineNumber":200,"author":{"gitId":"github-classroom[bot]"},"content":"                            \u003cname\u003eFUNCTIONS_EXTENSION_VERSION\u003c/name\u003e"},{"lineNumber":201,"author":{"gitId":"github-classroom[bot]"},"content":"                            \u003cvalue\u003e~4\u003c/value\u003e"},{"lineNumber":202,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003c/property\u003e"},{"lineNumber":203,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c/appSettings\u003e"},{"lineNumber":204,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003c/configuration\u003e"},{"lineNumber":205,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cexecutions\u003e"},{"lineNumber":206,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cexecution\u003e"},{"lineNumber":207,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cid\u003epackage-functions\u003c/id\u003e"},{"lineNumber":208,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cgoals\u003e"},{"lineNumber":209,"author":{"gitId":"github-classroom[bot]"},"content":"                            \u003cgoal\u003epackage\u003c/goal\u003e"},{"lineNumber":210,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003c/goals\u003e"},{"lineNumber":211,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c/execution\u003e"},{"lineNumber":212,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003c/executions\u003e"},{"lineNumber":213,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003c/plugin\u003e"},{"lineNumber":214,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":215,"author":{"gitId":"Anton Shabinskiy"},"content":"            \u003cplugin\u003e"},{"lineNumber":216,"author":{"gitId":"BlackKyiv"},"content":"                \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e"},{"lineNumber":217,"author":{"gitId":"BlackKyiv"},"content":"                \u003cartifactId\u003espring-boot-maven-plugin\u003c/artifactId\u003e"},{"lineNumber":218,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003c/plugin\u003e"},{"lineNumber":219,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003c/plugins\u003e"},{"lineNumber":220,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003c/build\u003e"},{"lineNumber":221,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":222,"author":{"gitId":"BlackKyiv"},"content":"    \u003crepositories\u003e"},{"lineNumber":223,"author":{"gitId":"BlackKyiv"},"content":"        \u003crepository\u003e"},{"lineNumber":224,"author":{"gitId":"BlackKyiv"},"content":"            \u003cid\u003espring-snapshots\u003c/id\u003e"},{"lineNumber":225,"author":{"gitId":"BlackKyiv"},"content":"            \u003cname\u003eSpring Snapshots\u003c/name\u003e"},{"lineNumber":226,"author":{"gitId":"BlackKyiv"},"content":"            \u003curl\u003ehttps://repo.spring.io/libs-snapshot-local\u003c/url\u003e"},{"lineNumber":227,"author":{"gitId":"BlackKyiv"},"content":"            \u003csnapshots\u003e"},{"lineNumber":228,"author":{"gitId":"BlackKyiv"},"content":"                \u003cenabled\u003etrue\u003c/enabled\u003e"},{"lineNumber":229,"author":{"gitId":"BlackKyiv"},"content":"            \u003c/snapshots\u003e"},{"lineNumber":230,"author":{"gitId":"BlackKyiv"},"content":"            \u003creleases\u003e"},{"lineNumber":231,"author":{"gitId":"BlackKyiv"},"content":"                \u003cenabled\u003efalse\u003c/enabled\u003e"},{"lineNumber":232,"author":{"gitId":"BlackKyiv"},"content":"            \u003c/releases\u003e"},{"lineNumber":233,"author":{"gitId":"BlackKyiv"},"content":"        \u003c/repository\u003e"},{"lineNumber":234,"author":{"gitId":"BlackKyiv"},"content":"        \u003crepository\u003e"},{"lineNumber":235,"author":{"gitId":"BlackKyiv"},"content":"            \u003cid\u003espring-milestones\u003c/id\u003e"},{"lineNumber":236,"author":{"gitId":"BlackKyiv"},"content":"            \u003cname\u003eSpring Milestones\u003c/name\u003e"},{"lineNumber":237,"author":{"gitId":"BlackKyiv"},"content":"            \u003curl\u003ehttps://repo.spring.io/libs-milestone-local\u003c/url\u003e"},{"lineNumber":238,"author":{"gitId":"BlackKyiv"},"content":"            \u003csnapshots\u003e"},{"lineNumber":239,"author":{"gitId":"BlackKyiv"},"content":"                \u003cenabled\u003efalse\u003c/enabled\u003e"},{"lineNumber":240,"author":{"gitId":"BlackKyiv"},"content":"            \u003c/snapshots\u003e"},{"lineNumber":241,"author":{"gitId":"BlackKyiv"},"content":"        \u003c/repository\u003e"},{"lineNumber":242,"author":{"gitId":"BlackKyiv"},"content":"        \u003crepository\u003e"},{"lineNumber":243,"author":{"gitId":"BlackKyiv"},"content":"            \u003cid\u003espring-releases\u003c/id\u003e"},{"lineNumber":244,"author":{"gitId":"BlackKyiv"},"content":"            \u003cname\u003eSpring Releases\u003c/name\u003e"},{"lineNumber":245,"author":{"gitId":"BlackKyiv"},"content":"            \u003curl\u003ehttps://repo.spring.io/release\u003c/url\u003e"},{"lineNumber":246,"author":{"gitId":"BlackKyiv"},"content":"            \u003csnapshots\u003e"},{"lineNumber":247,"author":{"gitId":"BlackKyiv"},"content":"                \u003cenabled\u003efalse\u003c/enabled\u003e"},{"lineNumber":248,"author":{"gitId":"BlackKyiv"},"content":"            \u003c/snapshots\u003e"},{"lineNumber":249,"author":{"gitId":"BlackKyiv"},"content":"        \u003c/repository\u003e"},{"lineNumber":250,"author":{"gitId":"BlackKyiv"},"content":"    \u003c/repositories\u003e"},{"lineNumber":251,"author":{"gitId":"github-classroom[bot]"},"content":"\u003c/project\u003e"}],"authorContributionMap":{"Mishok":29,"dgoptsii":5,"BlackKyiv":125,"Anton Shabinskiy":1,"KateKolokhina":5,"github-classroom[bot]":86}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/Application.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import org.modelmapper.ModelMapper;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import org.springframework.boot.SpringApplication;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import org.springframework.boot.autoconfigure.SpringBootApplication;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import org.springframework.context.annotation.Bean;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import org.springframework.data.mongodb.repository.config.EnableMongoRepositories;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.scheduling.annotation.EnableScheduling;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"@SpringBootApplication"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"@EnableScheduling"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"//@EnableMongoRepositories(basePackages \u003d {\"edu.kmaooad.repositories\"})"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"public class Application {"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"    public static void main(String[] args) throws Exception{"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"        SpringApplication.run(Application.class, args);"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"    @Bean"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    public ModelMapper modelMapper(){"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"        return new ModelMapper();"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":20,"KateKolokhina":2}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/Dispatcher.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.DialogHandler;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.GlobalRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import java.util.List;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import java.util.logging.Handler;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"public class Dispatcher {"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    private final List\u003cGlobalRequestHandler\u003e globalRequestHandlers;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"    private final List\u003cDialogHandler\u003e dialogHandlers;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    private final List\u003cButtonRequestHandler\u003e buttonRequestHandlers;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    public Dispatcher(List\u003cGlobalRequestHandler\u003e globalRequestHandlers, List\u003cDialogHandler\u003e dialogHandlers, List\u003cButtonRequestHandler\u003e buttonRequestHandlers) {"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"        this.globalRequestHandlers \u003d globalRequestHandlers;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"        this.dialogHandlers \u003d dialogHandlers;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"        this.buttonRequestHandlers \u003d buttonRequestHandlers;"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse dispatch(UserRequest userRequest) {"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"        log.info(\"Input session: \" + userRequest.getUserSession());"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"        for (GlobalRequestHandler handler : globalRequestHandlers) {"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"            if (handler.isApplicable(userRequest)) {"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"                log.info(\"Output session: \" + userRequest.getUserSession());"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"                return handler.handle(userRequest);"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"            }"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        for (ButtonRequestHandler handler : buttonRequestHandlers) {"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"            if (handler.isApplicable(userRequest)) {"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"                log.info(\"Output session: \" + userRequest.getUserSession());"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"                return handler.handle(userRequest);"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"            }"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        if (userRequest.getUserSession().getDialogState() !\u003d null) {"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"            for (DialogHandler handler : dialogHandlers) {"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"                if (handler.isApplicable(userRequest)) {"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"                    log.info(\"Output session: \" + userRequest.getUserSession());"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"                    return handler.handle(userRequest);"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"                }"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"            }"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"        return new HandlerResponse(null, false);"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"}"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":""}],"authorContributionMap":{"Mishok":58}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/constants/bot/BotMessageEnum.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.constants.bot;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"public enum BotMessageEnum {"},{"lineNumber":4,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":5,"author":{"gitId":"KateKolokhina"},"content":"    EXCEPTION_ILLEGAL_MESSAGE(\"That\u0027s something strange. I need to clean my glasses.\"),"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"    EXCEPTION_UNKNOWN(\"Something went wrong. If you want to ask for support, go ask a cat.\"),"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"    SUCCESSFULLY_ADD(\"Успішно додано\");"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"    private final String message;"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"    BotMessageEnum(String message) {"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"        this.message \u003d message;"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":"    public String getMessage() {"},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":"        return message;"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":18,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"Mishok":2,"KateKolokhina":16}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/constants/bot/ConversationState.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.constants.bot;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"public enum ConversationState {"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"    // Common"},{"lineNumber":5,"author":{"gitId":"KateKolokhina"},"content":"    CONVERSATION_STARTED,"},{"lineNumber":6,"author":{"gitId":"KateKolokhina"},"content":"    WAITING_FOR_CHOICE,"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"    WAITING_FOR_TEXT,"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_MAIN_MENU_ACTION_CHOICE,"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"    // Group"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"    WAITING_FOR_GROUP_ACTION_CHOICE,"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"    WAITING_FOR_GROUP_ADD_ACTION,"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"    ASK_FOR_GROUP_ID,"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"    ASK_FOR_GROUP_NAME,"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"    ASK_FOR_GROUP_GRADE,"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"    ASK_FOR_GROUP_YEAR,"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"    WAITING_FOR_GROUP_NAME,"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"    WAITING_FOR_GROUP_GRADE,"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    WAITING_FOR_GROUP_YEAR,"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_GROUP_ID,"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"    // Assign"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_GROUP_ACTIVITY_ASSIGN_CHOICE,"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_GROUP_TO_ASSIGN_CHOICE,"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_STUDENT_ACTIVITY_ASSIGN_CHOICE,"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_STUDENT_TO_ASSIGN_CHOICE,"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    // Templates"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_TEMPLATE_ACTION_CHOICE,"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    ASK_FOR_TEMPLATE_ID,"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    ASK_FOR_TEMPLATE_NAME,"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    ASK_FOR_TEMPLATE_GRADE,"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    ASK_FOR_TEMPLATE_YEAR,"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_TEMPLATE_ID,"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_TEMPLATE_NAME,"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_TEMPLATE_GRADE,"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"    WAITING_FOR_TEMPLATE_YEAR,"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    // CSV"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    WAITING_FOR_STUDENT_ACTION_CHOICE, WAITING_FOR_STUDENT_CSV"},{"lineNumber":41,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"Mishok":11,"BlackKyiv":5,"Iryna Zubrytska":19,"KateKolokhina":6}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/constants/bot/DialogState.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.constants.bot;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"public enum DialogState {"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"    ADD_GROUP,"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"    UPDATE_GROUP,"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"    DELETE_GROUP,"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"    ADD_GROUP_TEMPLATE,"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"    UPDATE_GROUP_TEMPLATE,"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"    DELETE_GROUP_TEMPLATE,"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":7,"Iryna Zubrytska":3}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/constants/bot/GlobalConstants.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.constants.bot;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"public class GlobalConstants {"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"    public static final String CANCEL_BUTTON_LABEL \u003d \"❌ Скасувати\";"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"    public static final String GROUP_BUTTON_LABEL \u003d \"Групи\";"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"    public static final String GROUP_TEMPLATES_BUTTON_LABEL \u003d \"Шаблони груп\";"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"    public static final String STUDENTS_BUTTON_LABEL \u003d \"Студенти\";"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"    public static final String ACTIVITIES_BUTTON_LABEL \u003d \"Активності\";"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"    public static final String ACTIVITY_STATUS_COMPLETED \u003d \"COMPLETED\";"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"    public static final String ACTIVITY_STATUS_IN_PROGRESS \u003d \"IN_PROGRESS\";"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String SKIP_STEP \u003d \"Щоб пропустити крок, введіть -\";"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"    public static final String GROUP_SHOW_ALL_ASSIGN_LABEL \u003d \"Додати активність до групи\";"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"    public static final String STUDENT_SHOW_ALL_ASSIGN_LABEL \u003d \"Додати активність до студента\";"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String ASSIGNED \u003d \"[ДОДАНО]\";"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":10,"BlackKyiv":2,"Iryna Zubrytska":3,"KateKolokhina":3}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/constants/bot/GroupConstants.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.constants.bot;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"public class GroupConstants {"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"    public static final String GROUP_MAP_KEY \u003d \"group\";"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"    public static final String GROUP_EDIT_BUTTON_LABEL \u003d \"Редагувати\";"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"    public static final String GROUP_DELETE_BUTTON_LABEL \u003d \"Видалити\";"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"    public static final String GROUP_ADD_BUTTON_LABEL \u003d \"Додати\";"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"    public static final String GROUP_SHOW_ALL_BUTTON_LABEL \u003d \"Показати всі групи\";"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"    /**"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"     * Template for full group info."},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"     * Arguments:"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"     * First — group name."},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"     * Second — group id."},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"     */"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    public static final String SHOW_FULL_GROUP \u003d \"\u003cb\u003e%s\u003c/b\u003e\\n\" +"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"            \"Id: %s\\n\" +"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"            \"Grade: %s\\n\" +"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"            \"Year: %s\";"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    public static final String ASK_FOR_GROUP_ID \u003d \"Вкажіть ідентифікатор групи.\";"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    public static final String ASK_FOR_GROUP_NAME \u003d \"Вкажіть назву групи.\";"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    public static final String ASK_FOR_GROUP_GRADE \u003d \"Вкажіть курс групи.\";"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    public static final String ASK_FOR_GROUP_YEAR \u003d \"Вкажіть рік групи.\";"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"    public static final String SUCCESSFULLY_ADDED \u003d \"Успішно додано групу.\";"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"    public static final String ERROR_WHILE_ADD \u003d \"Не змогли додати групу.\";"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    public static final String SUCCESSFULLY_UPDATED \u003d \"Групу успішно оновлено\\n%s\";"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    public static final String ERROR_WHILE_UPDATE \u003d \"Не змогли оновити групу.\";"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    public static final String NO_GROUP_WITH_ID \u003d \"Не знайшов групу з id: \u003cb\u003e%s\u003c/b\u003e.\\nСпробуйте ще раз.\";"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    public static final String WRONG_GRADE \u003d \"Курс \u003cb\u003e%s\u003c/b\u003e неправильний.\\nСпробуйте ще раз.\";"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"    public static final String WRONG_YEAR \u003d \"Рік \u003cb\u003e%s\u003c/b\u003e неправильний.\\nСпробуйте ще раз.\";"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    public static final String SUCCESSFULLY_DELETED \u003d \"Групу успішно видалено\";"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    public static final String ERROR_WHILE_DELETE \u003d \"Не змогли видалити групу\";"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    public static final String GROUP_SHOW_ALL_ASSIGN_LABEL \u003d \"Додати активність до групи\";"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    public static String groupToString(Group group){"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        return String.format(SHOW_FULL_GROUP, group.getName(), group.getId(), group.getGrade(), group.getYear());"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":46,"BlackKyiv":2}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/constants/bot/GroupTemplateConstants.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.constants.bot;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"public class GroupTemplateConstants {"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String GROUP_TEMPLATE_MAP_KEY \u003d \"group template\";"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String GROUP_TEMPLATE_EDIT_BUTTON_LABEL \u003d \"Редагувати\";"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String GROUP_TEMPLATE_DELETE_BUTTON_LABEL \u003d \"Видалити\";"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String GROUP_TEMPLATE_ADD_BUTTON_LABEL \u003d \"Додати\";"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String GROUP_TEMPLATE_SHOW_ALL_BUTTON_LABEL \u003d \"Показати всі шаблони груп\";"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String SHOW_GROUP_TEMPLATE \u003d \"Group template:\\n\u003cb\u003e%s %s %s\u003c/b\u003e\";"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String SHOW_GROUP_TEMPLATE_WITH_ID \u003d \"Group template:\\n\u003cb\u003e%s %s %s\u003c/b\u003e\\nid \u003d \u003cb\u003e%s\u003c/b\u003e\";"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String ASK_FOR_GROUP_TEMPLATE_ID \u003d \"Вкажіть ідентифікатор шаблону групи.\";"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String ASK_FOR_GROUP_TEMPLATE_NAME \u003d \"Вкажіть назву шаблону групи.\";"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String ASK_FOR_GROUP_TEMPLATE_GRADE \u003d \"Вкажіть курс шаблону групи.\";"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String ASK_FOR_GROUP_TEMPLATE_YEAR \u003d \"Вкажіть рік шаблону групи.\";"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String TEMPLATE_SUCCESSFULLY_ADDED \u003d \"Шаблон успішно додано\";"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String TEMPLATE_SUCCESSFULLY_UPDATED \u003d \"Шаблон успішно відредаговано\";"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String TEMPLATE_SUCCESSFULLY_DELETED \u003d \"Шаблон успішно видалено\";"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String WRONG_GRADE \u003d \"Курс \u003cb\u003e%s\u003c/b\u003e неправильний.\\nСпробуйте ще раз.\";"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String WRONG_YEAR \u003d \"Рік \u003cb\u003e%s\u003c/b\u003e неправильний.\\nСпробуйте ще раз.\";"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String CANNOT_CREATE_EMPTY_TEMPLATE \u003d \"Не можна створити порожній шаблон для груп. Потрібно вказати хоча би одне поле.\";"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String CANNOT_UPDATE_TEMPLATE_EXISTS \u003d \"Неможливо оновити шаблон. Інший шаблон з такими даними вже існує.\";"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String CANNOT_GET_TEMPLATE \u003d \"Шаблону з таким ідентифікатором не існує. Спробуйте ще раз.\";"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    public static final String CANNOT_DELETE_TEMPLATE_NOT_EXISTS \u003d \"Неможливо видалити шаблон. Шаблону з таким ідентифікатором не існує.\";"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":30}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/constants/bot/StudentConstants.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.constants.bot;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"public class StudentConstants {"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"    public static final String STUDENT_MAP_KEY \u003d \"student\";"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"    public static final String STUDENT_SHOW_ALL_BUTTON_LABEL \u003d \"Показати всіх студентів\";"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"    public static final String STUDENT_SHOW_CSV_BUTTON_LABEL \u003d \"Показати базу студентів (СSV)\";"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"    public static final String STUDENT_UPDATE_CSV_BUTTON_LABEL \u003d \"Оновоти базу студентів (СSV)\";"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"    public static final String STUDENT_CSV_FORMAT_EXAMPLE \u003d \"Введіть дані студентів в форматі CSV ⤵️\\n\" +"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"            \"[Прізвище],[Ім\u0027я],[Побатькові],[Факультет],[Id активності 1],[Id активності 2]....\";"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"    public static final String SHOW_FULL_STUDENT \u003d \"\u003cb\u003e%s %s %s\u003c/b\u003e\\n\" +"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"            \"\u003cb\u003eId:\u003c/b\u003e %s\\n\" +"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"            \"\u003cb\u003eEmail:\u003c/b\u003e %s\\n\" +"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"            \"\u003cb\u003eФакультет:\u003c/b\u003e %s\\n\" +"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"            \"\u003cb\u003eАктивностей:\u003c/b\u003e %s\\n\";"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":19}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/functions/TelegramWebhook.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.functions;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.telegram.StudentsBot;"},{"lineNumber":4,"author":{"gitId":"KateKolokhina"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import org.modelmapper.ModelMapper;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import java.util.function.Function;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"@Slf4j"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":"public class TelegramWebhook implements Function\u003cUpdate, BotApiMethod\u003c?\u003e\u003e {"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"    private final StudentsBot studentsBot;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"    @Autowired"},{"lineNumber":19,"author":{"gitId":"KateKolokhina"},"content":"    public TelegramWebhook(StudentsBot studentsBot) {"},{"lineNumber":20,"author":{"gitId":"KateKolokhina"},"content":"        this.studentsBot \u003d studentsBot;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":23,"author":{"gitId":"KateKolokhina"},"content":"    public BotApiMethod\u003c?\u003e apply(Update upd) {"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"        try {"},{"lineNumber":25,"author":{"gitId":"KateKolokhina"},"content":"            log.error(upd.toString());"},{"lineNumber":26,"author":{"gitId":"KateKolokhina"},"content":"            return studentsBot.onWebhookUpdateReceived(upd);"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"        } catch (Exception e) {"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"            e.printStackTrace();"},{"lineNumber":29,"author":{"gitId":"KateKolokhina"},"content":"            return null;"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":19,"KateKolokhina":13}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/functions/TelegramWebhookHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.functions;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import com.fasterxml.jackson.databind.ObjectMapper;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import com.microsoft.azure.functions.*;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import com.microsoft.azure.functions.annotation.AuthorizationLevel;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import com.microsoft.azure.functions.annotation.FunctionName;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import com.microsoft.azure.functions.annotation.HttpTrigger;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.telegram.StudentsBot;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.cloud.function.adapter.azure.FunctionInvoker;"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import java.util.Arrays;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import java.util.Optional;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":" * Azure Functions with HTTP Trigger."},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":" */"},{"lineNumber":20,"author":{"gitId":"KateKolokhina"},"content":"public class TelegramWebhookHandler extends FunctionInvoker\u003cUpdate, BotApiMethod\u003c?\u003e\u003e {"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"    /**"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"     * This function listens at endpoint \"/api/TelegramWebhook\". To invoke it using"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"     * \"curl\" command in bash:"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"     * curl -d \"HTTP Body\" {your host}/api/TelegramWebhook"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"     */"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"    @FunctionName(\"TelegramWebhook\")"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"    public HttpResponseMessage run("},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"            @HttpTrigger("},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"                    name \u003d \"req\","},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"                    methods \u003d {HttpMethod.POST},"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"                    authLevel \u003d AuthorizationLevel.FUNCTION)"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"            HttpRequestMessage\u003cOptional\u003cString\u003e\u003e request,"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"            final ExecutionContext context) {"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"        context.getLogger().info(\"Java HTTP trigger processed a request.\");"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        try {"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"            String req \u003d request.getBody().orElse(null);"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":40,"author":{"gitId":"KateKolokhina"},"content":"            Update update \u003d new ObjectMapper().readerFor(Update.class).readValue(req);"},{"lineNumber":41,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"            return request"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"                    .createResponseBuilder(HttpStatus.OK)"},{"lineNumber":44,"author":{"gitId":"KateKolokhina"},"content":"                    .body(handleRequest(update, context))"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"                    .header(\"Content-Type\", \"application/json\")"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"                    .build();"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        } catch (Exception e) {"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"            context.getLogger().info(e.toString() + Arrays.toString(e.getStackTrace()));"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"            return request"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"                    .createResponseBuilder(HttpStatus.BAD_REQUEST)"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"                    .body(\"Check request and try again\")"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"                    .build();"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"Mishok":12,"BlackKyiv":36,"KateKolokhina":7}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/ButtonRequestHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"public interface ButtonRequestHandler extends UserRequestHandler{}"}],"authorContributionMap":{"Mishok":3}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/CommonRequestHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"public abstract class CommonRequestHandler implements UserRequestHandler{"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"    public final boolean isApplicable(UserRequest request) {"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"        return true;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":10}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/DialogHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import lombok.AllArgsConstructor;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import lombok.Data;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import lombok.Value;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import java.util.ArrayList;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import java.util.Arrays;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import java.util.LinkedHashMap;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import java.util.List;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":" * The class handles the whole dialog entity."},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":" * It contains map which stores handlers which will be used during specific state of a dialog."},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":" */"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"public abstract class DialogHandler implements UserRequestHandler {"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    protected LinkedHashMap\u003cConversationState, DialogSingleHandler\u003e handlers;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    /**"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"     * This method make actions after dialog has finished."},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"     *"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"     * @param dispatchRequest request processed in the last handler"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"     */"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    protected abstract void finishActions(UserRequest dispatchRequest);"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    /**"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"     * This method defines how dialog should be set"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"     */"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse startDialog(UserRequest request) {"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        UserSession userSession \u003d request.getUserSession();"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"        userSession.setDialogState(getDialogType());"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        List\u003cConversationState\u003e states \u003d new ArrayList\u003c\u003e(handlers.keySet());"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        if (states.isEmpty()) {"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"            log.error(\"Conversation state is empty for the dialog\");"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(states.get(0));"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"        return handle(request);"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"    /**"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"     * Get type of the dialog."},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"     * @return type of the dialog.*/"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    public abstract DialogState getDialogType();"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"    /**"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"     * Find next state"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"     *"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"     * @param current Current state"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"     * @return next state or null if current one is final"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"     * @throws IllegalArgumentException if passed state is not in handlers"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"     */"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"    protected final ConversationState findNextState(ConversationState current) {"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"        List\u003cConversationState\u003e states \u003d new ArrayList\u003c\u003e(handlers.keySet());"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"        log.info(String.valueOf(current));"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"        //Iterate to the second last element to avoid indexing out of states"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"        for (int i \u003d 0; i \u003c states.size() - 1; i++) {"},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"            if (states.get(i).equals(current)) {"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"                return states.get(i + 1);"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"            }"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"        if (states.get(states.size() - 1).equals(current)) {"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"            //Current is the last one state"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":"            return null;"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"        } else {"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"            throw new IllegalArgumentException(\"There is no passed state in the handlers map\");"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"    public final HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"        log.info(\"User session: \" + dispatchRequest.getUserSession());"},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":"        ConversationState currentState \u003d dispatchRequest.getUserSession().getConversationState();"},{"lineNumber":81,"author":{"gitId":"Mishok"},"content":"        ConversationState nextState \u003d findNextState(currentState);"},{"lineNumber":82,"author":{"gitId":"Mishok"},"content":"        DialogSingleHandler handler \u003d handlers.get(currentState);"},{"lineNumber":83,"author":{"gitId":"Mishok"},"content":"        UserSession userSession \u003d dispatchRequest.getUserSession();"},{"lineNumber":84,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":85,"author":{"gitId":"Mishok"},"content":"        HandlerResponse res \u003d handler.userRequestHandler.handle(dispatchRequest);"},{"lineNumber":86,"author":{"gitId":"Mishok"},"content":"        log.info(\"Response result: \" + res);"},{"lineNumber":87,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":88,"author":{"gitId":"Mishok"},"content":"        if (res.isSuccess() \u0026\u0026 nextState \u003d\u003d null) {"},{"lineNumber":89,"author":{"gitId":"Mishok"},"content":"            //Actions for the last step"},{"lineNumber":90,"author":{"gitId":"Mishok"},"content":"            finishActions(dispatchRequest);"},{"lineNumber":91,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":92,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":93,"author":{"gitId":"Mishok"},"content":"        //Set next state if current handler was successful"},{"lineNumber":94,"author":{"gitId":"Mishok"},"content":"        if (res.isSuccess() \u0026\u0026 nextState !\u003d null) {"},{"lineNumber":95,"author":{"gitId":"Mishok"},"content":"            userSession.setConversationState(nextState);"},{"lineNumber":96,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":97,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":98,"author":{"gitId":"Mishok"},"content":"        return handler.callback.method(dispatchRequest, res);"},{"lineNumber":99,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":100,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":101,"author":{"gitId":"Mishok"},"content":"    @Data"},{"lineNumber":102,"author":{"gitId":"Mishok"},"content":"    @AllArgsConstructor"},{"lineNumber":103,"author":{"gitId":"Mishok"},"content":"    public static class DialogSingleHandler {"},{"lineNumber":104,"author":{"gitId":"Mishok"},"content":"        UserRequestHandler userRequestHandler;"},{"lineNumber":105,"author":{"gitId":"Mishok"},"content":"        PostActions callback;"},{"lineNumber":106,"author":{"gitId":"Mishok"},"content":"        public DialogSingleHandler(UserRequestHandler userRequestHandler){"},{"lineNumber":107,"author":{"gitId":"Mishok"},"content":"            this(userRequestHandler, (request, response) -\u003e response);"},{"lineNumber":108,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":109,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":111,"author":{"gitId":"Mishok"},"content":"    /**"},{"lineNumber":112,"author":{"gitId":"Mishok"},"content":"     * This is used to make some actions after request finished."},{"lineNumber":113,"author":{"gitId":"Mishok"},"content":"     * You can run another handler or do some logging"},{"lineNumber":114,"author":{"gitId":"Mishok"},"content":"     */"},{"lineNumber":115,"author":{"gitId":"Mishok"},"content":"    @FunctionalInterface"},{"lineNumber":116,"author":{"gitId":"Mishok"},"content":"    public interface PostActions {"},{"lineNumber":117,"author":{"gitId":"Mishok"},"content":"        HandlerResponse method(UserRequest request, HandlerResponse response);"},{"lineNumber":118,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":120,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":120}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/GlobalRequestHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"public interface GlobalRequestHandler extends UserRequestHandler{}"}],"authorContributionMap":{"Mishok":3}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/UserRequestHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.handler;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":4,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":5,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":6,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":7,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"public interface UserRequestHandler {"},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"    boolean isApplicable(UserRequest request);"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"    HandlerResponse handle(UserRequest dispatchRequest);"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"    static boolean isCommand(Update update, String command) {"},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":"        return update.hasMessage() \u0026\u0026 update.getMessage().isCommand()"},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":"                \u0026\u0026 update.getMessage().getText().equals(command);"},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"    static boolean isTextMessage(Update update) {"},{"lineNumber":19,"author":{"gitId":"KateKolokhina"},"content":"        return update.hasMessage() \u0026\u0026 update.getMessage().hasText();"},{"lineNumber":20,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    static boolean isTextMessage(Update update, String text) {"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"        return isTextMessage(update) \u0026\u0026 update.getMessage().getText().equals(text);"},{"lineNumber":24,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"Mishok":8,"KateKolokhina":17}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/CancelHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.handler.impl;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.GlobalRequestHandler;"},{"lineNumber":6,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":"@Component"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"public class CancelHandler implements GlobalRequestHandler {"},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"    private final StartCommandHandler startCommandHandler;"},{"lineNumber":18,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    public CancelHandler(StartCommandHandler startCommandHandler) {"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"        this.startCommandHandler \u003d startCommandHandler;"},{"lineNumber":21,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":23,"author":{"gitId":"KateKolokhina"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"KateKolokhina"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate(), GlobalConstants.CANCEL_BUTTON_LABEL);"},{"lineNumber":26,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":28,"author":{"gitId":"KateKolokhina"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest userRequest) {"},{"lineNumber":30,"author":{"gitId":"KateKolokhina"},"content":"        UserSession userSession \u003d userRequest.getUserSession();"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"        userSession.setDialogState(null);"},{"lineNumber":33,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"        return startCommandHandler.handle(userRequest);"},{"lineNumber":35,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"Mishok":12,"KateKolokhina":24}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/StartCommandHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.handler.impl;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.GlobalRequestHandler;"},{"lineNumber":5,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":6,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboard;"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":"@Component"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"public class StartCommandHandler implements GlobalRequestHandler{"},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":"    private static String command \u003d \"/start\";"},{"lineNumber":18,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":20,"author":{"gitId":"KateKolokhina"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":22,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    public StartCommandHandler(TelegramService telegramService, KeyboardHelper keyboardHelper, UserSessionService userSessionService) {"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":25,"author":{"gitId":"KateKolokhina"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":27,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":29,"author":{"gitId":"KateKolokhina"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"KateKolokhina"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"        return UserRequestHandler.isCommand(userRequest.getUpdate(), command);"},{"lineNumber":32,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":34,"author":{"gitId":"KateKolokhina"},"content":"    @Override"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest request) {"},{"lineNumber":36,"author":{"gitId":"KateKolokhina"},"content":"        ReplyKeyboard replyKeyboard \u003d keyboardHelper.buildMainMenu();"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        request.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"        userSessionService.saveSession(request.getChatId(), request.getUserSession());"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        telegramService.sendMessage(request.getChatId(),"},{"lineNumber":40,"author":{"gitId":"KateKolokhina"},"content":"                \"\\uD83D\\uDC4BПривіт! Вітаю у чаті команди опосумів\","},{"lineNumber":41,"author":{"gitId":"KateKolokhina"},"content":"                replyKeyboard);"},{"lineNumber":42,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"        return new HandlerResponse(telegramService.sendMessage(request.getChatId(),"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"                \"Обирайте з меню нижче ⤵️\"), true);"},{"lineNumber":45,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"Mishok":18,"KateKolokhina":28}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/assign/group/AssignActivitiesToGroupHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.assign.group;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":10,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":13,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":18,"author":{"gitId":"dgoptsii"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":19,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import static edu.kmaooad.constants.bot.GlobalConstants.ASSIGNED;"},{"lineNumber":21,"author":{"gitId":"dgoptsii"},"content":"import static edu.kmaooad.constants.bot.GroupConstants.GROUP_MAP_KEY;"},{"lineNumber":22,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":23,"author":{"gitId":"dgoptsii"},"content":"@Component"},{"lineNumber":24,"author":{"gitId":"dgoptsii"},"content":"@Slf4j"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"public class AssignActivitiesToGroupHandler implements ButtonRequestHandler {"},{"lineNumber":26,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":27,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":28,"author":{"gitId":"dgoptsii"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":29,"author":{"gitId":"dgoptsii"},"content":"    private final GroupService groupService;"},{"lineNumber":30,"author":{"gitId":"dgoptsii"},"content":"    private final ActivityService activityService;"},{"lineNumber":31,"author":{"gitId":"dgoptsii"},"content":"    private final TelegramService telegramService;"},{"lineNumber":32,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":33,"author":{"gitId":"dgoptsii"},"content":"    AssignActivitiesToGroupHandler(KeyboardHelper keyboardHelper, TelegramService telegramService,"},{"lineNumber":34,"author":{"gitId":"dgoptsii"},"content":"                                   GroupService groupService, ActivityService activityService"},{"lineNumber":35,"author":{"gitId":"dgoptsii"},"content":"    ) {"},{"lineNumber":36,"author":{"gitId":"dgoptsii"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":37,"author":{"gitId":"dgoptsii"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":38,"author":{"gitId":"dgoptsii"},"content":"        this.groupService \u003d groupService;"},{"lineNumber":39,"author":{"gitId":"dgoptsii"},"content":"        this.activityService \u003d activityService;"},{"lineNumber":40,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":42,"author":{"gitId":"dgoptsii"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"dgoptsii"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":44,"author":{"gitId":"dgoptsii"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate()) \u0026\u0026"},{"lineNumber":45,"author":{"gitId":"dgoptsii"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_GROUP_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":46,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":48,"author":{"gitId":"dgoptsii"},"content":"    @Override"},{"lineNumber":49,"author":{"gitId":"dgoptsii"},"content":"    public HandlerResponse handle(UserRequest userRequest) {"},{"lineNumber":50,"author":{"gitId":"dgoptsii"},"content":"        Group group \u003d (Group) userRequest.getUserSession().getData().get(GroupConstants.GROUP_MAP_KEY);"},{"lineNumber":51,"author":{"gitId":"dgoptsii"},"content":"        String text \u003d userRequest.getUpdate().getMessage().getText();"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        log.info(\"Trying to assign/unassign activity \" + text + \" from group\");"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        try {"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"            if (text.contains(ASSIGNED)) {"},{"lineNumber":55,"author":{"gitId":"dgoptsii"},"content":"                String activityName \u003d text.replace(ASSIGNED, \"\").trim();"},{"lineNumber":56,"author":{"gitId":"dgoptsii"},"content":"                Activity activity \u003d activityService.getActivityByName(activityName);"},{"lineNumber":57,"author":{"gitId":"dgoptsii"},"content":"                groupService.deleteActivityGroup(activity.getId(), group.getId());"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"                telegramService.sendMessage(userRequest.getChatId(),"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"                        \"Видалена активність \" + activity.getName() + \" з групи \" + group.getName());"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"                log.info(\"Deleted activity \" + activityName + \" from group \" + group.getName());"},{"lineNumber":61,"author":{"gitId":"dgoptsii"},"content":"            } else {"},{"lineNumber":62,"author":{"gitId":"dgoptsii"},"content":"                Activity activity \u003d activityService.getActivityByName(text);"},{"lineNumber":63,"author":{"gitId":"dgoptsii"},"content":"                groupService.addActivityGroup(activity.getId(), group.getId());"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"                telegramService.sendMessage(userRequest.getChatId(),"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"                        \"Додана активність \" + activity.getName() + \" до групи \" + group.getName());"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"                log.info(\"Added activity \" + activity.getName() + \" to group \" + group.getName());"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"            }"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"        } catch (ServiceException e) {"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"            e.printStackTrace();"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"            log.error(\"Failed to delete or add activity \" + text + \" to group\" + group.getName());"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":72,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"        Group updatedGroup \u003d groupService.getGroupById(group.getId());"},{"lineNumber":74,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildAdditionalActionsVertical(activityService.getStatusOfActivitiesForGroup(updatedGroup));"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        userRequest.getUserSession().getData().put(GROUP_MAP_KEY, updatedGroup);"},{"lineNumber":77,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"        return new HandlerResponse(telegramService.sendMessage(userRequest.getChatId(), \"Оберіть активність яку хочете додати до \" + updatedGroup.getName() + \" ⤵️\", replyKeyboardMarkup), true);"},{"lineNumber":79,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"dgoptsii":54,"BlackKyiv":26}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/assign/group/SelectActivitiesToAssignToGroupHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.assign.group;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"@Component"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"public class SelectActivitiesToAssignToGroupHandler implements ButtonRequestHandler {"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"    private final GroupService groupService;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"    private final ActivityService activityService;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    private final TelegramService telegramService;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"    SelectActivitiesToAssignToGroupHandler(KeyboardHelper keyboardHelper, TelegramService telegramService,"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"                                           GroupService groupService, ActivityService activityService"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    ) {"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"        this.groupService \u003d groupService;"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"        this.activityService \u003d activityService;"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate()) \u0026\u0026"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_GROUP_TO_ASSIGN_CHOICE);"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    public HandlerResponse handle(UserRequest userRequest) {"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"        log.info(userRequest.toString());"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        String text \u003d userRequest.getUpdate().getMessage().getText();"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        Group group \u003d groupService.getGroupByName(text.trim());"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        log.info(\"User picked group by name \" + text + \", found group \" + group);"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"        userRequest.getUserSession().getData().put(GroupConstants.GROUP_MAP_KEY, group);"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildAdditionalActionsVertical(activityService.getStatusOfActivitiesForGroup(group));"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        userRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_GROUP_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        return new HandlerResponse(telegramService.sendMessage(userRequest.getChatId(), \"Оберіть активність яку хочете додати до \" + group.getName() + \" ⤵️\", replyKeyboardMarkup), true);"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":54}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/assign/group/SelectGroupToAssignHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.assign.group;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import java.util.List;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import java.util.stream.Collectors;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"@Component"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"public class SelectGroupToAssignHandler implements ButtonRequestHandler {"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    private final GroupService groupService;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"    private final TelegramService telegramService;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"    SelectGroupToAssignHandler(KeyboardHelper keyboardHelper, GroupService groupService,"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"                               TelegramService telegramService) {"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"        this.groupService \u003d groupService;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate(), GlobalConstants.GROUP_SHOW_ALL_ASSIGN_LABEL) \u0026\u0026"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    public HandlerResponse handle(UserRequest userRequest) {"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cString\u003e groupNames \u003d groupService.getAllGroups().stream()"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"                .map(Group::getName).collect(Collectors.toList());"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildAdditionalActionsVertical(groupNames);"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        userRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_GROUP_TO_ASSIGN_CHOICE);"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        return new HandlerResponse(telegramService.sendMessage(userRequest.getChatId(), \"Оберіть групу якій хочете додати активності⤵️\", replyKeyboardMarkup), true);"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":52}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/assign/student/AssignActivitiesToStudentHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.assign.student;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":10,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":17,"author":{"gitId":"dgoptsii"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":18,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import static edu.kmaooad.constants.bot.GlobalConstants.ASSIGNED;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import static edu.kmaooad.constants.bot.StudentConstants.STUDENT_MAP_KEY;"},{"lineNumber":21,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":22,"author":{"gitId":"dgoptsii"},"content":"@Component"},{"lineNumber":23,"author":{"gitId":"dgoptsii"},"content":"@Slf4j"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"public class AssignActivitiesToStudentHandler implements ButtonRequestHandler {"},{"lineNumber":25,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":26,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":27,"author":{"gitId":"dgoptsii"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"    private final StudentService studentService;"},{"lineNumber":29,"author":{"gitId":"dgoptsii"},"content":"    private final ActivityService activityService;"},{"lineNumber":30,"author":{"gitId":"dgoptsii"},"content":"    private final TelegramService telegramService;"},{"lineNumber":31,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"    AssignActivitiesToStudentHandler(KeyboardHelper keyboardHelper, TelegramService telegramService,"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"                                     StudentService studentService, ActivityService activityService"},{"lineNumber":34,"author":{"gitId":"dgoptsii"},"content":"    ) {"},{"lineNumber":35,"author":{"gitId":"dgoptsii"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":36,"author":{"gitId":"dgoptsii"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"        this.studentService \u003d studentService;"},{"lineNumber":38,"author":{"gitId":"dgoptsii"},"content":"        this.activityService \u003d activityService;"},{"lineNumber":39,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":41,"author":{"gitId":"dgoptsii"},"content":"    @Override"},{"lineNumber":42,"author":{"gitId":"dgoptsii"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":43,"author":{"gitId":"dgoptsii"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate()) \u0026\u0026"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_STUDENT_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":45,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":47,"author":{"gitId":"dgoptsii"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"dgoptsii"},"content":"    public HandlerResponse handle(UserRequest userRequest) {"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        Student student \u003d (Student) userRequest.getUserSession().getData().get(STUDENT_MAP_KEY);"},{"lineNumber":50,"author":{"gitId":"dgoptsii"},"content":"        String text \u003d userRequest.getUpdate().getMessage().getText();"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        log.info(\"Trying to assign/unassign activity \" + text + \" from student\");"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        try {"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"            if (text.contains(ASSIGNED)) {"},{"lineNumber":54,"author":{"gitId":"dgoptsii"},"content":"                String activityName \u003d text.replace(ASSIGNED, \"\").trim();"},{"lineNumber":55,"author":{"gitId":"dgoptsii"},"content":"                Activity activity \u003d activityService.getActivityByName(activityName);"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"                studentService.deleteStudentActivity(activity.getId(), student.getId());"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"                telegramService.sendMessage(userRequest.getChatId(),"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"                        \"Видалена активність \" + activity.getName() + \" із студента \" + student.getFirstName() + student.getLastName());"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"                log.info(\"Deleted activity \" + activityName + \" from student \" + student.getEmail());"},{"lineNumber":60,"author":{"gitId":"dgoptsii"},"content":"            } else {"},{"lineNumber":61,"author":{"gitId":"dgoptsii"},"content":"                Activity activity \u003d activityService.getActivityByName(text);"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"                studentService.addStudentActivity(activity.getId(), student.getId());"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"                telegramService.sendMessage(userRequest.getChatId(),"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"                        \"Додана активність \" + activity.getName() + \" до студента \" + student.getFirstName() + student.getLastName());"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"                log.info(\"Added activity \" + activity.getName() + \" to group \" + student.getEmail());"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"            }"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"        } catch (ServiceException e) {"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"            e.printStackTrace();"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"            log.error(\"Failed to delete or add activity \" + text + \" to student\" + student.getEmail());"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":71,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"        Student updatedStudent \u003d studentService.getStudentByEmail(student.getEmail());"},{"lineNumber":73,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildAdditionalActionsVertical(activityService.getStatusOfActivitiesForStudent(updatedStudent));"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        userRequest.getUserSession().getData().put(STUDENT_MAP_KEY, updatedStudent);"},{"lineNumber":76,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"        return new HandlerResponse(telegramService.sendMessage(userRequest.getChatId(), \"Оберіть активність яку хочете додати до \" + updatedStudent.getFirstName() + \" \" + updatedStudent.getLastName() + \" ⤵️\", replyKeyboardMarkup), true);"},{"lineNumber":78,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"dgoptsii":42,"BlackKyiv":37}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/assign/student/SelectActivitiesToAssignToStudentHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.assign.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.StudentConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"@Component"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"public class SelectActivitiesToAssignToStudentHandler implements ButtonRequestHandler {"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"    private final StudentService studentService;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"    private final ActivityService activityService;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    private final TelegramService telegramService;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"    SelectActivitiesToAssignToStudentHandler(KeyboardHelper keyboardHelper, TelegramService telegramService,"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"                                             StudentService studentService, ActivityService activityService"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    ) {"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"        this.studentService \u003d studentService;"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"        this.activityService \u003d activityService;"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate()) \u0026\u0026"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_STUDENT_TO_ASSIGN_CHOICE);"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    public HandlerResponse handle(UserRequest userRequest) {"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"        log.info(userRequest.toString());"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        String text \u003d userRequest.getUpdate().getMessage().getText();"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        String[] textSplit \u003d text.trim().split(\"\\n\");"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        if (textSplit.length !\u003d 2) {"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"            log.warn(\"Cannot split \" + text + \"to find email\");"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"            return new HandlerResponse(telegramService.sendMessage(userRequest.getChatId(), \"Не існує такого студента\"), true);"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        Student student \u003d studentService.getStudentByEmail(textSplit[1]);"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        log.info(\"User picked student with email \" + textSplit[1] + \", found student \" + student);"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        userRequest.getUserSession().getData().put(StudentConstants.STUDENT_MAP_KEY, student);"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildAdditionalActionsVertical(activityService.getStatusOfActivitiesForStudent(student));"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        userRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        return new HandlerResponse(telegramService.sendMessage(userRequest.getChatId(), \"Оберіть активність яку хочете додати до \" + student.getFirstName() + \" \" + student.getLastName() + \" ⤵️\", replyKeyboardMarkup), true);"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":59}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/assign/student/SelectStudentToAssignHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.assign.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import java.util.List;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import java.util.stream.Collectors;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"@Component"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"public class SelectStudentToAssignHandler implements ButtonRequestHandler {"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"    private final StudentService studentService;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    private final TelegramService telegramService;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"    SelectStudentToAssignHandler(KeyboardHelper keyboardHelper, StudentService groupService,"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"                                 TelegramService telegramService) {"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"        this.studentService \u003d groupService;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate(), GlobalConstants.STUDENT_SHOW_ALL_ASSIGN_LABEL) \u0026\u0026"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    public HandlerResponse handle(UserRequest userRequest) {"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cString\u003e studentNames \u003d studentService.getAllStudents().stream()"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"                .map(s -\u003e s.getFirstName() + \u0027 \u0027 + s.getLastName() + \u0027 \u0027 + s.getPatronym() + \u0027\\n\u0027 + s.getEmail())"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"                .collect(Collectors.toList());"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildAdditionalActionsVertical(studentNames);"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        userRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_STUDENT_TO_ASSIGN_CHOICE);"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        return new HandlerResponse(telegramService.sendMessage(userRequest.getChatId(), \"Оберіть студента якому хочете додати активності⤵️\", replyKeyboardMarkup), true);"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":52}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/AddGroupButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"public class AddGroupButtonHandler implements ButtonRequestHandler {"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"    private final AddGroupDialog addGroupDialog;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"    public AddGroupButtonHandler(AddGroupDialog addGroupDialog) {"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"        this.addGroupDialog \u003d addGroupDialog;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate(), GroupConstants.GROUP_ADD_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"        log.info(\"Add group dialog started\");"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"        return addGroupDialog.startDialog(dispatchRequest);"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":35}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/AddGroupDialog.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.DialogHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.common.*;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import java.util.LinkedHashMap;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"public class AddGroupDialog extends DialogHandler {"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    private final GroupService groupService;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    private final GroupButtonsHandler groupButtonsHandler;"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    AddGroupDialog(AskGroupNameHandler askGroupNameHandler, GetGroupNameHandler getGroupNameHandler,"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"                   AskGroupGradeHandler askGroupGradeHandler, GetGroupGradeHandler getGroupGradeHandler,"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"                   AskGroupYearHandler askGroupYearHandler, GetGroupYearHandler getGroupYearHandler,"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"                   GroupButtonsHandler groupButtonsHandler,"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"                   UserSessionService userSessionService, GroupService groupService, TelegramService telegramService) {"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"        this.groupService \u003d groupService;"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"        this.groupButtonsHandler \u003d groupButtonsHandler;"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"        handlers \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        PostActions moveToNext \u003d (request, response) -\u003e {"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"            if (response.isSuccess()) {"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"                return handle(request);"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"            }"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"            return response;"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"        };"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.ASK_FOR_GROUP_NAME, new DialogSingleHandler(askGroupNameHandler));"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.WAITING_FOR_GROUP_NAME, new DialogSingleHandler(getGroupNameHandler, moveToNext));"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.ASK_FOR_GROUP_GRADE, new DialogSingleHandler(askGroupGradeHandler));"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.WAITING_FOR_GROUP_GRADE, new DialogSingleHandler(getGroupGradeHandler, moveToNext));"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.ASK_FOR_GROUP_YEAR, new DialogSingleHandler(askGroupYearHandler));"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.WAITING_FOR_GROUP_YEAR, new DialogSingleHandler(getGroupYearHandler));"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"    public final HandlerResponse startDialog(UserRequest userRequest) {"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"        userRequest.getUserSession().getData().put(GroupConstants.GROUP_MAP_KEY, new Group());"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"        userSessionService.saveSession(userRequest.getChatId(), userRequest.getUserSession());"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"        log.info(\"Some response: \" + userRequest.getUserSession().getData().keySet());"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"        return super.startDialog(userRequest);"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"        return request.getUserSession().getDialogState().equals(getDialogType());"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"KateKolokhina"},"content":"    //todo"},{"lineNumber":70,"author":{"gitId":"KateKolokhina"},"content":"    // take off comment"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"    protected void finishActions(UserRequest dispatchRequest) {"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"        log.warn(\"AddGroupDialog finish actions: \" + dispatchRequest.getUserSession().getData().get(\"group\"));"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"        Group group \u003d (Group) dispatchRequest.getUserSession().getData().get(GroupConstants.GROUP_MAP_KEY);"},{"lineNumber":75,"author":{"gitId":"KateKolokhina"},"content":"       try {"},{"lineNumber":76,"author":{"gitId":"KateKolokhina"},"content":"           groupService.addGroup(group);"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"           log.info(\"Successfully added group: \" + group);"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"           telegramService.sendMessage(dispatchRequest.getChatId(), GroupConstants.SUCCESSFULLY_ADDED);"},{"lineNumber":79,"author":{"gitId":"KateKolokhina"},"content":"       } catch (ServiceException e) {"},{"lineNumber":80,"author":{"gitId":"KateKolokhina"},"content":"           e.printStackTrace();"},{"lineNumber":81,"author":{"gitId":"Mishok"},"content":"           log.error(\"Cannot add group: \" + group);"},{"lineNumber":82,"author":{"gitId":"Mishok"},"content":"           telegramService.sendMessage(dispatchRequest.getChatId(), GroupConstants.ERROR_WHILE_ADD);"},{"lineNumber":83,"author":{"gitId":"Mishok"},"content":"       }"},{"lineNumber":84,"author":{"gitId":"Mishok"},"content":"        dispatchRequest.getUserSession().setDialogState(null);"},{"lineNumber":85,"author":{"gitId":"Mishok"},"content":"        //Go back to the group menu"},{"lineNumber":86,"author":{"gitId":"Mishok"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":87,"author":{"gitId":"Mishok"},"content":"        groupButtonsHandler.handle(dispatchRequest);"},{"lineNumber":88,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":90,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":91,"author":{"gitId":"Mishok"},"content":"    public DialogState getDialogType() {"},{"lineNumber":92,"author":{"gitId":"Mishok"},"content":"        return DialogState.ADD_GROUP;"},{"lineNumber":93,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":87,"KateKolokhina":7}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/DeleteGroupButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"public class DeleteGroupButtonHandler implements ButtonRequestHandler {"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"    private final DeleteGroupDialog deleteGroupDialog;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"    public DeleteGroupButtonHandler(DeleteGroupDialog deleteGroupDialog) {"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"        this.deleteGroupDialog \u003d deleteGroupDialog;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate(), GroupConstants.GROUP_DELETE_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"        log.info(\"Delete group dialog started, chatId: \" + dispatchRequest.getChatId());"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"        return deleteGroupDialog.startDialog(dispatchRequest);"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":32}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/DeleteGroupDialog.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group;"},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.DialogHandler;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.handler.impl.group.common.AskGroupIDHandler;"},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.handler.impl.group.common.GetGroupIDHandler;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import java.util.LinkedHashMap;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"public class DeleteGroupDialog extends DialogHandler {"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    private final GroupService groupService;"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    private final GroupButtonsHandler groupButtonsHandler;"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"    DeleteGroupDialog(AskGroupIDHandler askGroupIDHandler, GetGroupIDHandler getGroupIDHandler,"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"                      GroupButtonsHandler groupButtonsHandler,"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"                      UserSessionService userSessionService, GroupService groupService, TelegramService telegramService) {"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"        this.groupService \u003d groupService;"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"        this.groupButtonsHandler \u003d groupButtonsHandler;"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"        handlers \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.ASK_FOR_GROUP_ID, new DialogSingleHandler(askGroupIDHandler));"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.WAITING_FOR_GROUP_ID, new DialogSingleHandler(getGroupIDHandler));"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    public final HandlerResponse startDialog(UserRequest userRequest) {"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        userRequest.getUserSession().getData().put(GroupConstants.GROUP_MAP_KEY, new Group());"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        userSessionService.saveSession(userRequest.getChatId(), userRequest.getUserSession());"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.info(\"Some response: \" + userRequest.getUserSession().getData().keySet());"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"        return super.startDialog(userRequest);"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"        return request.getUserSession().getDialogState().equals(getDialogType());"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"    protected void finishActions(UserRequest dispatchRequest) {"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"        Group group \u003d (Group) dispatchRequest.getUserSession().getData().get(GroupConstants.GROUP_MAP_KEY);"},{"lineNumber":60,"author":{"gitId":"KateKolokhina"},"content":"        try {"},{"lineNumber":61,"author":{"gitId":"KateKolokhina"},"content":"            groupService.deleteGroup(group.getId());"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"            log.info(\"Successfully deleted group: \" + group);"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(), String.format(GroupConstants.SUCCESSFULLY_DELETED, GroupConstants.groupToString(group)));"},{"lineNumber":64,"author":{"gitId":"KateKolokhina"},"content":"        } catch (ServiceException e) {"},{"lineNumber":65,"author":{"gitId":"KateKolokhina"},"content":"            e.printStackTrace();"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"            log.error(\"Cannot delete group: \" + group);"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(), GroupConstants.ERROR_WHILE_DELETE);"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"        dispatchRequest.getUserSession().setDialogState(null);"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"        //Go back to the group menu"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"        groupButtonsHandler.handle(dispatchRequest);"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"    public DialogState getDialogType() {"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"        return DialogState.DELETE_GROUP;"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":71,"Iryna Zubrytska":1,"KateKolokhina":7}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/GroupButtonsHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":7,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":18,"author":{"gitId":"KateKolokhina"},"content":"import java.util.List;"},{"lineNumber":19,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"public class GroupButtonsHandler implements ButtonRequestHandler {"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":23,"author":{"gitId":"KateKolokhina"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":24,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    public GroupButtonsHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":27,"author":{"gitId":"KateKolokhina"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":28,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":30,"author":{"gitId":"KateKolokhina"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"KateKolokhina"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate(), GlobalConstants.GROUP_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":34,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":36,"author":{"gitId":"KateKolokhina"},"content":"    @Override"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest userRequest) {"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildGroupMenuWithCancel();"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        userRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":40,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        return new HandlerResponse(telegramService.sendMessage(userRequest.getChatId(), \"Оберіть що хочете робити⤵️\", replyKeyboardMarkup), true);"},{"lineNumber":42,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"Mishok":18,"KateKolokhina":25}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/ShowAllGroupsButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import java.util.List;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"public class ShowAllGroupsButtonHandler implements ButtonRequestHandler {"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    private final GroupService groupService;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    private final GroupButtonsHandler groupButtonsHandler;"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    public ShowAllGroupsButtonHandler(GroupService groupService, TelegramService telegramService, UserSessionService userSessionService, GroupButtonsHandler groupButtonsHandler) {"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"        this.groupService \u003d groupService;"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"        this.groupButtonsHandler \u003d groupButtonsHandler;"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        return UserRequestHandler.isTextMessage(request.getUpdate(), GroupConstants.GROUP_SHOW_ALL_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"                request.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"        List\u003cGroup\u003e groups \u003d groupService.getAllGroups();"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"        log.info(\"Groups: \" + groups.toString());"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        for (Group group : groups) {"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(),"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"                    String.format(GroupConstants.SHOW_FULL_GROUP, group.getName(), group.getId(), group.getGrade(), group.getYear()));"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"        //Set previous state for groupButtonsHandler"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"        return groupButtonsHandler.handle(dispatchRequest);"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":55}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/UpdateGroupButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"public class UpdateGroupButtonHandler implements ButtonRequestHandler {"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"    private final UpdateGroupDialog updateGroupDialog;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"    public UpdateGroupButtonHandler(UpdateGroupDialog updateGroupDialog) {"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"        this.updateGroupDialog \u003d updateGroupDialog;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate(), GroupConstants.GROUP_EDIT_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"        log.info(\"Update group dialog started, chatId: \" + dispatchRequest.getChatId());"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"        return updateGroupDialog.startDialog(dispatchRequest);"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":32}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/UpdateGroupDialog.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group;"},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.DialogHandler;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.common.*;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import java.util.LinkedHashMap;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"public class UpdateGroupDialog extends DialogHandler {"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    private final GroupService groupService;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    private final GroupButtonsHandler groupButtonsHandler;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"    UpdateGroupDialog(AskGroupIDHandler askGroupIDHandler, GetGroupIDHandler getGroupIDHandler,"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"                      AskGroupNameHandler askGroupNameHandler, GetGroupNameHandler getGroupNameHandler,"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"                      AskGroupGradeHandler askGroupGradeHandler, GetGroupGradeHandler getGroupGradeHandler,"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"                      AskGroupYearHandler askGroupYearHandler, GetGroupYearHandler getGroupYearHandler,"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"                      GroupButtonsHandler groupButtonsHandler,"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"                      UserSessionService userSessionService, GroupService groupService, TelegramService telegramService) {"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"        this.groupService \u003d groupService;"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"        this.groupButtonsHandler \u003d groupButtonsHandler;"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        handlers \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"        PostActions moveToNext \u003d (request, response) -\u003e {"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"            if (response.isSuccess()) {"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"                return handle(request);"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"            }"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"            return response;"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        };"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"        PostActions getGroupById \u003d (request, response) -\u003e {"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"            if (response.isSuccess()) {"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"                Group groupWithID \u003d (Group) request.getUserSession().getData().get(GroupConstants.GROUP_MAP_KEY);"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"                Group groupDB \u003d groupService.getGroupById(groupWithID.getId());"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"                if (groupDB \u003d\u003d null) {"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"                    log.warn(\"Group not found: \" + groupWithID.getId());"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"                    //State will automatically switch if group was correct. To ask again we should move back."},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"                    request.getUserSession().setConversationState(ConversationState.WAITING_FOR_GROUP_ID);"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"                    return new HandlerResponse(telegramService.sendMessage(request.getChatId(), String.format(GroupConstants.NO_GROUP_WITH_ID, groupWithID.getId())), false);"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"                } else {"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"                    telegramService.sendMessage(request.getChatId(), GroupConstants.groupToString(groupDB));"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"                    request.getUserSession().getData().replace(GroupConstants.GROUP_MAP_KEY, groupDB);"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"                    //Ask changes"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"                    return handle(request);"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"                }"},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"            }"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"            return response;"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"        };"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.ASK_FOR_GROUP_ID, new DialogSingleHandler(askGroupIDHandler));"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.WAITING_FOR_GROUP_ID, new DialogSingleHandler(getGroupIDHandler, getGroupById));"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.ASK_FOR_GROUP_NAME, new DialogSingleHandler(askGroupNameHandler));"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.WAITING_FOR_GROUP_NAME, new DialogSingleHandler(getGroupNameHandler, moveToNext));"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.ASK_FOR_GROUP_GRADE, new DialogSingleHandler(askGroupGradeHandler));"},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.WAITING_FOR_GROUP_GRADE, new DialogSingleHandler(getGroupGradeHandler, moveToNext));"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.ASK_FOR_GROUP_YEAR, new DialogSingleHandler(askGroupYearHandler));"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"        handlers.put(ConversationState.WAITING_FOR_GROUP_YEAR, new DialogSingleHandler(getGroupYearHandler));"},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":82,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":83,"author":{"gitId":"Mishok"},"content":"    public final HandlerResponse startDialog(UserRequest userRequest) {"},{"lineNumber":84,"author":{"gitId":"Mishok"},"content":"        userRequest.getUserSession().getData().put(GroupConstants.GROUP_MAP_KEY, new Group());"},{"lineNumber":85,"author":{"gitId":"Mishok"},"content":"        userSessionService.saveSession(userRequest.getChatId(), userRequest.getUserSession());"},{"lineNumber":86,"author":{"gitId":"Mishok"},"content":"        log.info(\"Some response: \" + userRequest.getUserSession().getData().keySet().toString());"},{"lineNumber":87,"author":{"gitId":"Mishok"},"content":"        return super.startDialog(userRequest);"},{"lineNumber":88,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":90,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":91,"author":{"gitId":"Mishok"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":92,"author":{"gitId":"Mishok"},"content":"        return request.getUserSession().getDialogState().equals(getDialogType());"},{"lineNumber":93,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":95,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":96,"author":{"gitId":"Mishok"},"content":"    protected void finishActions(UserRequest dispatchRequest) {"},{"lineNumber":97,"author":{"gitId":"Mishok"},"content":"        log.warn(\"AddGroupDialog finish actions: \" + dispatchRequest.getUserSession().getData().get(\"group\"));"},{"lineNumber":98,"author":{"gitId":"Mishok"},"content":"        Group group \u003d (Group) dispatchRequest.getUserSession().getData().get(GroupConstants.GROUP_MAP_KEY);"},{"lineNumber":99,"author":{"gitId":"KateKolokhina"},"content":"        try {"},{"lineNumber":100,"author":{"gitId":"KateKolokhina"},"content":"            groupService.updateGroup(group);"},{"lineNumber":101,"author":{"gitId":"Mishok"},"content":"            log.info(\"Successfully update group: \" + group);"},{"lineNumber":102,"author":{"gitId":"Mishok"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(), String.format(GroupConstants.SUCCESSFULLY_UPDATED, GroupConstants.groupToString(group)));"},{"lineNumber":103,"author":{"gitId":"KateKolokhina"},"content":"        } catch (ServiceException e) {"},{"lineNumber":104,"author":{"gitId":"KateKolokhina"},"content":"            e.printStackTrace();"},{"lineNumber":105,"author":{"gitId":"Mishok"},"content":"            log.error(\"Cannot update group: \" + group);"},{"lineNumber":106,"author":{"gitId":"Mishok"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(), GroupConstants.ERROR_WHILE_UPDATE);"},{"lineNumber":107,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":108,"author":{"gitId":"Mishok"},"content":"        dispatchRequest.getUserSession().setDialogState(null);"},{"lineNumber":109,"author":{"gitId":"Mishok"},"content":"        //Go back to the group menu"},{"lineNumber":110,"author":{"gitId":"Mishok"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":111,"author":{"gitId":"Mishok"},"content":"        groupButtonsHandler.handle(dispatchRequest);"},{"lineNumber":112,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":114,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":115,"author":{"gitId":"Mishok"},"content":"    public DialogState getDialogType() {"},{"lineNumber":116,"author":{"gitId":"Mishok"},"content":"        return DialogState.UPDATE_GROUP;"},{"lineNumber":117,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":118,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":113,"KateKolokhina":5}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/common/AskGroupGradeHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group.common;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"public class AskGroupGradeHandler extends CommonRequestHandler {"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"    public AskGroupGradeHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildMenuWithCancel();"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"        return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(), GroupConstants.ASK_FOR_GROUP_GRADE, replyKeyboardMarkup), true);"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":27}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/common/AskGroupIDHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group.common;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"public class AskGroupIDHandler extends CommonRequestHandler {"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"    public AskGroupIDHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"        return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(), GroupConstants.ASK_FOR_GROUP_ID, keyboardHelper.buildMenuWithCancel()), true);"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":25}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/common/AskGroupNameHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group.common;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import java.util.Arrays;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"public class AskGroupNameHandler extends CommonRequestHandler {"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    public AskGroupNameHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"        return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(), GroupConstants.ASK_FOR_GROUP_NAME, keyboardHelper.buildMenuWithCancel()), true);"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":34}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/common/AskGroupYearHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group.common;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"public class AskGroupYearHandler extends CommonRequestHandler {"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"    public AskGroupYearHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"        return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(), GroupConstants.ASK_FOR_GROUP_YEAR, keyboardHelper.buildMenuWithCancel()), true);"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":26}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/common/GetGroupGradeHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group.common;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"public class GetGroupGradeHandler extends CommonRequestHandler {"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"    public GetGroupGradeHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildMenuWithCancel();"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"        String messageText \u003d dispatchRequest.getUpdate().getMessage().getText();"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"        try {"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"            UserSession userSession \u003d dispatchRequest.getUserSession();"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"            Group group \u003d (Group) userSession.getData().get(GroupConstants.GROUP_MAP_KEY);"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"            group.setGrade(Integer.parseInt(messageText));"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"            return new HandlerResponse(null, true);"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"        } catch (Exception e){"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"            //Do not make any changes. Grade text incorrect."},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"            return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(), String.format(GroupConstants.WRONG_GRADE, messageText), replyKeyboardMarkup), false);"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":41}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/common/GetGroupIDHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group.common;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"public class GetGroupIDHandler extends CommonRequestHandler {"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"        UserSession userSession \u003d dispatchRequest.getUserSession();"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"        Group group \u003d (Group) userSession.getData().get(GroupConstants.GROUP_MAP_KEY);"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"        group.setId(dispatchRequest.getUpdate().getMessage().getText());"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"        return new HandlerResponse(null, true);"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":24}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/common/GetGroupNameHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group.common;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import java.util.Arrays;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"public class GetGroupNameHandler extends CommonRequestHandler {"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"        UserSession userSession \u003d dispatchRequest.getUserSession();"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"        Group group \u003d (Group) userSession.getData().get(GroupConstants.GROUP_MAP_KEY);"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"        group.setName(dispatchRequest.getUpdate().getMessage().getText());"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"        return new HandlerResponse(null, true);"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":33}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/group/common/GetGroupYearHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.impl.group.common;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"public class GetGroupYearHandler extends CommonRequestHandler {"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    public GetGroupYearHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildMenuWithCancel();"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"        String messageText \u003d dispatchRequest.getUpdate().getMessage().getText();"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"        UserSession userSession \u003d dispatchRequest.getUserSession();"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"        Group group \u003d (Group) userSession.getData().get(GroupConstants.GROUP_MAP_KEY);"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"        try {"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"            group.setYear(Integer.parseInt(messageText));"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"            return new HandlerResponse(null, true);"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        } catch (Exception e) {"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"            //Do not make any changes. Year text incorrect."},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"            return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(), String.format(GroupConstants.WRONG_YEAR, messageText), replyKeyboardMarkup), false);"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":42}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/student/AskAllStudentsCSVButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.StudentConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import static edu.kmaooad.constants.bot.StudentConstants.STUDENT_CSV_FORMAT_EXAMPLE;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"@Component"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"public class AskAllStudentsCSVButtonHandler implements ButtonRequestHandler {"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"    private final TelegramService telegramService;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    public AskAllStudentsCSVButtonHandler(KeyboardHelper keyboardHelper, TelegramService telegramService, UserSessionService userSessionService, StudentButtonsHandler studentButtonsHandler) {"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"        return UserRequestHandler.isTextMessage(request.getUpdate(), StudentConstants.STUDENT_UPDATE_CSV_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"                request.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"        log.info(\"Asking for student CSV\");"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"        //Set previous state for studentButtonsHandler"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_STUDENT_CSV);"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildMenuWithCancel();"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"        return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(), STUDENT_CSV_FORMAT_EXAMPLE, replyKeyboardMarkup), true);"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":44}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/student/GetAllStudentsCSVButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.MassStudentsService;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ServiceCSVException;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import static edu.kmaooad.constants.bot.StudentConstants.STUDENT_CSV_FORMAT_EXAMPLE;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"@Component"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"public class GetAllStudentsCSVButtonHandler implements ButtonRequestHandler {"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"    private final StudentService studentService;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"    private final TelegramService telegramService;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    private final StudentButtonsHandler studentButtonsHandler;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"    private final MassStudentsService massStudentsService;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"    public GetAllStudentsCSVButtonHandler(StudentService studentService, MassStudentsService massStudentsService, TelegramService telegramService, KeyboardHelper keyboardHelper, StudentButtonsHandler studentButtonsHandler) {"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"        this.studentService \u003d studentService;"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"        this.massStudentsService \u003d massStudentsService;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"        this.studentButtonsHandler \u003d studentButtonsHandler;"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"        return request.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_STUDENT_CSV);"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"        log.info(\"Getting students CSV\");"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"        String message \u003d dispatchRequest.getUpdate().getMessage().getText();"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        try {"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"            studentService.replaceAllStudents(massStudentsService.parseStudentCSV(message));"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        } catch (ServiceCSVException e) {"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"            log.warn(\"Catched \" + e);"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"            dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_STUDENT_CSV);"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"            return notifyUserAboutError(dispatchRequest.getChatId(), e);"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        } catch (Exception e) {"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"            log.error(e.getMessage());"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"            dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_STUDENT_CSV);"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"            return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(),"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"                    \"Невідома помилка\", keyboardHelper.buildMenuWithCancel()), true);"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        return studentButtonsHandler.handle(dispatchRequest);"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"    public HandlerResponse notifyUserAboutError(Long chatId, ServiceCSVException e) {"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildStudentMenuWithCancel();"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"        switch (e.getErrorType()) {"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"            case EMAIL_DUPLICATE:"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"                telegramService.sendMessage(chatId, \"Дублікація імейлу \\n\" + e.getLine());"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"                return new HandlerResponse(telegramService.sendMessage(chatId, STUDENT_CSV_FORMAT_EXAMPLE, replyKeyboardMarkup), true);"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"            case ACTIVITY_DOESNT_EXIST:"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"                telegramService.sendMessage(chatId, \"Такої активності не існує \\n\" + e.getLine());"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"                return new HandlerResponse(telegramService.sendMessage(chatId, STUDENT_CSV_FORMAT_EXAMPLE, replyKeyboardMarkup), true);"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"            case NOT_ENOUGH_PARAMS_ON_LINE:"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"                telegramService.sendMessage(chatId, \"Не вистачає параметрів імейлу \\n\" + e.getLine());"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"                return new HandlerResponse(telegramService.sendMessage(chatId, STUDENT_CSV_FORMAT_EXAMPLE, replyKeyboardMarkup), true);"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"            default:"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"                telegramService.sendMessage(chatId, \"Невідома помилка на лінії \\n\" + e.getLine());"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        return new HandlerResponse(telegramService.sendMessage(chatId, STUDENT_CSV_FORMAT_EXAMPLE, replyKeyboardMarkup), true);"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":78}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/student/ShowAllStudentsButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.StudentConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import java.util.List;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"@Component"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"public class ShowAllStudentsButtonHandler implements ButtonRequestHandler {"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"    private final StudentService studentService;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"    private final TelegramService telegramService;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    private final StudentButtonsHandler studentButtonsHandler;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"    public ShowAllStudentsButtonHandler(StudentService studentService, TelegramService telegramService, UserSessionService userSessionService, StudentButtonsHandler studentButtonsHandler) {"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"        this.studentService \u003d studentService;"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"        this.studentButtonsHandler \u003d studentButtonsHandler;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"        return UserRequestHandler.isTextMessage(request.getUpdate(), StudentConstants.STUDENT_SHOW_ALL_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"                request.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cStudent\u003e students \u003d studentService.getAllStudents();"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"        log.info(\"Students: \" + students.toString());"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        for (Student student : students) {"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(),"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"                    String.format(StudentConstants.SHOW_FULL_STUDENT, student.getLastName(), student.getFirstName(), student.getPatronym(), student.getId(),"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"                            student.getEmail(), student.getDepartment(), student.getActivities().size()));"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        //Set previous state for studentButtonsHandler"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        return studentButtonsHandler.handle(dispatchRequest);"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":55}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/student/ShowAllStudentsCSVButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.StudentConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.MassStudentsService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import java.util.List;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"@Component"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"public class ShowAllStudentsCSVButtonHandler implements ButtonRequestHandler {"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"    private final StudentService studentService;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"    private final TelegramService telegramService;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"    private final StudentButtonsHandler studentButtonsHandler;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"    private final MassStudentsService massStudentsService;"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    public ShowAllStudentsCSVButtonHandler(StudentService studentService, MassStudentsService massStudentsService, TelegramService telegramService, UserSessionService userSessionService, StudentButtonsHandler studentButtonsHandler) {"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"        this.studentService \u003d studentService;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"        this.massStudentsService \u003d massStudentsService;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"        this.studentButtonsHandler \u003d studentButtonsHandler;"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"        return UserRequestHandler.isTextMessage(request.getUpdate(), StudentConstants.STUDENT_SHOW_CSV_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"                request.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cStudent\u003e students \u003d studentService.getAllStudents();"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        log.info(\"Students csv: \" + students.toString());"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        String message \u003d massStudentsService.generateStudentCSV(studentService.getAllStudents());"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"        telegramService.sendMessage(dispatchRequest.getChatId(), message);"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        //Set previous state for studentButtonsHandler"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        return studentButtonsHandler.handle(dispatchRequest);"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":53}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/student/StudentButtonsHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.impl.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"@Component"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"public class StudentButtonsHandler implements ButtonRequestHandler {"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"    private final TelegramService telegramService;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"    public StudentButtonsHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate(), GlobalConstants.STUDENTS_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"    public HandlerResponse handle(UserRequest userRequest) {"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildStudentMenuWithCancel();"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"        userRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"        return new HandlerResponse(telegramService.sendMessage(userRequest.getChatId(), \"Оберіть що хочете робити⤵️\", replyKeyboardMarkup), true);"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":37}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/button/AddTemplateButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.button;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.dialog.AddTemplateDialog;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"@Slf4j"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"public class AddTemplateButtonHandler implements ButtonRequestHandler {"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final AddTemplateDialog addTemplateDialog;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"    public AddTemplateButtonHandler(AddTemplateDialog addTemplateDialog) {"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.addTemplateDialog \u003d addTemplateDialog;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"    public boolean isApplicable(UserRequest userRequest) {"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"        return UserRequestHandler.isTextMessage(userRequest.getUpdate(), GroupTemplateConstants.GROUP_TEMPLATE_ADD_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"                userRequest.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.info(\"Add group dialog started\");"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"        return addTemplateDialog.startDialog(dispatchRequest);"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":34}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/button/DeleteTemplateButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.button;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.dialog.DeleteTemplateDialog;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"@Slf4j"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"public class DeleteTemplateButtonHandler implements ButtonRequestHandler {"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final DeleteTemplateDialog deleteTemplateDialog;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"    public DeleteTemplateButtonHandler(DeleteTemplateDialog deleteTemplateDialog) {"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.deleteTemplateDialog \u003d deleteTemplateDialog;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"        return UserRequestHandler.isTextMessage(request.getUpdate(), GroupTemplateConstants.GROUP_TEMPLATE_DELETE_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"                request.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.info(\"Delete group dialog started, chatId: \" + dispatchRequest.getChatId());"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"        return deleteTemplateDialog.startDialog(dispatchRequest);"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":33}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/button/ShowAllGroupTemplatesButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.button;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.GroupTemplate;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.List;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"@Slf4j"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"public class ShowAllGroupTemplatesButtonHandler implements ButtonRequestHandler {"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final GroupTemplateService templateService;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TemplateButtonsHandler templateButtonsHandler;"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"    public ShowAllGroupTemplatesButtonHandler(GroupTemplateService templateService, TelegramService telegramService,"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"                                              TemplateButtonsHandler templateButtonsHandler) {"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.templateService \u003d templateService;"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.templateButtonsHandler \u003d templateButtonsHandler;"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"        return UserRequestHandler.isTextMessage(request.getUpdate(), GroupTemplateConstants.GROUP_TEMPLATE_SHOW_ALL_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"                request.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"        List\u003cGroupTemplate\u003e templates \u003d templateService.getAllTemplates();"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.info(\"Templates: \" + templates.toString());"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"        for (GroupTemplate template : templates) {"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(),"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"                    String.format(GroupTemplateConstants.SHOW_GROUP_TEMPLATE,"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getName() \u003d\u003d null ? \"\" : template.getName(),"},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getGrade() \u003d\u003d null ? \"\" : template.getGrade(),"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getYear() \u003d\u003d null ? \"\" : template.getYear())"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":"            );"},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"        return templateButtonsHandler.handle(dispatchRequest);"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":55}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/button/TemplateButtonsHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.button;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"public class TemplateButtonsHandler implements ButtonRequestHandler {"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"    public TemplateButtonsHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"        return UserRequestHandler.isTextMessage(request.getUpdate(), GlobalConstants.GROUP_TEMPLATES_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"                request.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest request) {"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildGroupTemplateMenuWithCancel();"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"        request.getUserSession().setConversationState(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"        return new HandlerResponse(telegramService.sendMessage(request.getChatId(), \"Оберіть що хочете робити⤵️\", replyKeyboardMarkup), true);"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":37}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/button/UpdateTemplateButtonHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.button;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.ButtonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.UserRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.dialog.UpdateTemplateDialog;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"@Slf4j"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"public class UpdateTemplateButtonHandler implements ButtonRequestHandler {"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final UpdateTemplateDialog updateTemplateDialog;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"    public UpdateTemplateButtonHandler(UpdateTemplateDialog updateTemplateDialog) {"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.updateTemplateDialog \u003d updateTemplateDialog;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"        return UserRequestHandler.isTextMessage(request.getUpdate(), GroupTemplateConstants.GROUP_TEMPLATE_EDIT_BUTTON_LABEL) \u0026\u0026"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"                request.getUserSession().getConversationState().equals(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"        return updateTemplateDialog.startDialog(dispatchRequest);"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":32}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/common/AskTemplateGradeHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.common;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"public class AskTemplateGradeHandler extends CommonRequestHandler {"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"    public AskTemplateGradeHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"        return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(),"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"                message(), keyboardHelper.buildMenuWithCancel()), true);"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    private String message() {"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"        return GroupTemplateConstants.ASK_FOR_GROUP_TEMPLATE_GRADE + \"\\n\\n\""},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"                + GlobalConstants.SKIP_STEP;"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":32}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/common/AskTemplateIdHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.common;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"public class AskTemplateIdHandler extends CommonRequestHandler {"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"    public AskTemplateIdHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"        return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(),"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"                GroupTemplateConstants.ASK_FOR_GROUP_TEMPLATE_ID, keyboardHelper.buildMenuWithCancel()), true);"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":26}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/common/AskTemplateNameHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.common;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"public class AskTemplateNameHandler extends CommonRequestHandler {"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"    public AskTemplateNameHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"        return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(),"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"                message(), keyboardHelper.buildMenuWithCancel()), true);"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    private String message() {"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"        return GroupTemplateConstants.ASK_FOR_GROUP_TEMPLATE_NAME + \"\\n\\n\""},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"                + GlobalConstants.SKIP_STEP;"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":32}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/common/AskTemplateYearHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.common;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"public class AskTemplateYearHandler extends CommonRequestHandler {"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"    public AskTemplateYearHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"        return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(),"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"                message(), keyboardHelper.buildMenuWithCancel()), true);"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    private String message() {"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"        return GroupTemplateConstants.ASK_FOR_GROUP_TEMPLATE_YEAR + \"\\n\\n\""},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"                + GlobalConstants.SKIP_STEP;"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":32}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/common/GetTemplateGradeHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.common;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.*;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"public class GetTemplateGradeHandler extends CommonRequestHandler {"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"    public GetTemplateGradeHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildMenuWithCancel();"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"        String messageText \u003d dispatchRequest.getUpdate().getMessage().getText();"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"        try {"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"            UserSession userSession \u003d dispatchRequest.getUserSession();"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"            GroupTemplate template \u003d (GroupTemplate) userSession.getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY);"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"            if(!messageText.equals(\"-\")) {"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"                template.setGrade(Integer.parseInt(messageText));"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"            } else {"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"                template.setGrade(null);"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"            }"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"            return new HandlerResponse(null, true);"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"        } catch (Exception e) {"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"            e.printStackTrace();"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"            return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(), String.format(GroupTemplateConstants.WRONG_GRADE, messageText), replyKeyboardMarkup), false);"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":44}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/common/GetTemplateIdHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.common;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.GroupTemplate;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"public class GetTemplateIdHandler extends CommonRequestHandler {"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final GroupTemplateService groupTemplateService;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"    public GetTemplateIdHandler(GroupTemplateService groupTemplateService, TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.groupTemplateService \u003d groupTemplateService;"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"        UserSession userSession \u003d dispatchRequest.getUserSession();"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildMenuWithCancel();"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"        String messageText \u003d dispatchRequest.getUpdate().getMessage().getText();"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"        GroupTemplate template \u003d (GroupTemplate) userSession.getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY);"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"        String id \u003d dispatchRequest.getUpdate().getMessage().getText();"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"        try {"},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"            groupTemplateService.getTemplateById(id);"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"            template.setId(dispatchRequest.getUpdate().getMessage().getText());"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"            return new HandlerResponse(null, true);"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"        } catch (Exception e) {"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"            return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(), String.format(GroupTemplateConstants.CANNOT_GET_TEMPLATE, messageText), replyKeyboardMarkup), false);"},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":45}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/common/GetTemplateNameHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.common;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.*;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"public class GetTemplateNameHandler extends CommonRequestHandler {"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"        UserSession userSession \u003d dispatchRequest.getUserSession();"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"        GroupTemplate template \u003d (GroupTemplate) userSession.getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY);"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"        String messageText \u003d dispatchRequest.getUpdate().getMessage().getText();"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"        if(!messageText.equals(\"-\")) {"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"            template.setName(messageText);"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"        } else {"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"            template.setName(null);"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"        return new HandlerResponse(null, true);"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":25}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/common/GetTemplateYearHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.common;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.CommonRequestHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.*;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"public class GetTemplateYearHandler extends CommonRequestHandler {"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final KeyboardHelper keyboardHelper;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"    public GetTemplateYearHandler(TelegramService telegramService, KeyboardHelper keyboardHelper) {"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.keyboardHelper \u003d keyboardHelper;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"    public HandlerResponse handle(UserRequest dispatchRequest) {"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"        ReplyKeyboardMarkup replyKeyboardMarkup \u003d keyboardHelper.buildMenuWithCancel();"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"        String messageText \u003d dispatchRequest.getUpdate().getMessage().getText();"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"        UserSession userSession \u003d dispatchRequest.getUserSession();"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"        GroupTemplate template \u003d (GroupTemplate) userSession.getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY);"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"        try {"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"            if(!messageText.equals(\"-\")) {"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"                template.setYear(Integer.parseInt(messageText));"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"            } else {"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"                template.setYear(null);"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"            }"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"            return new HandlerResponse(null, true);"},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"        } catch (Exception e) {"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"            return new HandlerResponse(telegramService.sendMessage(dispatchRequest.getChatId(), String.format(GroupTemplateConstants.WRONG_YEAR, messageText), replyKeyboardMarkup), false);"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":42}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/dialog/AddTemplateDialog.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.dialog;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.DialogHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.TemplateButtonsHandler;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.*;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.GroupTemplate;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.LinkedHashMap;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"@Slf4j"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"public class AddTemplateDialog extends DialogHandler {"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final GroupTemplateService templateService;"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TemplateButtonsHandler templateButtonsHandler;"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    public AddTemplateDialog(UserSessionService userSessionService, GroupTemplateService templateService,"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"                             TelegramService telegramService, TemplateButtonsHandler templateButtonsHandler,"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"                             AskTemplateNameHandler askTemplateNameHandler, GetTemplateNameHandler getTemplateNameHandler,"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"                             AskTemplateGradeHandler askTemplateGradeHandler, GetTemplateGradeHandler getTemplateGradeHandler,"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"                             AskTemplateYearHandler askTemplateYearHandler, GetTemplateYearHandler getTemplateYearHandler) {"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.templateService \u003d templateService;"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.templateButtonsHandler \u003d templateButtonsHandler;"},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"        PostActions moveToNext \u003d (request, response) -\u003e {"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"            if (response.isSuccess()) {"},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"                return handle(request);"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"            }"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"            return response;"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":"        };"},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.ASK_FOR_TEMPLATE_NAME, new DialogSingleHandler(askTemplateNameHandler));"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.WAITING_FOR_TEMPLATE_NAME, new DialogSingleHandler(getTemplateNameHandler, moveToNext));"},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.ASK_FOR_TEMPLATE_GRADE, new DialogSingleHandler(askTemplateGradeHandler));"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.WAITING_FOR_TEMPLATE_GRADE, new DialogSingleHandler(getTemplateGradeHandler, moveToNext));"},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.ASK_FOR_TEMPLATE_YEAR, new DialogSingleHandler(askTemplateYearHandler));"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.WAITING_FOR_TEMPLATE_YEAR, new DialogSingleHandler(getTemplateYearHandler));"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":"    public final HandlerResponse startDialog(UserRequest userRequest) {"},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest.getUserSession().getData().put(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY, new GroupTemplate());"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSessionService.saveSession(userRequest.getChatId(), userRequest.getUserSession());"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.info(\"Some response: \" + userRequest.getUserSession().getData().keySet());"},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"        return super.startDialog(userRequest);"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":"    protected void finishActions(UserRequest dispatchRequest) {"},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.warn(\"AddTemplateDialog finish actions: \" + dispatchRequest"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"                .getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY));"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"        GroupTemplate template \u003d (GroupTemplate) dispatchRequest"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"                .getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY);"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":"        try {"},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"            templateService.addGroupTemplate(template);"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(), GroupTemplateConstants.TEMPLATE_SUCCESSFULLY_ADDED);"},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":"        } catch(ServiceException e) {"},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"            log.error(\"Cannot add template: \" + template);"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(), GroupTemplateConstants.CANNOT_CREATE_EMPTY_TEMPLATE);"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":82,"author":{"gitId":"Iryna Zubrytska"},"content":"        dispatchRequest.getUserSession().setDialogState(null);"},{"lineNumber":83,"author":{"gitId":"Iryna Zubrytska"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":84,"author":{"gitId":"Iryna Zubrytska"},"content":"        templateButtonsHandler.handle(dispatchRequest);"},{"lineNumber":85,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":87,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":88,"author":{"gitId":"Iryna Zubrytska"},"content":"    public DialogState getDialogType() {"},{"lineNumber":89,"author":{"gitId":"Iryna Zubrytska"},"content":"        return DialogState.ADD_GROUP_TEMPLATE;"},{"lineNumber":90,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":92,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":93,"author":{"gitId":"Iryna Zubrytska"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":94,"author":{"gitId":"Iryna Zubrytska"},"content":"        return request.getUserSession().getDialogState().equals(getDialogType());"},{"lineNumber":95,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":96}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/dialog/DeleteTemplateDialog.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.dialog;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.DialogHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.AskTemplateIdHandler;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.GetTemplateIdHandler;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.TemplateButtonsHandler;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.GroupTemplate;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.LinkedHashMap;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.List;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"@Slf4j"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"public class DeleteTemplateDialog extends DialogHandler {"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final GroupTemplateService templateService;"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TemplateButtonsHandler templateButtonsHandler;"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    public DeleteTemplateDialog(UserSessionService userSessionService, TelegramService telegramService,"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"                                GroupTemplateService templateService, TemplateButtonsHandler templateButtonsHandler,"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"                                AskTemplateIdHandler askTemplateIdHandler, GetTemplateIdHandler getTemplateIdHandler) {"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.templateService \u003d templateService;"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.templateButtonsHandler \u003d templateButtonsHandler;"},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.ASK_FOR_TEMPLATE_ID, new DialogSingleHandler(askTemplateIdHandler));"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.WAITING_FOR_TEMPLATE_ID, new DialogSingleHandler(getTemplateIdHandler));"},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":"    public final HandlerResponse startDialog(UserRequest userRequest) {"},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"        List\u003cGroupTemplate\u003e templates \u003d templateService.getAllTemplates();"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.info(\"Templates: \" + templates.toString());"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"        for (GroupTemplate template : templates) {"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"            telegramService.sendMessage(userRequest.getChatId(),"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":"                    String.format(GroupTemplateConstants.SHOW_GROUP_TEMPLATE_WITH_ID,"},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getName() \u003d\u003d null ? \"\" : template.getName(),"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getGrade() \u003d\u003d null ? \"\" : template.getGrade(),"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getYear() \u003d\u003d null ? \"\" : template.getYear(),"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getId())"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":"            );"},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest.getUserSession().getData().put(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY, new GroupTemplate());"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSessionService.saveSession(userRequest.getChatId(), userRequest.getUserSession());"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.info(\"Some response: \" + userRequest.getUserSession().getData().keySet());"},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"        return super.startDialog(userRequest);"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":"    protected void finishActions(UserRequest dispatchRequest) {"},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"        GroupTemplate template \u003d (GroupTemplate) dispatchRequest.getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY);"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"        try {"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"            templateService.deleteGroupTemplate(template.getId());"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(), GroupTemplateConstants.TEMPLATE_SUCCESSFULLY_DELETED);"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"        } catch(ServiceException e) {"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":"            log.error(\"Cannot delete template: \" + template);"},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(),GroupTemplateConstants.CANNOT_DELETE_TEMPLATE_NOT_EXISTS);"},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":"        dispatchRequest.getUserSession().setDialogState(null);"},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"        templateButtonsHandler.handle(dispatchRequest);"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":82,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":83,"author":{"gitId":"Iryna Zubrytska"},"content":"    public DialogState getDialogType() {"},{"lineNumber":84,"author":{"gitId":"Iryna Zubrytska"},"content":"        return DialogState.DELETE_GROUP_TEMPLATE;"},{"lineNumber":85,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":87,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":88,"author":{"gitId":"Iryna Zubrytska"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":89,"author":{"gitId":"Iryna Zubrytska"},"content":"        return request.getUserSession().getDialogState().equals(getDialogType());"},{"lineNumber":90,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":91}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handler/impl/template/dialog/UpdateTemplateDialog.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.impl.template.dialog;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.DialogHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.TemplateButtonsHandler;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.*;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.GroupTemplate;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.LinkedHashMap;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.List;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"@Component"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"@Slf4j"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"public class UpdateTemplateDialog extends DialogHandler {"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final GroupTemplateService templateService;"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TelegramService telegramService;"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    private final TemplateButtonsHandler templateButtonsHandler;"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    public UpdateTemplateDialog(UserSessionService userSessionService, GroupTemplateService templateService,"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"                                TelegramService telegramService, TemplateButtonsHandler templateButtonsHandler,"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"                                AskTemplateNameHandler askTemplateNameHandler, GetTemplateNameHandler getTemplateNameHandler,"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"                                AskTemplateGradeHandler askTemplateGradeHandler, GetTemplateGradeHandler getTemplateGradeHandler,"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"                                AskTemplateYearHandler askTemplateYearHandler, GetTemplateYearHandler getTemplateYearHandler,"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"                                AskTemplateIdHandler askTemplateIdHandler, GetTemplateIdHandler getTemplateIdHandler) {"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.templateService \u003d templateService;"},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"        this.templateButtonsHandler \u003d templateButtonsHandler;"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"        PostActions moveToNext \u003d (request, response) -\u003e {"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"            if (response.isSuccess()) {"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"                return handle(request);"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":"            }"},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"            return response;"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"        };"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.ASK_FOR_TEMPLATE_ID, new DialogSingleHandler(askTemplateIdHandler));"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.WAITING_FOR_TEMPLATE_ID, new DialogSingleHandler(getTemplateIdHandler, moveToNext));"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.ASK_FOR_TEMPLATE_NAME, new DialogSingleHandler(askTemplateNameHandler));"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.WAITING_FOR_TEMPLATE_NAME, new DialogSingleHandler(getTemplateNameHandler, moveToNext));"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.ASK_FOR_TEMPLATE_GRADE, new DialogSingleHandler(askTemplateGradeHandler));"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.WAITING_FOR_TEMPLATE_GRADE, new DialogSingleHandler(getTemplateGradeHandler, moveToNext));"},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.ASK_FOR_TEMPLATE_YEAR, new DialogSingleHandler(askTemplateYearHandler));"},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"        handlers.put(ConversationState.WAITING_FOR_TEMPLATE_YEAR, new DialogSingleHandler(getTemplateYearHandler));"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"    public final HandlerResponse startDialog(UserRequest userRequest) {"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"        List\u003cGroupTemplate\u003e templates \u003d templateService.getAllTemplates();"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.info(\"Templates: \" + templates.toString());"},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"        for (GroupTemplate template : templates) {"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"            telegramService.sendMessage(userRequest.getChatId(),"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"                    String.format(GroupTemplateConstants.SHOW_GROUP_TEMPLATE_WITH_ID,"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getName() \u003d\u003d null ? \"\" : template.getName(),"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getGrade() \u003d\u003d null ? \"\" : template.getGrade(),"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getYear() \u003d\u003d null ? \"\" : template.getYear(),"},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":"                            template.getId())"},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"            );"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest.getUserSession().getData().put(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY, new GroupTemplate());"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSessionService.saveSession(userRequest.getChatId(), userRequest.getUserSession());"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.info(\"Some response: \" + userRequest.getUserSession().getData().keySet());"},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":"        return super.startDialog(userRequest);"},{"lineNumber":82,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":84,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":85,"author":{"gitId":"Iryna Zubrytska"},"content":"    protected void finishActions(UserRequest dispatchRequest) {"},{"lineNumber":86,"author":{"gitId":"Iryna Zubrytska"},"content":"        log.warn(\"UpdateTemplateDialog finish actions: \" + dispatchRequest"},{"lineNumber":87,"author":{"gitId":"Iryna Zubrytska"},"content":"                .getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY));"},{"lineNumber":88,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":89,"author":{"gitId":"Iryna Zubrytska"},"content":"        GroupTemplate template \u003d (GroupTemplate) dispatchRequest"},{"lineNumber":90,"author":{"gitId":"Iryna Zubrytska"},"content":"                .getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY);"},{"lineNumber":91,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":92,"author":{"gitId":"Iryna Zubrytska"},"content":"        try {"},{"lineNumber":93,"author":{"gitId":"Iryna Zubrytska"},"content":"            templateService.updateGroupTemplate(template);"},{"lineNumber":94,"author":{"gitId":"Iryna Zubrytska"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(), GroupTemplateConstants.TEMPLATE_SUCCESSFULLY_UPDATED);"},{"lineNumber":95,"author":{"gitId":"Iryna Zubrytska"},"content":"        } catch(ServiceException e) {"},{"lineNumber":96,"author":{"gitId":"Iryna Zubrytska"},"content":"            log.error(\"Cannot update template: \" + template);"},{"lineNumber":97,"author":{"gitId":"Iryna Zubrytska"},"content":"            telegramService.sendMessage(dispatchRequest.getChatId(), GroupTemplateConstants.CANNOT_UPDATE_TEMPLATE_EXISTS);"},{"lineNumber":98,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":99,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":100,"author":{"gitId":"Iryna Zubrytska"},"content":"        dispatchRequest.getUserSession().setDialogState(null);"},{"lineNumber":101,"author":{"gitId":"Iryna Zubrytska"},"content":"        dispatchRequest.getUserSession().setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":102,"author":{"gitId":"Iryna Zubrytska"},"content":"        templateButtonsHandler.handle(dispatchRequest);"},{"lineNumber":103,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":105,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":106,"author":{"gitId":"Iryna Zubrytska"},"content":"    public DialogState getDialogType() {"},{"lineNumber":107,"author":{"gitId":"Iryna Zubrytska"},"content":"        return DialogState.UPDATE_GROUP_TEMPLATE;"},{"lineNumber":108,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":110,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Override"},{"lineNumber":111,"author":{"gitId":"Iryna Zubrytska"},"content":"    public boolean isApplicable(UserRequest request) {"},{"lineNumber":112,"author":{"gitId":"Iryna Zubrytska"},"content":"        return request.getUserSession().getDialogState().equals(getDialogType());"},{"lineNumber":113,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":114,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":114}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/helper/KeyboardHelper.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.helper;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.StudentConstants;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":7,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.KeyboardButton;"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.KeyboardRow;"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"import java.util.ArrayList;"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"import java.util.List;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import java.util.stream.Collectors;"},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":" * Helper class, allows to build keyboards for users"},{"lineNumber":18,"author":{"gitId":"KateKolokhina"},"content":" */"},{"lineNumber":19,"author":{"gitId":"KateKolokhina"},"content":"@Component"},{"lineNumber":20,"author":{"gitId":"KateKolokhina"},"content":"public class KeyboardHelper {"},{"lineNumber":21,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":22,"author":{"gitId":"KateKolokhina"},"content":"    public ReplyKeyboardMarkup buildAdditionalActions(List\u003cString\u003e actions) {"},{"lineNumber":23,"author":{"gitId":"KateKolokhina"},"content":"        List\u003cKeyboardButton\u003e buttons \u003d new ArrayList\u003c\u003e();"},{"lineNumber":24,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":25,"author":{"gitId":"KateKolokhina"},"content":"        for (String action : actions) {"},{"lineNumber":26,"author":{"gitId":"KateKolokhina"},"content":"            buttons.add(new KeyboardButton(action));"},{"lineNumber":27,"author":{"gitId":"KateKolokhina"},"content":"        }"},{"lineNumber":28,"author":{"gitId":"KateKolokhina"},"content":"        KeyboardRow row1 \u003d new KeyboardRow(buttons);"},{"lineNumber":29,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"        KeyboardRow row2 \u003d new KeyboardRow(List.of(new KeyboardButton(GlobalConstants.CANCEL_BUTTON_LABEL)));"},{"lineNumber":31,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":32,"author":{"gitId":"KateKolokhina"},"content":"        return ReplyKeyboardMarkup.builder()"},{"lineNumber":33,"author":{"gitId":"KateKolokhina"},"content":"                .keyboard(List.of(row1, row2))"},{"lineNumber":34,"author":{"gitId":"KateKolokhina"},"content":"                .selective(true)"},{"lineNumber":35,"author":{"gitId":"KateKolokhina"},"content":"                .resizeKeyboard(true)"},{"lineNumber":36,"author":{"gitId":"KateKolokhina"},"content":"                .oneTimeKeyboard(false)"},{"lineNumber":37,"author":{"gitId":"KateKolokhina"},"content":"                .build();"},{"lineNumber":38,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":40,"author":{"gitId":"KateKolokhina"},"content":"    public ReplyKeyboardMarkup buildMainMenu() {"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        KeyboardRow keyboardRow1 \u003d new KeyboardRow();"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"        keyboardRow1.add(GlobalConstants.GROUP_BUTTON_LABEL);"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"        keyboardRow1.add(GlobalConstants.GROUP_TEMPLATES_BUTTON_LABEL);"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"        KeyboardRow keyboardRow2 \u003d new KeyboardRow();"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        keyboardRow2.add(GlobalConstants.STUDENTS_BUTTON_LABEL);"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        keyboardRow2.add(GlobalConstants.ACTIVITIES_BUTTON_LABEL);"},{"lineNumber":48,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        KeyboardRow keyboardRow3 \u003d new KeyboardRow();"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        keyboardRow3.add(GlobalConstants.GROUP_SHOW_ALL_ASSIGN_LABEL);"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        keyboardRow3.add(GlobalConstants.STUDENT_SHOW_ALL_ASSIGN_LABEL);"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":53,"author":{"gitId":"KateKolokhina"},"content":"        return ReplyKeyboardMarkup.builder()"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"                .keyboard(List.of(keyboardRow1, keyboardRow2, keyboardRow3))"},{"lineNumber":55,"author":{"gitId":"KateKolokhina"},"content":"                .selective(true)"},{"lineNumber":56,"author":{"gitId":"KateKolokhina"},"content":"                .resizeKeyboard(true)"},{"lineNumber":57,"author":{"gitId":"KateKolokhina"},"content":"                .oneTimeKeyboard(false)"},{"lineNumber":58,"author":{"gitId":"KateKolokhina"},"content":"                .build();"},{"lineNumber":59,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":61,"author":{"gitId":"KateKolokhina"},"content":"    public ReplyKeyboardMarkup buildMenuWithCancel() {"},{"lineNumber":62,"author":{"gitId":"KateKolokhina"},"content":"        KeyboardRow keyboardRow \u003d new KeyboardRow();"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"        keyboardRow.add(GlobalConstants.CANCEL_BUTTON_LABEL);"},{"lineNumber":64,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":65,"author":{"gitId":"KateKolokhina"},"content":"        return ReplyKeyboardMarkup.builder()"},{"lineNumber":66,"author":{"gitId":"KateKolokhina"},"content":"                .keyboard(List.of(keyboardRow))"},{"lineNumber":67,"author":{"gitId":"KateKolokhina"},"content":"                .selective(true)"},{"lineNumber":68,"author":{"gitId":"KateKolokhina"},"content":"                .resizeKeyboard(true)"},{"lineNumber":69,"author":{"gitId":"KateKolokhina"},"content":"                .oneTimeKeyboard(false)"},{"lineNumber":70,"author":{"gitId":"KateKolokhina"},"content":"                .build();"},{"lineNumber":71,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    public ReplyKeyboardMarkup buildGroupMenuWithCancel() {"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"        KeyboardRow keyboardRow1 \u003d new KeyboardRow();"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":"        keyboardRow1.add(GroupConstants.GROUP_ADD_BUTTON_LABEL);"},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"        keyboardRow1.add(GroupConstants.GROUP_EDIT_BUTTON_LABEL);"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"        KeyboardRow keyboardRow2 \u003d new KeyboardRow();"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"        keyboardRow2.add(GroupConstants.GROUP_DELETE_BUTTON_LABEL);"},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":"        keyboardRow2.add(GroupConstants.GROUP_SHOW_ALL_BUTTON_LABEL);"},{"lineNumber":81,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":82,"author":{"gitId":"Mishok"},"content":"        KeyboardRow keyboardRow3 \u003d new KeyboardRow();"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        keyboardRow3.add(GlobalConstants.CANCEL_BUTTON_LABEL);"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":"        return ReplyKeyboardMarkup.builder()"},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"                .keyboard(List.of(keyboardRow1, keyboardRow2, keyboardRow3))"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"                .selective(true)"},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":"                .resizeKeyboard(true)"},{"lineNumber":89,"author":{"gitId":"BlackKyiv"},"content":"                .oneTimeKeyboard(false)"},{"lineNumber":90,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":91,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":93,"author":{"gitId":"BlackKyiv"},"content":"    public ReplyKeyboardMarkup buildStudentMenuWithCancel() {"},{"lineNumber":94,"author":{"gitId":"BlackKyiv"},"content":"        KeyboardRow keyboardRow1 \u003d new KeyboardRow();"},{"lineNumber":95,"author":{"gitId":"BlackKyiv"},"content":"        keyboardRow1.add(StudentConstants.STUDENT_SHOW_CSV_BUTTON_LABEL);"},{"lineNumber":96,"author":{"gitId":"BlackKyiv"},"content":"        keyboardRow1.add(StudentConstants.STUDENT_UPDATE_CSV_BUTTON_LABEL);"},{"lineNumber":97,"author":{"gitId":"BlackKyiv"},"content":"        KeyboardRow keyboardRow2 \u003d new KeyboardRow();"},{"lineNumber":98,"author":{"gitId":"BlackKyiv"},"content":"        keyboardRow2.add(StudentConstants.STUDENT_SHOW_ALL_BUTTON_LABEL);"},{"lineNumber":99,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":100,"author":{"gitId":"BlackKyiv"},"content":"        KeyboardRow keyboardRow3 \u003d new KeyboardRow();"},{"lineNumber":101,"author":{"gitId":"BlackKyiv"},"content":"        keyboardRow3.add(GlobalConstants.CANCEL_BUTTON_LABEL);"},{"lineNumber":102,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":103,"author":{"gitId":"Mishok"},"content":"        return ReplyKeyboardMarkup.builder()"},{"lineNumber":104,"author":{"gitId":"BlackKyiv"},"content":"                .keyboard(List.of(keyboardRow1, keyboardRow2, keyboardRow3))"},{"lineNumber":105,"author":{"gitId":"Mishok"},"content":"                .selective(true)"},{"lineNumber":106,"author":{"gitId":"Mishok"},"content":"                .resizeKeyboard(true)"},{"lineNumber":107,"author":{"gitId":"Mishok"},"content":"                .oneTimeKeyboard(false)"},{"lineNumber":108,"author":{"gitId":"Mishok"},"content":"                .build();"},{"lineNumber":109,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":111,"author":{"gitId":"Iryna Zubrytska"},"content":"    public ReplyKeyboardMarkup buildGroupTemplateMenuWithCancel(){"},{"lineNumber":112,"author":{"gitId":"Iryna Zubrytska"},"content":"        KeyboardRow keyboardRow1 \u003d new KeyboardRow();"},{"lineNumber":113,"author":{"gitId":"Iryna Zubrytska"},"content":"        keyboardRow1.add(GroupTemplateConstants.GROUP_TEMPLATE_ADD_BUTTON_LABEL);"},{"lineNumber":114,"author":{"gitId":"Iryna Zubrytska"},"content":"        keyboardRow1.add(GroupTemplateConstants.GROUP_TEMPLATE_EDIT_BUTTON_LABEL);"},{"lineNumber":115,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":116,"author":{"gitId":"Iryna Zubrytska"},"content":"        KeyboardRow keyboardRow2 \u003d new KeyboardRow();"},{"lineNumber":117,"author":{"gitId":"Iryna Zubrytska"},"content":"        keyboardRow2.add(GroupTemplateConstants.GROUP_TEMPLATE_DELETE_BUTTON_LABEL);"},{"lineNumber":118,"author":{"gitId":"Iryna Zubrytska"},"content":"        keyboardRow2.add(GroupTemplateConstants.GROUP_TEMPLATE_SHOW_ALL_BUTTON_LABEL);"},{"lineNumber":119,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":120,"author":{"gitId":"Iryna Zubrytska"},"content":"        KeyboardRow keyboardRow3 \u003d new KeyboardRow();"},{"lineNumber":121,"author":{"gitId":"Iryna Zubrytska"},"content":"        keyboardRow3.add(GlobalConstants.CANCEL_BUTTON_LABEL);"},{"lineNumber":122,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":123,"author":{"gitId":"Iryna Zubrytska"},"content":"        return ReplyKeyboardMarkup.builder()"},{"lineNumber":124,"author":{"gitId":"Iryna Zubrytska"},"content":"                .keyboard(List.of(keyboardRow1, keyboardRow2, keyboardRow3))"},{"lineNumber":125,"author":{"gitId":"Iryna Zubrytska"},"content":"                .selective(true)"},{"lineNumber":126,"author":{"gitId":"Iryna Zubrytska"},"content":"                .resizeKeyboard(true)"},{"lineNumber":127,"author":{"gitId":"Iryna Zubrytska"},"content":"                .oneTimeKeyboard(false)"},{"lineNumber":128,"author":{"gitId":"Iryna Zubrytska"},"content":"                .build();"},{"lineNumber":129,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":131,"author":{"gitId":"BlackKyiv"},"content":"    public ReplyKeyboardMarkup buildAdditionalActionsVertical(List\u003cString\u003e options) {"},{"lineNumber":132,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":133,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cKeyboardRow\u003e rows \u003d options.stream()"},{"lineNumber":134,"author":{"gitId":"BlackKyiv"},"content":"                .map(option -\u003e new KeyboardRow(List.of(new KeyboardButton(option))))"},{"lineNumber":135,"author":{"gitId":"BlackKyiv"},"content":"                .collect(Collectors.toList());"},{"lineNumber":136,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":137,"author":{"gitId":"BlackKyiv"},"content":"        KeyboardRow cancelRow \u003d new KeyboardRow();"},{"lineNumber":138,"author":{"gitId":"BlackKyiv"},"content":"        cancelRow.add(GlobalConstants.CANCEL_BUTTON_LABEL);"},{"lineNumber":139,"author":{"gitId":"BlackKyiv"},"content":"        rows.add(0, cancelRow);"},{"lineNumber":140,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":141,"author":{"gitId":"BlackKyiv"},"content":"        return ReplyKeyboardMarkup.builder()"},{"lineNumber":142,"author":{"gitId":"BlackKyiv"},"content":"                .keyboard(rows)"},{"lineNumber":143,"author":{"gitId":"BlackKyiv"},"content":"                .selective(true)"},{"lineNumber":144,"author":{"gitId":"BlackKyiv"},"content":"                .resizeKeyboard(true)"},{"lineNumber":145,"author":{"gitId":"BlackKyiv"},"content":"                .oneTimeKeyboard(false)"},{"lineNumber":146,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":147,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":148,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"Mishok":29,"BlackKyiv":45,"Iryna Zubrytska":21,"KateKolokhina":53}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/model/Activity.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.model;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import lombok.AllArgsConstructor;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import lombok.Data;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import lombok.NoArgsConstructor;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.annotation.Id;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.mongodb.core.mapping.Document;"},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"import java.time.LocalDate;"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":"@Data"},{"lineNumber":13,"author":{"gitId":"dgoptsii"},"content":"@NoArgsConstructor"},{"lineNumber":14,"author":{"gitId":"dgoptsii"},"content":"@AllArgsConstructor"},{"lineNumber":15,"author":{"gitId":"dgoptsii"},"content":"@Document(collection \u003d \"activity\")"},{"lineNumber":16,"author":{"gitId":"dgoptsii"},"content":"public class Activity {"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":"    @Id()"},{"lineNumber":18,"author":{"gitId":"dgoptsii"},"content":"    String id;"},{"lineNumber":19,"author":{"gitId":"dgoptsii"},"content":"    String name;"},{"lineNumber":20,"author":{"gitId":"KateKolokhina"},"content":"    LocalDate startDate;"},{"lineNumber":21,"author":{"gitId":"KateKolokhina"},"content":"    LocalDate endDate;"},{"lineNumber":22,"author":{"gitId":"dgoptsii"},"content":"    String status;"},{"lineNumber":23,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"dgoptsii":19,"KateKolokhina":4}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/model/Group.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.model;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import lombok.AllArgsConstructor;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import lombok.Data;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import lombok.NoArgsConstructor;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.annotation.Id;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.mongodb.core.mapping.Document;"},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":10,"author":{"gitId":"dgoptsii"},"content":"import java.util.ArrayList;"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":"import java.util.List;"},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":13,"author":{"gitId":"dgoptsii"},"content":"@Data"},{"lineNumber":14,"author":{"gitId":"dgoptsii"},"content":"@NoArgsConstructor"},{"lineNumber":15,"author":{"gitId":"dgoptsii"},"content":"@AllArgsConstructor"},{"lineNumber":16,"author":{"gitId":"dgoptsii"},"content":"@Document(collection \u003d \"group\")"},{"lineNumber":17,"author":{"gitId":"dgoptsii"},"content":"public class Group {"},{"lineNumber":18,"author":{"gitId":"dgoptsii"},"content":"    @Id"},{"lineNumber":19,"author":{"gitId":"dgoptsii"},"content":"    String id;"},{"lineNumber":20,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":21,"author":{"gitId":"dgoptsii"},"content":"    String name;"},{"lineNumber":22,"author":{"gitId":"dgoptsii"},"content":"    Integer grade;"},{"lineNumber":23,"author":{"gitId":"dgoptsii"},"content":"    Integer year;"},{"lineNumber":24,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":25,"author":{"gitId":"dgoptsii"},"content":"    List\u003cString\u003e activities \u003d new ArrayList\u003c\u003e();"},{"lineNumber":26,"author":{"gitId":"dgoptsii"},"content":"    List\u003cString\u003e studentIds \u003d new ArrayList\u003c\u003e();"},{"lineNumber":27,"author":{"gitId":"dgoptsii"},"content":"    // айді студентів"},{"lineNumber":28,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"dgoptsii":28}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/model/GroupTemplate.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.model;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import lombok.AllArgsConstructor;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import lombok.Data;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import lombok.NoArgsConstructor;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.annotation.Id;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.mongodb.core.mapping.Document;"},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":10,"author":{"gitId":"dgoptsii"},"content":"import java.util.ArrayList;"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":"import java.util.List;"},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":"import java.util.Optional;"},{"lineNumber":13,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":14,"author":{"gitId":"dgoptsii"},"content":"@Data"},{"lineNumber":15,"author":{"gitId":"dgoptsii"},"content":"@NoArgsConstructor"},{"lineNumber":16,"author":{"gitId":"dgoptsii"},"content":"@AllArgsConstructor"},{"lineNumber":17,"author":{"gitId":"dgoptsii"},"content":"@Document(collection \u003d \"group_template\")"},{"lineNumber":18,"author":{"gitId":"dgoptsii"},"content":"public class GroupTemplate {"},{"lineNumber":19,"author":{"gitId":"dgoptsii"},"content":"    @Id"},{"lineNumber":20,"author":{"gitId":"dgoptsii"},"content":"    String id;"},{"lineNumber":21,"author":{"gitId":"KateKolokhina"},"content":"    String name;"},{"lineNumber":22,"author":{"gitId":"dgoptsii"},"content":"    Integer grade;"},{"lineNumber":23,"author":{"gitId":"dgoptsii"},"content":"    Integer year;"},{"lineNumber":24,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"dgoptsii":23,"KateKolokhina":1}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/model/HandlerResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.model;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import lombok.AllArgsConstructor;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import lombok.Builder;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import lombok.Data;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"@Data"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"@AllArgsConstructor"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"public class HandlerResponse {"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"    private BotApiMethod\u003c?\u003e result;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"    private boolean success;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":13}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/model/Student.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.model;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":"import lombok.AllArgsConstructor;"},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import lombok.Data;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import lombok.NoArgsConstructor;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.annotation.Id;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.mongodb.core.mapping.Document;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":"import java.util.ArrayList;"},{"lineNumber":10,"author":{"gitId":"dgoptsii"},"content":"import java.util.List;"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":"@Data"},{"lineNumber":13,"author":{"gitId":"dgoptsii"},"content":"@NoArgsConstructor"},{"lineNumber":14,"author":{"gitId":"dgoptsii"},"content":"@AllArgsConstructor"},{"lineNumber":15,"author":{"gitId":"dgoptsii"},"content":"@Document(collection \u003d \"student\")"},{"lineNumber":16,"author":{"gitId":"dgoptsii"},"content":"public class Student {"},{"lineNumber":17,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":18,"author":{"gitId":"dgoptsii"},"content":"    @Id"},{"lineNumber":19,"author":{"gitId":"dgoptsii"},"content":"    String id;"},{"lineNumber":20,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":21,"author":{"gitId":"dgoptsii"},"content":"    String firstName;"},{"lineNumber":22,"author":{"gitId":"dgoptsii"},"content":"    String lastName;"},{"lineNumber":23,"author":{"gitId":"dgoptsii"},"content":"    String patronym;"},{"lineNumber":24,"author":{"gitId":"dgoptsii"},"content":"    String department;"},{"lineNumber":25,"author":{"gitId":"dgoptsii"},"content":"    String email;"},{"lineNumber":26,"author":{"gitId":"dgoptsii"},"content":"    List\u003cString\u003e activities \u003d new ArrayList\u003c\u003e();"},{"lineNumber":27,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"dgoptsii":27}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/model/UserRequest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.model;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"import lombok.Builder;"},{"lineNumber":4,"author":{"gitId":"KateKolokhina"},"content":"import lombok.Data;"},{"lineNumber":5,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":6,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":7,"author":{"gitId":"KateKolokhina"},"content":"@Data"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":"@Builder"},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"public class UserRequest {"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"    private Update update;"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"    private Long chatId;"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"    private UserSession userSession;"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"KateKolokhina":13}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/model/UserSession.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.model;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import lombok.*;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import java.util.HashMap;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import java.util.Map;"},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"@Data"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"@Builder"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"public class UserSession {"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"    private Long chatId;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"    private ConversationState conversationState;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"    private DialogState dialogState;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"    /**"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"     * All data that moves through the dialog stores here"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"     */"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"    @Setter(AccessLevel.NONE)"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    private Map\u003cString, Object\u003e data;"},{"lineNumber":22,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"Mishok":13,"KateKolokhina":9}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/repositories/ActivityRepository.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.repositories;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.mongodb.repository.MongoRepository;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import java.util.Optional;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":"public interface ActivityRepository extends MongoRepository\u003cActivity, String\u003e {"},{"lineNumber":10,"author":{"gitId":"dgoptsii"},"content":"    Optional\u003cActivity\u003e findByName(String name);"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"dgoptsii":11}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/repositories/GroupRepository.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.repositories;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.mongodb.repository.MongoRepository;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import java.util.Optional;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"public interface GroupRepository extends MongoRepository\u003cGroup, String\u003e {"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"    Optional\u003cGroup\u003e findByName(String name);"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"dgoptsii":9,"BlackKyiv":2}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/repositories/GroupTemplateRepository.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.repositories;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.GroupTemplate;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.mongodb.repository.MongoRepository;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"public interface GroupTemplateRepository extends MongoRepository\u003cGroupTemplate, String\u003e {"},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":"    GroupTemplate findByName(String name);"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"    GroupTemplate findByYear(Integer year);"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"    GroupTemplate findByGrade(Integer grade);"},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":"    GroupTemplate findByNameAndYearAndGrade(String name, Integer year, Integer grade);"},{"lineNumber":16,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"Mishok":2,"dgoptsii":10,"KateKolokhina":4}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/repositories/StudentRepository.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.repositories;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.data.mongodb.repository.MongoRepository;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import java.util.Optional;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":"public interface StudentRepository extends MongoRepository\u003cStudent, String\u003e {"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"    Optional\u003cStudent\u003e findByEmail(String email);"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":"    Optional\u003cStudent\u003e findById(String id);"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"    List\u003cStudent\u003e findByEmailIn(List\u003cString\u003e emails);"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"    List\u003cStudent\u003e findByEmailIsNotIn(List\u003cString\u003e emails);"},{"lineNumber":16,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"Mishok":1,"dgoptsii":10,"BlackKyiv":5}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/scheduleTask/SchedulerConfig.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.scheduleTask;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":4,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":5,"author":{"gitId":"KateKolokhina"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":6,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":7,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.context.annotation.Configuration;"},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.scheduling.annotation.EnableScheduling;"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.scheduling.annotation.Scheduled;"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"@Configuration"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"@EnableScheduling"},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":"@ConditionalOnProperty(name \u003d \"scheduler.enabled\", matchIfMissing \u003d true)"},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":"@Slf4j"},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":" * Auto-update activities based on schedule"},{"lineNumber":18,"author":{"gitId":"KateKolokhina"},"content":" * (i.e. when activity start date passes, mark it as ‘in progress’ for the group,"},{"lineNumber":19,"author":{"gitId":"KateKolokhina"},"content":" * when activity end date passes, mark it as completed by the group)"},{"lineNumber":20,"author":{"gitId":"KateKolokhina"},"content":" */"},{"lineNumber":21,"author":{"gitId":"KateKolokhina"},"content":"public class SchedulerConfig {"},{"lineNumber":22,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":23,"author":{"gitId":"KateKolokhina"},"content":"    @Autowired"},{"lineNumber":24,"author":{"gitId":"KateKolokhina"},"content":"    private ActivityService activityService;"},{"lineNumber":25,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":26,"author":{"gitId":"KateKolokhina"},"content":"    // job to auto-update statuses for activities each 12 hours"},{"lineNumber":27,"author":{"gitId":"KateKolokhina"},"content":"    @Scheduled(fixedDelay \u003d 43200000)"},{"lineNumber":28,"author":{"gitId":"KateKolokhina"},"content":"    public void updateStatuses() throws ServiceException {"},{"lineNumber":29,"author":{"gitId":"KateKolokhina"},"content":"        activityService.updateStatuses();"},{"lineNumber":30,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"KateKolokhina":31}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/service/ActivityService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.service;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.repositories.ActivityRepository;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Service;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"import java.time.LocalDate;"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"import java.time.ZoneId;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import java.util.List;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import java.util.Optional;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import java.util.stream.Collectors;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import static edu.kmaooad.constants.bot.GlobalConstants.*;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"@Service"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"public class ActivityService {"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"    @Autowired"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"    private ActivityRepository activityRepository;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"    @Autowired"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"    private GroupService groupService;"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    @Autowired"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    private EmailService emailService;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"    private final String splitter \u003d \" || \";"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    public List\u003cActivity\u003e getAllActivities() {"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"        return activityRepository.findAll();"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    /**"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"     * @param id id of the group."},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"     * @return group with passed id, null - if not found."},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    public Activity getActivityById(String id) {"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"        Optional\u003cActivity\u003e activity \u003d activityRepository.findById(id);"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"        if (activity.isPresent()) {"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"            return activity.get();"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        } else {"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"            log.warn(\"Activity not found, id: \" + id);"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"            return null;"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"    public boolean existById(String id) {"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        return activityRepository.existsById(id);"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"    public List\u003cString\u003e getStatusOfActivitiesForGroup(Group group) {"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cActivity\u003e allActivities \u003d activityRepository.findAll();"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        return allActivities.stream()"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"                .map(activity -\u003e {"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"                    if (group.getActivities().contains(activity.getId())) {"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"                        return activity.getName() + \" \" + ASSIGNED;"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"                    } else return activity.getName();"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"                })"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"                .collect(Collectors.toList());"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"    public List\u003cString\u003e getStatusOfActivitiesForStudent(Student student) {"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cActivity\u003e allActivities \u003d activityRepository.findAll();"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        return allActivities.stream()"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"                .map(activity -\u003e {"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"                    if (student.getActivities().contains(activity.getId())) {"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"                        return activity.getName() + \" \" + ASSIGNED;"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"                    } else return activity.getName();"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"                })"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"                .collect(Collectors.toList());"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"    public Activity getActivityByName(String name) {"},{"lineNumber":79,"author":{"gitId":"KateKolokhina"},"content":"        Optional\u003cActivity\u003e activity \u003d activityRepository.findByName(name);"},{"lineNumber":80,"author":{"gitId":"KateKolokhina"},"content":"        if (activity.isPresent()) {"},{"lineNumber":81,"author":{"gitId":"KateKolokhina"},"content":"            return activity.get();"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"        } else {"},{"lineNumber":83,"author":{"gitId":"KateKolokhina"},"content":"            log.warn(\"Activity not found, name: \" + name);"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"            return null;"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":"    public List\u003cActivity\u003e updateActivities(List\u003cActivity\u003e activityList) throws ServiceException {"},{"lineNumber":89,"author":{"gitId":"BlackKyiv"},"content":"        for (Activity a : activityList) {"},{"lineNumber":90,"author":{"gitId":"BlackKyiv"},"content":"            Optional\u003cActivity\u003e activity \u003d activityRepository.findById(a.getId());"},{"lineNumber":91,"author":{"gitId":"BlackKyiv"},"content":"            if (activity.isPresent()) {"},{"lineNumber":92,"author":{"gitId":"BlackKyiv"},"content":"                Activity activityFound \u003d activity.get();"},{"lineNumber":93,"author":{"gitId":"BlackKyiv"},"content":"                activityFound.setName(a.getName());"},{"lineNumber":94,"author":{"gitId":"BlackKyiv"},"content":"                activityFound.setStatus(a.getStatus());"},{"lineNumber":95,"author":{"gitId":"BlackKyiv"},"content":"                activityFound.setStartDate(a.getStartDate());"},{"lineNumber":96,"author":{"gitId":"BlackKyiv"},"content":"                activityFound.setEndDate(a.getEndDate());"},{"lineNumber":97,"author":{"gitId":"BlackKyiv"},"content":"                activityRepository.save(activityFound);"},{"lineNumber":98,"author":{"gitId":"BlackKyiv"},"content":"            } else {"},{"lineNumber":99,"author":{"gitId":"dgoptsii"},"content":"                throw new ServiceException(\"Failed to update activity: \" + activity + \" activity with such id does not exists in database\");"},{"lineNumber":100,"author":{"gitId":"BlackKyiv"},"content":"            }"},{"lineNumber":101,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":102,"author":{"gitId":"BlackKyiv"},"content":"        return activityList;"},{"lineNumber":103,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":105,"author":{"gitId":"KateKolokhina"},"content":"    public List\u003cActivity\u003e updateActivitiesSetStatus(List\u003cActivity\u003e activityList, String status) throws ServiceException {"},{"lineNumber":106,"author":{"gitId":"KateKolokhina"},"content":"        for (Activity a : activityList) {"},{"lineNumber":107,"author":{"gitId":"KateKolokhina"},"content":"            Optional\u003cActivity\u003e activity \u003d activityRepository.findById(a.getId());"},{"lineNumber":108,"author":{"gitId":"KateKolokhina"},"content":"            if (activity.isPresent()) {"},{"lineNumber":109,"author":{"gitId":"KateKolokhina"},"content":"                Activity activityFound \u003d activity.get();"},{"lineNumber":110,"author":{"gitId":"KateKolokhina"},"content":"                activityFound.setName(a.getName());"},{"lineNumber":111,"author":{"gitId":"KateKolokhina"},"content":"                activityFound.setStatus(status);"},{"lineNumber":112,"author":{"gitId":"KateKolokhina"},"content":"                activityFound.setStartDate(a.getStartDate());"},{"lineNumber":113,"author":{"gitId":"KateKolokhina"},"content":"                activityFound.setEndDate(a.getEndDate());"},{"lineNumber":114,"author":{"gitId":"KateKolokhina"},"content":"                activityRepository.save(activityFound);"},{"lineNumber":115,"author":{"gitId":"KateKolokhina"},"content":"            } else {"},{"lineNumber":116,"author":{"gitId":"KateKolokhina"},"content":"                throw new ServiceException(\"Failed to update activity: \" + activity +"},{"lineNumber":117,"author":{"gitId":"KateKolokhina"},"content":"                        \" activity with such id does not exists in database\");"},{"lineNumber":118,"author":{"gitId":"KateKolokhina"},"content":"            }"},{"lineNumber":119,"author":{"gitId":"KateKolokhina"},"content":"        }"},{"lineNumber":120,"author":{"gitId":"KateKolokhina"},"content":"        return activityList;"},{"lineNumber":121,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":123,"author":{"gitId":"BlackKyiv"},"content":"    public Activity addActivity(Activity activity) throws ServiceException {"},{"lineNumber":124,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":125,"author":{"gitId":"BlackKyiv"},"content":"        Optional\u003cActivity\u003e found \u003d activityRepository.findByName(activity.getName());"},{"lineNumber":126,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":127,"author":{"gitId":"BlackKyiv"},"content":"        if (found.isPresent()) {"},{"lineNumber":128,"author":{"gitId":"dgoptsii"},"content":"            throw new ServiceException(\"Failed to add activity: \" + activity + \" activity with such values exists in database\");"},{"lineNumber":129,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":130,"author":{"gitId":"BlackKyiv"},"content":"        } else {"},{"lineNumber":131,"author":{"gitId":"BlackKyiv"},"content":"            activityRepository.save(activity);"},{"lineNumber":132,"author":{"gitId":"BlackKyiv"},"content":"            return activity;"},{"lineNumber":133,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":134,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":136,"author":{"gitId":"KateKolokhina"},"content":"    public void updateStatuses() throws ServiceException {"},{"lineNumber":137,"author":{"gitId":"KateKolokhina"},"content":"        LocalDate localDate \u003d LocalDate.now(ZoneId.systemDefault());"},{"lineNumber":138,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":139,"author":{"gitId":"KateKolokhina"},"content":"        List\u003cActivity\u003e activities \u003d getAllActivities().stream().filter(c -\u003e"},{"lineNumber":140,"author":{"gitId":"KateKolokhina"},"content":"                c.getStartDate() !\u003d null || c.getEndDate() !\u003d null ||"},{"lineNumber":141,"author":{"gitId":"KateKolokhina"},"content":"                        (c.getStatus() !\u003d null \u0026\u0026 !c.getStatus().equals(ACTIVITY_STATUS_COMPLETED))"},{"lineNumber":142,"author":{"gitId":"KateKolokhina"},"content":"        ).collect(Collectors.toList());"},{"lineNumber":143,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":144,"author":{"gitId":"KateKolokhina"},"content":"        log.warn(\"BEFORE JOB:\" + getAllActivities().toString());"},{"lineNumber":145,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":146,"author":{"gitId":"KateKolokhina"},"content":"        List\u003cActivity\u003e completed \u003d activities.stream().filter(c -\u003e"},{"lineNumber":147,"author":{"gitId":"KateKolokhina"},"content":"                (c.getStatus() \u003d\u003d null || c.getStatus().equals(ACTIVITY_STATUS_IN_PROGRESS))"},{"lineNumber":148,"author":{"gitId":"KateKolokhina"},"content":"                        \u0026\u0026 c.getStartDate().isBefore(localDate) \u0026\u0026 localDate.isAfter(c.getEndDate()))"},{"lineNumber":149,"author":{"gitId":"KateKolokhina"},"content":"                .collect(Collectors.toList());"},{"lineNumber":150,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":151,"author":{"gitId":"KateKolokhina"},"content":"        activities.removeAll(completed);"},{"lineNumber":152,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":153,"author":{"gitId":"KateKolokhina"},"content":"        List\u003cActivity\u003e isProgress \u003d activities.stream().filter(c -\u003e c.getStatus() \u003d\u003d null \u0026\u0026"},{"lineNumber":154,"author":{"gitId":"KateKolokhina"},"content":"                c.getStartDate().isBefore(localDate)"},{"lineNumber":155,"author":{"gitId":"KateKolokhina"},"content":"                \u0026\u0026 localDate.isBefore(c.getEndDate()))"},{"lineNumber":156,"author":{"gitId":"KateKolokhina"},"content":"                .collect(Collectors.toList());"},{"lineNumber":157,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":158,"author":{"gitId":"KateKolokhina"},"content":"        updateActivitiesSetStatus(completed, ACTIVITY_STATUS_COMPLETED);"},{"lineNumber":159,"author":{"gitId":"KateKolokhina"},"content":"        updateActivitiesSetStatus(isProgress, ACTIVITY_STATUS_IN_PROGRESS);"},{"lineNumber":160,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":161,"author":{"gitId":"KateKolokhina"},"content":"        log.warn(\"AFTER JOB :\" + getAllActivities().toString());"},{"lineNumber":162,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":164,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"dgoptsii":2,"BlackKyiv":111,"KateKolokhina":51}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/service/EmailService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.service;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.mail.MailSendException;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.mail.javamail.JavaMailSender;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.mail.javamail.MimeMessageHelper;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.stereotype.Service;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import javax.mail.MessagingException;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import javax.mail.SendFailedException;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import javax.mail.internet.MimeMessage;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"@Service"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"public class EmailService {"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"    @Autowired"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"    private JavaMailSender mailSender;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"    private void sendEmail(String email, String subject, String body) {"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"        try {"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"            MimeMessage msg \u003d mailSender.createMimeMessage();"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"            MimeMessageHelper helper \u003d new MimeMessageHelper(msg, true);"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"            helper.setTo(email);"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"            helper.setSubject(subject);"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"            helper.setText(body, true);"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"            mailSender.send(msg);"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"        } catch (MessagingException | MailSendException | NullPointerException e) {"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"            e.printStackTrace();"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    public void notifyAboutCreationStudent(Student student) {"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"        sendEmail(student.getEmail(), \"OpossumNotify. Вас було зареєстровано в наш бот\","},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"                \"\u003ch2\u003e\" + student.getLastName() + \" \" + student.getFirstName() + \" \" + student.getPatronym() + \", \u003c/h2\u003e \\n\" +"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"                        \"\u003ch3\u003e Вас було зареєстровано в наш бот як Студента \" + student.getDepartment() + \"\u003c/h3\u003e\""},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"        );"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    public void notifyAboutAddedActivity(Student student, Activity activity){"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        sendEmail(student.getEmail(), \"OpossumNotify. Вам було додано активність \" + activity.getName(),"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"                \"\u003ch2\u003e\" + student.getLastName() + \" \" + student.getFirstName() + \" \" + student.getPatronym() + \"\u003c/h2\u003e, \\n\" +"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"                        \"\u003ch3\u003eВам було додано активність \" + activity.getName() + \"\u003c/h3\u003e \\n \"+"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"                        \"\u003cb\u003e Дата початку: \" + activity.getStartDate() + \"\u003c/b\u003e\\n \"+"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"                        \"\u003cb\u003e Дата кінця: \" + activity.getEndDate() + \"\u003c/b\u003e\\n \"+"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"                        \"\u003cb\u003e Статус: \" + activity.getStatus() + \"\u003c/b\u003e\\n \""},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        );"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":53}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/service/GroupService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.service;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.repositories.GroupRepository;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.stereotype.Service;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":"import java.util.List;"},{"lineNumber":10,"author":{"gitId":"dgoptsii"},"content":"import java.util.Optional;"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":"@Service"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":14,"author":{"gitId":"dgoptsii"},"content":"public class GroupService {"},{"lineNumber":15,"author":{"gitId":"dgoptsii"},"content":"    @Autowired"},{"lineNumber":16,"author":{"gitId":"dgoptsii"},"content":"    private GroupRepository groupRepository;"},{"lineNumber":17,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"    //Get all groups from db"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    public List\u003cGroup\u003e getAllGroups() {"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"        return groupRepository.findAll();"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    /**"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"     * @param id id of the group."},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"     * @return group with passed id, null - if not found."},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"     */"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    public Group getGroupById(String id) {"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"        Optional\u003cGroup\u003e group \u003d groupRepository.findById(id);"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"        if (group.isPresent()) {"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"            return group.get();"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"        } else {"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"            log.warn(\"Group not found, id: \" + id);"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"            return null;"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    public Group getGroupByName(String name) {"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"        Optional\u003cGroup\u003e group \u003d groupRepository.findByName(name);"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"        if (group.isPresent()) {"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"            return group.get();"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"        } else {"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"            log.warn(\"Group not found, name: \" + name);"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"            return null;"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":47,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":48,"author":{"gitId":"dgoptsii"},"content":"     * @param group - group to add"},{"lineNumber":49,"author":{"gitId":"dgoptsii"},"content":"     * @return group added, if already exists in database - throws exception"},{"lineNumber":50,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":51,"author":{"gitId":"dgoptsii"},"content":"    public Group addGroup(Group group) throws ServiceException {"},{"lineNumber":52,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        Optional\u003cGroup\u003e found \u003d groupRepository.findByName(group.getName());"},{"lineNumber":54,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        if (found.isPresent()) {"},{"lineNumber":56,"author":{"gitId":"dgoptsii"},"content":"            throw new ServiceException(\"Failed to add group: \" + group + \" group with such values exists in database\");"},{"lineNumber":57,"author":{"gitId":"dgoptsii"},"content":"        } else {"},{"lineNumber":58,"author":{"gitId":"dgoptsii"},"content":"            groupRepository.save(group);"},{"lineNumber":59,"author":{"gitId":"dgoptsii"},"content":"            return group;"},{"lineNumber":60,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":61,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":63,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":64,"author":{"gitId":"dgoptsii"},"content":"     * @param groupUpdate - group to update"},{"lineNumber":65,"author":{"gitId":"dgoptsii"},"content":"     * @return group updated, if not found - throws exception"},{"lineNumber":66,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":67,"author":{"gitId":"dgoptsii"},"content":"    public Group updateGroup(Group groupUpdate) throws ServiceException {"},{"lineNumber":68,"author":{"gitId":"dgoptsii"},"content":"        Optional\u003cGroup\u003e group \u003d groupRepository.findById(groupUpdate.getId());"},{"lineNumber":69,"author":{"gitId":"dgoptsii"},"content":"        if (group.isPresent()) {"},{"lineNumber":70,"author":{"gitId":"dgoptsii"},"content":"            Group groupFound \u003d group.get();"},{"lineNumber":71,"author":{"gitId":"dgoptsii"},"content":"            groupFound.setName(groupUpdate.getName());"},{"lineNumber":72,"author":{"gitId":"dgoptsii"},"content":"            groupFound.setGrade(groupUpdate.getGrade());"},{"lineNumber":73,"author":{"gitId":"dgoptsii"},"content":"            groupFound.setYear(groupUpdate.getYear());"},{"lineNumber":74,"author":{"gitId":"dgoptsii"},"content":"            groupRepository.save(groupFound);"},{"lineNumber":75,"author":{"gitId":"dgoptsii"},"content":"            return groupUpdate;"},{"lineNumber":76,"author":{"gitId":"dgoptsii"},"content":"        } else {"},{"lineNumber":77,"author":{"gitId":"dgoptsii"},"content":"            throw new ServiceException(\"Failed to update group: \" + group + \" group with such id does not exists in database\");"},{"lineNumber":78,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":79,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":81,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":82,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":83,"author":{"gitId":"dgoptsii"},"content":"     * @param groupId - group to add"},{"lineNumber":84,"author":{"gitId":"dgoptsii"},"content":"     * @return group deleted, if not found - throws exception"},{"lineNumber":85,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":86,"author":{"gitId":"dgoptsii"},"content":"    public Group deleteGroup(String groupId) throws ServiceException {"},{"lineNumber":87,"author":{"gitId":"dgoptsii"},"content":"        Optional\u003cGroup\u003e group \u003d groupRepository.findById(groupId);"},{"lineNumber":88,"author":{"gitId":"dgoptsii"},"content":"        if (group.isPresent()) {"},{"lineNumber":89,"author":{"gitId":"dgoptsii"},"content":"            Group groupFound \u003d group.get();"},{"lineNumber":90,"author":{"gitId":"dgoptsii"},"content":"            groupRepository.delete(groupFound);"},{"lineNumber":91,"author":{"gitId":"dgoptsii"},"content":"            return groupFound;"},{"lineNumber":92,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":93,"author":{"gitId":"dgoptsii"},"content":"        throw new ServiceException(\"Failed to delete group with id: \" + groupId + \" group with such id does not exists in database\");"},{"lineNumber":94,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":95,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":97,"author":{"gitId":"dgoptsii"},"content":"    // TODO: 11/18/2022 ??? чи вона взагалі потрібна"},{"lineNumber":98,"author":{"gitId":"dgoptsii"},"content":"    // аналогічно до актівіті"},{"lineNumber":99,"author":{"gitId":"dgoptsii"},"content":"    // нема перевірки чи такий студент є в бд !!!!"},{"lineNumber":100,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":101,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":102,"author":{"gitId":"dgoptsii"},"content":"     * @param studentId - student id to add"},{"lineNumber":103,"author":{"gitId":"dgoptsii"},"content":"     * @param groupId   - group id to add to"},{"lineNumber":104,"author":{"gitId":"dgoptsii"},"content":"     * @return student id added, if group not found or student exists in this group - throws exception"},{"lineNumber":105,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":106,"author":{"gitId":"dgoptsii"},"content":"    public String addStudentGroup(String studentId, String groupId) throws ServiceException {"},{"lineNumber":107,"author":{"gitId":"dgoptsii"},"content":"        Optional\u003cGroup\u003e group \u003d groupRepository.findById(groupId);"},{"lineNumber":108,"author":{"gitId":"dgoptsii"},"content":"        if (group.isPresent()) {"},{"lineNumber":109,"author":{"gitId":"dgoptsii"},"content":"            Group groupPresent \u003d group.get();"},{"lineNumber":110,"author":{"gitId":"dgoptsii"},"content":"            List\u003cString\u003e students \u003d groupPresent.getStudentIds();"},{"lineNumber":111,"author":{"gitId":"dgoptsii"},"content":"            String studentFound \u003d null;"},{"lineNumber":112,"author":{"gitId":"dgoptsii"},"content":"            for (String a : students) {"},{"lineNumber":113,"author":{"gitId":"dgoptsii"},"content":"                if (a.equals(studentId)) {"},{"lineNumber":114,"author":{"gitId":"dgoptsii"},"content":"                    studentFound \u003d a;"},{"lineNumber":115,"author":{"gitId":"dgoptsii"},"content":"                }"},{"lineNumber":116,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":117,"author":{"gitId":"dgoptsii"},"content":"            if (studentFound !\u003d null) {"},{"lineNumber":118,"author":{"gitId":"dgoptsii"},"content":"                throw new ServiceException(\"Failed to add student with id: \" + studentId + \" to group with id: \" + groupId + \" student witch such id exists in this group in database\");"},{"lineNumber":119,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":120,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":121,"author":{"gitId":"dgoptsii"},"content":"            students.add(studentId);"},{"lineNumber":122,"author":{"gitId":"dgoptsii"},"content":"            groupPresent.setStudentIds(students);"},{"lineNumber":123,"author":{"gitId":"dgoptsii"},"content":"            groupRepository.save(groupPresent);"},{"lineNumber":124,"author":{"gitId":"dgoptsii"},"content":"            return studentId;"},{"lineNumber":125,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":126,"author":{"gitId":"dgoptsii"},"content":"        throw new ServiceException(\"Failed to add student with id: \" + studentId + \" to group with id: \" + groupId + \" group with such id doesn`t exist in database\");"},{"lineNumber":127,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":128,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":130,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":131,"author":{"gitId":"dgoptsii"},"content":"     * @param activityAdd - activity  to add"},{"lineNumber":132,"author":{"gitId":"dgoptsii"},"content":"     * @param groupId     - group id to add to"},{"lineNumber":133,"author":{"gitId":"dgoptsii"},"content":"     * @return activity added, if group not found or activity exists in this group - throws exception"},{"lineNumber":134,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":135,"author":{"gitId":"dgoptsii"},"content":"    public String addActivityGroup(String activityAdd, String groupId) throws ServiceException {"},{"lineNumber":136,"author":{"gitId":"dgoptsii"},"content":"        Optional\u003cGroup\u003e group \u003d groupRepository.findById(groupId);"},{"lineNumber":137,"author":{"gitId":"dgoptsii"},"content":"        if (group.isPresent()) {"},{"lineNumber":138,"author":{"gitId":"dgoptsii"},"content":"            Group groupPresent \u003d group.get();"},{"lineNumber":139,"author":{"gitId":"dgoptsii"},"content":"            List\u003cString\u003e activities \u003d groupPresent.getActivities();"},{"lineNumber":140,"author":{"gitId":"dgoptsii"},"content":"            String activityFound \u003d null;"},{"lineNumber":141,"author":{"gitId":"dgoptsii"},"content":"            for (String a : activities) {"},{"lineNumber":142,"author":{"gitId":"dgoptsii"},"content":"                if (a.equals(activityAdd)) {"},{"lineNumber":143,"author":{"gitId":"dgoptsii"},"content":"                    activityFound \u003d a;"},{"lineNumber":144,"author":{"gitId":"dgoptsii"},"content":"                }"},{"lineNumber":145,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":146,"author":{"gitId":"dgoptsii"},"content":"            if (activityFound !\u003d null) {"},{"lineNumber":147,"author":{"gitId":"dgoptsii"},"content":"                throw new ServiceException(\"Failed to add activity: \" + activityAdd + \" to group with id: \" + groupId + \" activity witch such id exists in this group in database\");"},{"lineNumber":148,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":149,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":150,"author":{"gitId":"dgoptsii"},"content":"            activities.add(activityAdd);"},{"lineNumber":151,"author":{"gitId":"dgoptsii"},"content":"            groupPresent.setActivities(activities);"},{"lineNumber":152,"author":{"gitId":"dgoptsii"},"content":"            groupRepository.save(groupPresent);"},{"lineNumber":153,"author":{"gitId":"dgoptsii"},"content":"            return activityAdd;"},{"lineNumber":154,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":155,"author":{"gitId":"dgoptsii"},"content":"        throw new ServiceException(\"Failed to add activity: \" + activityAdd + \" to group with id: \" + groupId + \" group with such id doesn`t exist in database\");"},{"lineNumber":156,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":157,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":158,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":159,"author":{"gitId":"dgoptsii"},"content":"     * @param studentId - student id to delete"},{"lineNumber":160,"author":{"gitId":"dgoptsii"},"content":"     * @param groupId   - group id to deleted from"},{"lineNumber":161,"author":{"gitId":"dgoptsii"},"content":"     * @return student id deleted, if group not found or student doesn`t exist in this group - throws exception"},{"lineNumber":162,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":163,"author":{"gitId":"dgoptsii"},"content":"    public String deleteStudentGroup(String studentId, String groupId) throws ServiceException {"},{"lineNumber":164,"author":{"gitId":"dgoptsii"},"content":"        Optional\u003cGroup\u003e group \u003d groupRepository.findById(groupId);"},{"lineNumber":165,"author":{"gitId":"dgoptsii"},"content":"        if (group.isPresent()) {"},{"lineNumber":166,"author":{"gitId":"dgoptsii"},"content":"            Group groupPresent \u003d group.get();"},{"lineNumber":167,"author":{"gitId":"dgoptsii"},"content":"            List\u003cString\u003e studentIds \u003d groupPresent.getStudentIds();"},{"lineNumber":168,"author":{"gitId":"dgoptsii"},"content":"            String studentFound \u003d null;"},{"lineNumber":169,"author":{"gitId":"dgoptsii"},"content":"            for (String a : studentIds) {"},{"lineNumber":170,"author":{"gitId":"dgoptsii"},"content":"                if (a.equals(studentId)) {"},{"lineNumber":171,"author":{"gitId":"dgoptsii"},"content":"                    studentFound \u003d a;"},{"lineNumber":172,"author":{"gitId":"dgoptsii"},"content":"                }"},{"lineNumber":173,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":174,"author":{"gitId":"dgoptsii"},"content":"            if (studentFound \u003d\u003d null) {"},{"lineNumber":175,"author":{"gitId":"dgoptsii"},"content":"                throw new ServiceException(\"Failed to delete student with id: \" + studentId + \" to group with id: \" + groupId + \" student witch such id doesn`t exist in this group in database\");"},{"lineNumber":176,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":177,"author":{"gitId":"dgoptsii"},"content":"            studentIds.remove(studentFound);"},{"lineNumber":178,"author":{"gitId":"dgoptsii"},"content":"            groupPresent.setStudentIds(studentIds);"},{"lineNumber":179,"author":{"gitId":"dgoptsii"},"content":"            groupRepository.save(groupPresent);"},{"lineNumber":180,"author":{"gitId":"dgoptsii"},"content":"            return studentId;"},{"lineNumber":181,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":182,"author":{"gitId":"dgoptsii"},"content":"        throw new ServiceException(\"Failed to delete student with id: \" + studentId + \" to group with id: \" + groupId + \" group with such id doesn`t exist in database\");"},{"lineNumber":183,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":184,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":185,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":186,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":187,"author":{"gitId":"dgoptsii"},"content":"     * @param activityDelete - activity id to delete"},{"lineNumber":188,"author":{"gitId":"dgoptsii"},"content":"     * @param groupId        - group id to deleted from"},{"lineNumber":189,"author":{"gitId":"dgoptsii"},"content":"     * @return activity deleted, if group not found or activity doesn`t exist in this group - throws exception"},{"lineNumber":190,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":191,"author":{"gitId":"dgoptsii"},"content":"    public String deleteActivityGroup(String activityDelete, String groupId) throws ServiceException {"},{"lineNumber":192,"author":{"gitId":"dgoptsii"},"content":"        Optional\u003cGroup\u003e group \u003d groupRepository.findById(groupId);"},{"lineNumber":193,"author":{"gitId":"dgoptsii"},"content":"        if (group.isPresent()) {"},{"lineNumber":194,"author":{"gitId":"dgoptsii"},"content":"            Group groupPresent \u003d group.get();"},{"lineNumber":195,"author":{"gitId":"dgoptsii"},"content":"            List\u003cString\u003e activities \u003d groupPresent.getActivities();"},{"lineNumber":196,"author":{"gitId":"dgoptsii"},"content":"            String activityFound \u003d null;"},{"lineNumber":197,"author":{"gitId":"dgoptsii"},"content":"            for (String a : activities) {"},{"lineNumber":198,"author":{"gitId":"dgoptsii"},"content":"                if (a.equals(activityDelete)) {"},{"lineNumber":199,"author":{"gitId":"dgoptsii"},"content":"                    activityFound \u003d a;"},{"lineNumber":200,"author":{"gitId":"dgoptsii"},"content":"                }"},{"lineNumber":201,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":202,"author":{"gitId":"dgoptsii"},"content":"            if (activityFound \u003d\u003d null) {"},{"lineNumber":203,"author":{"gitId":"dgoptsii"},"content":"                throw new ServiceException(\"Failed to delete activity with id: \" + activityDelete + \" to group with id: \" + groupId + \" activity witch such id doesn`t exist in this group in database\");"},{"lineNumber":204,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":205,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":206,"author":{"gitId":"dgoptsii"},"content":"            activities.remove(activityFound);"},{"lineNumber":207,"author":{"gitId":"dgoptsii"},"content":"            groupPresent.setActivities(activities);"},{"lineNumber":208,"author":{"gitId":"dgoptsii"},"content":"            groupRepository.save(groupPresent);"},{"lineNumber":209,"author":{"gitId":"dgoptsii"},"content":"            return activityDelete;"},{"lineNumber":210,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":211,"author":{"gitId":"dgoptsii"},"content":"        throw new ServiceException(\"Failed to delete activity with with id: \" + activityDelete + \" to group with id: \" + groupId + \" group with such id doesn`t exist in database\");"},{"lineNumber":212,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":213,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":214,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":215,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"Mishok":21,"dgoptsii":182,"BlackKyiv":12}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/service/GroupTemplateService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.service;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.GroupTemplate;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.repositories.GroupTemplateRepository;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.stereotype.Service;"},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.List;"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"import java.util.Optional;"},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":13,"author":{"gitId":"dgoptsii"},"content":"@Service"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"@Slf4j"},{"lineNumber":15,"author":{"gitId":"dgoptsii"},"content":"public class GroupTemplateService {"},{"lineNumber":16,"author":{"gitId":"dgoptsii"},"content":"    @Autowired"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":"    private GroupTemplateRepository groupTemplateRepository;"},{"lineNumber":18,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"    /**"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"     * @param id id of the template."},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"     * @return template with passed id, null - if not found."},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"     */"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"    public GroupTemplate getTemplateById(String id) throws ServiceException {"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"        Optional\u003cGroupTemplate\u003e template \u003d groupTemplateRepository.findById(id);"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"        if(template.isPresent()){"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"            return template.get();"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"        } else {"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"            log.warn(\"Template not found, id: \" + id);"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"            throw new ServiceException(\"Failed to get template by id\");"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    // Get all templates from db"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"    public List\u003cGroupTemplate\u003e getAllTemplates(){"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"        return groupTemplateRepository.findAll();"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":38,"author":{"gitId":"KateKolokhina"},"content":"    /**"},{"lineNumber":39,"author":{"gitId":"KateKolokhina"},"content":"     * @param groupTemplate  - group template to add"},{"lineNumber":40,"author":{"gitId":"KateKolokhina"},"content":"     * @return added template updated, if already exists - throws exception"},{"lineNumber":41,"author":{"gitId":"KateKolokhina"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"KateKolokhina"},"content":"    public GroupTemplate addGroupTemplate(GroupTemplate groupTemplate) throws ServiceException {"},{"lineNumber":43,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":44,"author":{"gitId":"dgoptsii"},"content":"        if(groupTemplate.getName()\u003d\u003dnull\u0026\u0026groupTemplate.getYear() \u003d\u003d null\u0026\u0026 groupTemplate.getGrade()\u003d\u003dnull){"},{"lineNumber":45,"author":{"gitId":"dgoptsii"},"content":"            throw new ServiceException(\"Failed to add group template: \"+groupTemplate + \" all fields are null\");"},{"lineNumber":46,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":47,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":48,"author":{"gitId":"KateKolokhina"},"content":"        if (null \u003d\u003d groupTemplateRepository.findByNameAndYearAndGrade(groupTemplate.getName(), groupTemplate.getYear(), groupTemplate.getGrade())){"},{"lineNumber":49,"author":{"gitId":"KateKolokhina"},"content":"            groupTemplateRepository.save(groupTemplate);"},{"lineNumber":50,"author":{"gitId":"KateKolokhina"},"content":"            return groupTemplate;"},{"lineNumber":51,"author":{"gitId":"KateKolokhina"},"content":"        }else{"},{"lineNumber":52,"author":{"gitId":"KateKolokhina"},"content":"            throw new ServiceException(\"Failed to add group template: \"+groupTemplate + \" group with such values exists in database\");"},{"lineNumber":53,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":54,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":56,"author":{"gitId":"KateKolokhina"},"content":"    /**"},{"lineNumber":57,"author":{"gitId":"KateKolokhina"},"content":"     * @param groupTemplateUpdate  - group template to updated"},{"lineNumber":58,"author":{"gitId":"KateKolokhina"},"content":"     * @return group template updated, if not found - throws exception"},{"lineNumber":59,"author":{"gitId":"KateKolokhina"},"content":"     */"},{"lineNumber":60,"author":{"gitId":"KateKolokhina"},"content":"    public GroupTemplate updateGroupTemplate(GroupTemplate groupTemplateUpdate) throws ServiceException {"},{"lineNumber":61,"author":{"gitId":"KateKolokhina"},"content":"        Optional\u003cGroupTemplate\u003e group \u003d groupTemplateRepository.findById(groupTemplateUpdate.getId());"},{"lineNumber":62,"author":{"gitId":"dgoptsii"},"content":"        if (null !\u003d groupTemplateRepository.findByNameAndYearAndGrade(groupTemplateUpdate.getName(), groupTemplateUpdate.getYear(), groupTemplateUpdate.getGrade())){"},{"lineNumber":63,"author":{"gitId":"dgoptsii"},"content":"            throw new ServiceException(\"Failed to add group template: \"+groupTemplateUpdate + \" group with such values exists in database\");"},{"lineNumber":64,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":65,"author":{"gitId":"KateKolokhina"},"content":"        if (group.isPresent()) {"},{"lineNumber":66,"author":{"gitId":"KateKolokhina"},"content":"            GroupTemplate groupFound \u003d group.get();"},{"lineNumber":67,"author":{"gitId":"KateKolokhina"},"content":"            groupFound.setName(groupTemplateUpdate.getName());"},{"lineNumber":68,"author":{"gitId":"KateKolokhina"},"content":"            groupFound.setGrade(groupTemplateUpdate.getGrade());"},{"lineNumber":69,"author":{"gitId":"KateKolokhina"},"content":"            groupFound.setYear(groupTemplateUpdate.getYear());"},{"lineNumber":70,"author":{"gitId":"KateKolokhina"},"content":"             groupTemplateRepository.save(groupFound);"},{"lineNumber":71,"author":{"gitId":"KateKolokhina"},"content":"            return groupFound;"},{"lineNumber":72,"author":{"gitId":"KateKolokhina"},"content":"        }else{"},{"lineNumber":73,"author":{"gitId":"KateKolokhina"},"content":"            throw new ServiceException(\"Failed to update group template: \"+groupTemplateUpdate + \" group with such id doesn`t exists in database\");"},{"lineNumber":74,"author":{"gitId":"KateKolokhina"},"content":"        }"},{"lineNumber":75,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":77,"author":{"gitId":"KateKolokhina"},"content":"    /**"},{"lineNumber":78,"author":{"gitId":"KateKolokhina"},"content":"     * @param groupTemplateId  - group template to delete"},{"lineNumber":79,"author":{"gitId":"KateKolokhina"},"content":"     * @return group template deleted, if not found - throws exception"},{"lineNumber":80,"author":{"gitId":"KateKolokhina"},"content":"     */"},{"lineNumber":81,"author":{"gitId":"KateKolokhina"},"content":"    public GroupTemplate deleteGroupTemplate(String groupTemplateId) throws ServiceException {"},{"lineNumber":82,"author":{"gitId":"KateKolokhina"},"content":"        Optional\u003cGroupTemplate\u003e group \u003d groupTemplateRepository.findById(groupTemplateId);"},{"lineNumber":83,"author":{"gitId":"KateKolokhina"},"content":"        if (group.isPresent()) {"},{"lineNumber":84,"author":{"gitId":"KateKolokhina"},"content":"            GroupTemplate groupFound \u003d group.get();"},{"lineNumber":85,"author":{"gitId":"KateKolokhina"},"content":"            groupTemplateRepository.delete(groupFound);"},{"lineNumber":86,"author":{"gitId":"KateKolokhina"},"content":"            return groupFound;"},{"lineNumber":87,"author":{"gitId":"KateKolokhina"},"content":"        }else{"},{"lineNumber":88,"author":{"gitId":"KateKolokhina"},"content":"            throw new ServiceException(\"Failed to delete group template with id: \"+groupTemplateId + \" group with such id doesn`t exists in database\");"},{"lineNumber":89,"author":{"gitId":"KateKolokhina"},"content":"        }"},{"lineNumber":90,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":92,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":93,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"dgoptsii":28,"Iryna Zubrytska":22,"KateKolokhina":43}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/service/MassStudentsService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.service;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.repositories.StudentRepository;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.beans.factory.annotation.Qualifier;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.mail.SimpleMailMessage;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.mail.javamail.JavaMailSender;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Service;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import java.util.*;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import java.util.stream.Collectors;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import static edu.kmaooad.service.ServiceCSVException.TypeOfCSVException.EMAIL_DUPLICATE;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import static edu.kmaooad.service.ServiceCSVException.TypeOfCSVException.NOT_ENOUGH_PARAMS_ON_LINE;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":" * The service is used to make mass operations with students."},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":" * Here we parse files, check whether they\u0027re valid and call another services."},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":" */"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"@Service"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"public class MassStudentsService {"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    private final ActivityService activityService;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"    public MassStudentsService(ActivityService activityService) {"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"        this.activityService \u003d activityService;"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"    public String generateStudentCSV(List\u003cStudent\u003e students) {"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"        return students.stream()"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"                .map(student -\u003e String.join(\",\","},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"                        student.getLastName(), student.getFirstName(), student.getPatronym(),"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"                        student.getEmail(),"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"                        student.getDepartment(),"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"                        String.join(\",\", student.getActivities())"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"                ))"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"                .collect(Collectors.joining(\"\\n\"));"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    public List\u003cStudent\u003e parseStudentCSV(String message) throws ServiceCSVException {"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"        final int numberOfSingleStudentParams \u003d 5;"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"        String[] lines \u003d message.trim().split(\"\\n\");"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cStudent\u003e students;"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        try {"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"            students \u003d Arrays.stream(lines)"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"                    .map((strStudent) -\u003e {"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"                        log.info(\"Got student parameters (line): \" + strStudent);"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"                        String[] studentParams \u003d strStudent.trim().split(\",\");"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"                        log.info(\"Got student parameters: \" + Arrays.toString(studentParams));"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"                        if (studentParams.length \u003c numberOfSingleStudentParams) {"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"                            log.warn(\"Not enough parameters (\" + Arrays.toString(studentParams) + \" out of \" + numberOfSingleStudentParams + \")\");"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"                            throw new RuntimeException(strStudent);"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"                        }"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"                        int i \u003d 0;"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"                        Student student \u003d new Student();"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"                        student.setLastName(studentParams[i++]);"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"                        student.setFirstName(studentParams[i++]);"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"                        student.setPatronym(studentParams[i++]);"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"                        student.setEmail(studentParams[i++]);"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"                        student.setDepartment(studentParams[i++]);"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"                        log.info(\"Created (without activities)\" + student);"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"                        Set\u003cString\u003e activitySet \u003d new HashSet\u003c\u003e(studentParams.length - numberOfSingleStudentParams);"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"                        activitySet.addAll(Arrays.asList(studentParams).subList(numberOfSingleStudentParams, studentParams.length));"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"                        log.info(\"Student\u0027s activities before check \" + activitySet);"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"                        student.setActivities(activitySet.stream().filter(activityService::existById).collect(Collectors.toList()));"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"                        log.info(\"Student\u0027s activities after check \" + student.getActivities());"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"                        return student;"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"                    }).collect(Collectors.toList());"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"        } catch (Exception e) {"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"            log.warn(\"Catched \" + e);"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"            throw new ServiceCSVException(NOT_ENOUGH_PARAMS_ON_LINE, e.getMessage());"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        Set\u003cString\u003e emails \u003d new HashSet\u003c\u003e();"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"        Optional\u003cStudent\u003e duplicateEmail \u003d students.stream()"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"                .filter(st -\u003e !emails.add(st.getEmail())).findFirst();"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"        if (duplicateEmail.isPresent()) {"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"            log.warn(\"Found dublicate email at student \" + duplicateEmail.get());"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"            throw new ServiceCSVException(EMAIL_DUPLICATE,"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"                    lines[students.indexOf(duplicateEmail.get())]);"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        log.info(\"No email duplicates found\");"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":"        return students;"},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":89,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":12,"BlackKyiv":77}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/service/ServiceCSVException.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.service;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import lombok.Getter;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"@Getter"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"public class ServiceCSVException extends Exception {"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"    private final String line;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"    private final TypeOfCSVException errorType;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"    public ServiceCSVException(TypeOfCSVException errorType, String line) {"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"        super();"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"        this.errorType \u003d errorType;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"        this.line \u003d line;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"    public enum TypeOfCSVException {"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"        EMAIL_DUPLICATE, ACTIVITY_DOESNT_EXIST, NOT_ENOUGH_PARAMS_ON_LINE"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":19}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/service/ServiceException.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.service;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"public class ServiceException extends Exception {"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"    public ServiceException(String errorMessage) {"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"        super(errorMessage);"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":7}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/service/StudentService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad.service;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.repositories.ActivityRepository;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.repositories.GroupRepository;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.repositories.StudentRepository;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":10,"author":{"gitId":"dgoptsii"},"content":"import org.springframework.stereotype.Service;"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":"import java.util.ArrayList;"},{"lineNumber":13,"author":{"gitId":"dgoptsii"},"content":"import java.util.List;"},{"lineNumber":14,"author":{"gitId":"dgoptsii"},"content":"import java.util.Optional;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import java.util.stream.Collectors;"},{"lineNumber":16,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":17,"author":{"gitId":"dgoptsii"},"content":"@Service"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"@Slf4j"},{"lineNumber":19,"author":{"gitId":"dgoptsii"},"content":"public class StudentService {"},{"lineNumber":20,"author":{"gitId":"dgoptsii"},"content":"    @Autowired"},{"lineNumber":21,"author":{"gitId":"dgoptsii"},"content":"    private StudentRepository studentRepository;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":23,"author":{"gitId":"dgoptsii"},"content":"    @Autowired"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"    private ActivityRepository activityRepository;"},{"lineNumber":25,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":26,"author":{"gitId":"dgoptsii"},"content":"    @Autowired"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"    private GroupRepository groupRepository;"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"    @Autowired"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    private EmailService emailService;"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":31,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":32,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":33,"author":{"gitId":"dgoptsii"},"content":"     * @param students - list of students to add"},{"lineNumber":34,"author":{"gitId":"dgoptsii"},"content":"     * @return added students updated, if at least one already exists - throws exception"},{"lineNumber":35,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":36,"author":{"gitId":"dgoptsii"},"content":"    public List\u003cStudent\u003e addStudents(List\u003cStudent\u003e students) throws ServiceException {"},{"lineNumber":37,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":38,"author":{"gitId":"dgoptsii"},"content":"        List\u003cStudent\u003e studentsAdded \u003d new ArrayList\u003c\u003e();"},{"lineNumber":39,"author":{"gitId":"dgoptsii"},"content":"        for (Student s : students) {"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"            Optional\u003cStudent\u003e found \u003d studentRepository.findByEmail(s.getEmail());"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"            if (found.isEmpty()) {"},{"lineNumber":42,"author":{"gitId":"dgoptsii"},"content":"                studentsAdded.add(s);"},{"lineNumber":43,"author":{"gitId":"dgoptsii"},"content":"            } else {"},{"lineNumber":44,"author":{"gitId":"dgoptsii"},"content":"                throw new ServiceException(\"Failed to add students: contains student \" + s + \" already exists in database\");"},{"lineNumber":45,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":46,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":47,"author":{"gitId":"dgoptsii"},"content":"        studentRepository.saveAll(studentsAdded);"},{"lineNumber":48,"author":{"gitId":"dgoptsii"},"content":"        return studentsAdded;"},{"lineNumber":49,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"    public List\u003cStudent\u003e getAllStudents() {"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        return studentRepository.findAll();"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"    public Student getStudentByEmail(String email) {"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        Optional\u003cStudent\u003e group \u003d studentRepository.findByEmail(email);"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        if (group.isPresent()) {"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"            return group.get();"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"        } else {"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"            log.warn(\"Student not found, email: \" + email);"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"            return null;"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":65,"author":{"gitId":"dgoptsii"},"content":"    // не додає якщо в групі студента вже є ця активність"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":67,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":68,"author":{"gitId":"dgoptsii"},"content":"     * @param activityAdd - activity  to add"},{"lineNumber":69,"author":{"gitId":"dgoptsii"},"content":"     * @param studentId   - student id to add to"},{"lineNumber":70,"author":{"gitId":"dgoptsii"},"content":"     * @return activity added, if student not found or activity exists in this student - throws exception"},{"lineNumber":71,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":72,"author":{"gitId":"dgoptsii"},"content":"    public String addStudentActivity(String activityAdd, String studentId) throws ServiceException {"},{"lineNumber":73,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":74,"author":{"gitId":"dgoptsii"},"content":"        Optional\u003cStudent\u003e student \u003d studentRepository.findById(studentId);"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        Optional\u003cActivity\u003e activity \u003d activityRepository.findById(activityAdd);"},{"lineNumber":76,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"        if (student.isPresent() \u0026\u0026 activity.isPresent()) {"},{"lineNumber":78,"author":{"gitId":"dgoptsii"},"content":"            Student studentPresent \u003d student.get();"},{"lineNumber":79,"author":{"gitId":"dgoptsii"},"content":"            List\u003cString\u003e activities \u003d studentPresent.getActivities();"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"            for (String a : activities)"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"                if (a.equals(activityAdd))"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"                    throw new ServiceException(\"Failed to add activity: \" + activityAdd + \" to student with id: \" + studentId + \" activity witch such id exists in this student in database\");"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"            emailService.notifyAboutAddedActivity(student.get(), activity.get());"},{"lineNumber":85,"author":{"gitId":"dgoptsii"},"content":"            studentPresent.getActivities().add(activityAdd);"},{"lineNumber":86,"author":{"gitId":"dgoptsii"},"content":"            studentRepository.save(studentPresent);"},{"lineNumber":87,"author":{"gitId":"dgoptsii"},"content":"            return activityAdd;"},{"lineNumber":88,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":89,"author":{"gitId":"dgoptsii"},"content":"        throw new ServiceException(\"Failed to add activity: \" + activityAdd + \" to student with id: \" + studentId + \" student with such id doesn`t exist in database\");"},{"lineNumber":90,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":91,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":93,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":94,"author":{"gitId":"dgoptsii"},"content":"     * @param activityId - activity id to delete"},{"lineNumber":95,"author":{"gitId":"dgoptsii"},"content":"     * @param studentId  - student id to add to"},{"lineNumber":96,"author":{"gitId":"dgoptsii"},"content":"     * @return activity id deleted, if student not found or activity doesn`t exist in this student - throws exception"},{"lineNumber":97,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":98,"author":{"gitId":"dgoptsii"},"content":"    public String deleteStudentActivity(String activityId, String studentId) throws ServiceException {"},{"lineNumber":99,"author":{"gitId":"dgoptsii"},"content":"        Optional\u003cStudent\u003e student \u003d studentRepository.findById(studentId);"},{"lineNumber":100,"author":{"gitId":"dgoptsii"},"content":"        if (student.isPresent()) {"},{"lineNumber":101,"author":{"gitId":"dgoptsii"},"content":"            Student studentPresent \u003d student.get();"},{"lineNumber":102,"author":{"gitId":"dgoptsii"},"content":"            List\u003cString\u003e activities \u003d studentPresent.getActivities();"},{"lineNumber":103,"author":{"gitId":"dgoptsii"},"content":"            String activityFound \u003d null;"},{"lineNumber":104,"author":{"gitId":"dgoptsii"},"content":"            for (String a : activities) {"},{"lineNumber":105,"author":{"gitId":"dgoptsii"},"content":"                if (a.equals(activityId)) {"},{"lineNumber":106,"author":{"gitId":"dgoptsii"},"content":"                    activityFound \u003d a;"},{"lineNumber":107,"author":{"gitId":"dgoptsii"},"content":"                }"},{"lineNumber":108,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":109,"author":{"gitId":"dgoptsii"},"content":"            if (activityFound \u003d\u003d null) {"},{"lineNumber":110,"author":{"gitId":"dgoptsii"},"content":"                throw new ServiceException(\"Failed to add activity with id: \" + activityId + \" to student with id: \" + studentId + \"activity witch such id doesn`t exist in this student in database\");"},{"lineNumber":111,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":112,"author":{"gitId":"dgoptsii"},"content":"            activities.remove(activityFound);"},{"lineNumber":113,"author":{"gitId":"dgoptsii"},"content":"            studentPresent.setActivities(activities);"},{"lineNumber":114,"author":{"gitId":"dgoptsii"},"content":"            studentRepository.save(studentPresent);"},{"lineNumber":115,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":116,"author":{"gitId":"dgoptsii"},"content":"            return activityId;"},{"lineNumber":117,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":118,"author":{"gitId":"dgoptsii"},"content":"        throw new ServiceException(\"Failed to delete activity with: \" + activityId + \" to student with id: \" + studentId + \" student with such id doesn`t exist in database\");"},{"lineNumber":119,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":120,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":121,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":122,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":123,"author":{"gitId":"dgoptsii"},"content":"    // приймає список унікальних валідних студентів"},{"lineNumber":124,"author":{"gitId":"dgoptsii"},"content":"    // повертає апдейтнутих студентів"},{"lineNumber":125,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":126,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":127,"author":{"gitId":"dgoptsii"},"content":"    /**"},{"lineNumber":128,"author":{"gitId":"dgoptsii"},"content":"     * @param students - list of students to update"},{"lineNumber":129,"author":{"gitId":"dgoptsii"},"content":"     * @return added students updated, if at least one doesn`t exists - throws exception"},{"lineNumber":130,"author":{"gitId":"dgoptsii"},"content":"     */"},{"lineNumber":131,"author":{"gitId":"dgoptsii"},"content":"    public List\u003cStudent\u003e updateStudents(List\u003cStudent\u003e students) throws ServiceException {"},{"lineNumber":132,"author":{"gitId":"dgoptsii"},"content":"        List\u003cStudent\u003e updatedStudents \u003d new ArrayList\u003c\u003e();"},{"lineNumber":133,"author":{"gitId":"dgoptsii"},"content":"        List\u003cStudent\u003e notUpdatedStudents \u003d new ArrayList\u003c\u003e();"},{"lineNumber":134,"author":{"gitId":"dgoptsii"},"content":"        for (Student s : students) {"},{"lineNumber":135,"author":{"gitId":"dgoptsii"},"content":"            Optional\u003cStudent\u003e student \u003d studentRepository.findById(s.getId());"},{"lineNumber":136,"author":{"gitId":"dgoptsii"},"content":"            if (student.isPresent()) {"},{"lineNumber":137,"author":{"gitId":"dgoptsii"},"content":"                Student found \u003d student.get();"},{"lineNumber":138,"author":{"gitId":"dgoptsii"},"content":"                found.setEmail(s.getEmail());"},{"lineNumber":139,"author":{"gitId":"dgoptsii"},"content":"                found.setFirstName(s.getFirstName());"},{"lineNumber":140,"author":{"gitId":"dgoptsii"},"content":"                found.setDepartment(s.getDepartment());"},{"lineNumber":141,"author":{"gitId":"dgoptsii"},"content":"                found.setPatronym(s.getPatronym());"},{"lineNumber":142,"author":{"gitId":"dgoptsii"},"content":"                updatedStudents.add(s);"},{"lineNumber":143,"author":{"gitId":"dgoptsii"},"content":"            } else {"},{"lineNumber":144,"author":{"gitId":"dgoptsii"},"content":"                throw new ServiceException(\"Failed to update students: contains student \" + s + \" doesn`t exists in database\");"},{"lineNumber":145,"author":{"gitId":"dgoptsii"},"content":"            }"},{"lineNumber":146,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":147,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":148,"author":{"gitId":"dgoptsii"},"content":"        studentRepository.saveAll(updatedStudents);"},{"lineNumber":149,"author":{"gitId":"dgoptsii"},"content":"        return updatedStudents;"},{"lineNumber":150,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":151,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":152,"author":{"gitId":"BlackKyiv"},"content":"    public List\u003cStudent\u003e replaceAllStudents(List\u003cStudent\u003e students) {"},{"lineNumber":153,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cString\u003e emails \u003d students.stream().map(Student::getEmail).collect(Collectors.toList());"},{"lineNumber":154,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cStudent\u003e newcomers \u003d studentRepository.findByEmailIsNotIn(emails);"},{"lineNumber":155,"author":{"gitId":"BlackKyiv"},"content":"        newcomers.forEach(emailService::notifyAboutCreationStudent);"},{"lineNumber":156,"author":{"gitId":"BlackKyiv"},"content":"        studentRepository.deleteAll();"},{"lineNumber":157,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cStudent\u003e result \u003d studentRepository.saveAll(students);"},{"lineNumber":158,"author":{"gitId":"BlackKyiv"},"content":"        log.info(\"Saved: \" + result);"},{"lineNumber":159,"author":{"gitId":"BlackKyiv"},"content":"        return result;"},{"lineNumber":160,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":161,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":162,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":163,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"dgoptsii":117,"BlackKyiv":46}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/service/TelegramService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.service;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.telegram.StudentsBot;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.telegram.StudentsBotSender;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.ParseMode;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboard;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import java.util.Arrays;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"/**"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":" * Service for communication with Telegram API"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":" */"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"@Slf4j"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"public class TelegramService {"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"    private final StudentsBotSender studentsBotSender;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    public TelegramService(StudentsBotSender studentsBotSender) {"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"        this.studentsBotSender \u003d studentsBotSender;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    public BotApiMethod\u003c?\u003e sendMessage(Long chatId, String text) {"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"        return sendMessage(chatId, text, null);"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"    public BotApiMethod\u003c?\u003e sendMessage(Long chatId, String text, ReplyKeyboard replyKeyboard) {"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"        SendMessage sendMessage \u003d SendMessage"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"                .builder()"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"                .text(text)"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"                .chatId(chatId.toString())"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"                //Other possible parse modes: MARKDOWNV2, MARKDOWN, which allows to make text bold, and all other things"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"                .parseMode(ParseMode.HTML)"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"                .replyMarkup(replyKeyboard)"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"                .build();"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        try {"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"            execute(sendMessage);"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        } catch (Exception e) {"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"            log.error(Arrays.toString(e.getStackTrace()));"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"        return sendMessage;"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"    private void execute(BotApiMethod\u003c?\u003e botApiMethod) throws Exception {"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"        studentsBotSender.execute(botApiMethod);"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":50}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/service/UserSessionService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.service;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":4,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":5,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":6,"author":{"gitId":"KateKolokhina"},"content":"import java.util.HashMap;"},{"lineNumber":7,"author":{"gitId":"KateKolokhina"},"content":"import java.util.Map;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"@Component"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"public class UserSessionService {"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"    private Map\u003cLong, UserSession\u003e userSessionMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":"    public UserSession getSession(Long chatId) {"},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":"        return userSessionMap.getOrDefault(chatId, UserSession"},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":"                .builder()"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":"                .chatId(chatId)"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"                .data(new HashMap\u003c\u003e())"},{"lineNumber":19,"author":{"gitId":"KateKolokhina"},"content":"                .build());"},{"lineNumber":20,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":22,"author":{"gitId":"KateKolokhina"},"content":"    public UserSession saveSession(Long chatId, UserSession session) {"},{"lineNumber":23,"author":{"gitId":"KateKolokhina"},"content":"        return userSessionMap.put(chatId, session);"},{"lineNumber":24,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"Mishok":1,"KateKolokhina":24}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/telegram/StudentsBot.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.telegram;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.Dispatcher;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":7,"author":{"gitId":"KateKolokhina"},"content":"import lombok.AccessLevel;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":"import lombok.Getter;"},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"import lombok.Setter;"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"import lombok.experimental.FieldDefaults;"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"import lombok.extern.slf4j.Slf4j;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.methods.ParseMode;"},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.methods.updates.SetWebhook;"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":18,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboard;"},{"lineNumber":19,"author":{"gitId":"KateKolokhina"},"content":"import org.telegram.telegrambots.starter.SpringWebhookBot;"},{"lineNumber":20,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":21,"author":{"gitId":"KateKolokhina"},"content":"import java.util.Arrays;"},{"lineNumber":22,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":23,"author":{"gitId":"KateKolokhina"},"content":"@Slf4j"},{"lineNumber":24,"author":{"gitId":"KateKolokhina"},"content":"@Getter"},{"lineNumber":25,"author":{"gitId":"KateKolokhina"},"content":"@Setter"},{"lineNumber":26,"author":{"gitId":"KateKolokhina"},"content":"@FieldDefaults(level \u003d AccessLevel.PRIVATE)"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":28,"author":{"gitId":"KateKolokhina"},"content":"public class StudentsBot extends SpringWebhookBot {"},{"lineNumber":29,"author":{"gitId":"KateKolokhina"},"content":"    String botPath;"},{"lineNumber":30,"author":{"gitId":"KateKolokhina"},"content":"    String botUsername;"},{"lineNumber":31,"author":{"gitId":"KateKolokhina"},"content":"    String botToken;"},{"lineNumber":32,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    private final Dispatcher dispatcher;"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    private final UserSessionService userSessionService;"},{"lineNumber":35,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    public StudentsBot(TelegramConfig telegramConfig,"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"                       Dispatcher dispatcher,"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"                       UserSessionService userSessionService) {"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        super(SetWebhook.builder().url(telegramConfig.getWebhookPath()).build());"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        this.botPath \u003d telegramConfig.getWebhookPath();"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        this.botUsername \u003d telegramConfig.getBotName();"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"        this.botToken \u003d telegramConfig.getBotToken();"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"        this.dispatcher \u003d dispatcher;"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"        this.userSessionService \u003d userSessionService;"},{"lineNumber":45,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":47,"author":{"gitId":"KateKolokhina"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"KateKolokhina"},"content":"    //Handler for simple message"},{"lineNumber":49,"author":{"gitId":"KateKolokhina"},"content":"    public BotApiMethod\u003c?\u003e onWebhookUpdateReceived(Update update) {"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"        if (update.hasMessage() \u0026\u0026 update.getMessage().hasText()) {"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"            String textFromUser \u003d update.getMessage().getText();"},{"lineNumber":52,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"            Long userId \u003d update.getMessage().getFrom().getId();"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"            String userFirstName \u003d update.getMessage().getFrom().getFirstName();"},{"lineNumber":55,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"            log.info(\"[{}, {}]: {}\", userId, userFirstName, textFromUser);"},{"lineNumber":57,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"            Long chatId \u003d update.getMessage().getChatId();"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"            UserSession session \u003d userSessionService.getSession(chatId);"},{"lineNumber":60,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"            UserRequest userRequest \u003d UserRequest"},{"lineNumber":62,"author":{"gitId":"KateKolokhina"},"content":"                    .builder()"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"                    .update(update)"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"                    .userSession(session)"},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"                    .chatId(chatId)"},{"lineNumber":66,"author":{"gitId":"KateKolokhina"},"content":"                    .build();"},{"lineNumber":67,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"            BotApiMethod\u003c?\u003e dispatched \u003d dispatcher.dispatch(userRequest).getResult();"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"            return dispatched;"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":"        } else{"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"            log.warn(\"Unexpected update from user\");"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"            return null;"},{"lineNumber":74,"author":{"gitId":"KateKolokhina"},"content":"        }"},{"lineNumber":75,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"Mishok":34,"KateKolokhina":42}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/telegram/StudentsBotSender.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.telegram;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.bots.DefaultAbsSender;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.bots.DefaultBotOptions;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"@Component"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"public class StudentsBotSender extends DefaultAbsSender {"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"    private final TelegramConfig telegramConfig;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"    protected StudentsBotSender(TelegramConfig telegramConfig) {"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"        super(new DefaultBotOptions());"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"        this.telegramConfig \u003d telegramConfig;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"    @Override"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"    public String getBotToken() {"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"        return telegramConfig.getBotToken();"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":20}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/telegram/TelegramConfig.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"KateKolokhina"},"content":"package edu.kmaooad.telegram;"},{"lineNumber":2,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":3,"author":{"gitId":"KateKolokhina"},"content":"import lombok.AccessLevel;"},{"lineNumber":4,"author":{"gitId":"KateKolokhina"},"content":"import lombok.Getter;"},{"lineNumber":5,"author":{"gitId":"KateKolokhina"},"content":"import lombok.experimental.FieldDefaults;"},{"lineNumber":6,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.beans.factory.annotation.Value;"},{"lineNumber":7,"author":{"gitId":"KateKolokhina"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":8,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"@Component"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"@Getter"},{"lineNumber":11,"author":{"gitId":"KateKolokhina"},"content":"@FieldDefaults(level \u003d AccessLevel.PRIVATE)"},{"lineNumber":12,"author":{"gitId":"KateKolokhina"},"content":"public class TelegramConfig {"},{"lineNumber":13,"author":{"gitId":"KateKolokhina"},"content":"    @Value(\"${telegram.webhook-path}\")"},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":"    String webhookPath;"},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":"    @Value(\"${telegram.bot-name}\")"},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":"    String botName;"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":"    @Value(\"${telegram.bot-token}\")"},{"lineNumber":18,"author":{"gitId":"KateKolokhina"},"content":"    String botToken;"},{"lineNumber":19,"author":{"gitId":"KateKolokhina"},"content":"}"}],"authorContributionMap":{"KateKolokhina":19}},{"path":"kmaooad-functions/src/main/resources/application.properties","fileType":"properties","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"telegram.webhook-path\u003dhttps://kmaooad-opossum.azurewebsites.net/api/TelegramWebhook?code\u003ddJJsepX5C3eCaVHHU0SDlnVwdtfcg0AZMtYYpRtVYNmHAzFunxVWgQ\u003d\u003d"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":"telegram.bot-name\u003dkmaooad_opossum_bot"},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"telegram.bot-token\u003d5775292875:AAFzbPJ0g9-STwZvZ-4dtN0DK00-nMsgdIA"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"logging.level.root\u003dINFO"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"spring.data.mongodb.uri\u003dmongodb://Opossum:Sh56MZnkL00DYYI7@ac-eyakdio-shard-00-00.egv5fqu.mongodb.net:27017,ac-eyakdio-shard-00-01.egv5fqu.mongodb.net:27017,ac-eyakdio-shard-00-02.egv5fqu.mongodb.net:27017/?ssl\u003dtrue\u0026replicaSet\u003datlas-h2y16s-shard-0\u0026authSource\u003dadmin\u0026retryWrites\u003dtrue\u0026w\u003dmajority"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"spring.data.mongodb.database\u003dOpossum"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.host\u003dsmtp.gmail.com"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.username\u003dopossum.bot.notify@gmail.com"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.password\u003dkmjihttkqioolkez"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.protocol\u003dsmtp"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.port\u003d587"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.properties.mail.smtp.auth\u003dtrue"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.properties.mail.smtp.starttls.enable\u003dtrue"}],"authorContributionMap":{"Mishok":6,"BlackKyiv":8}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/ActivityServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.repositories.ActivityRepository;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.MockitoAnnotations;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import java.time.LocalDate;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import java.time.ZoneId;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import java.util.ArrayList;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import java.util.List;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"import java.util.Optional;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"import static edu.kmaooad.constants.bot.GlobalConstants.*;"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"import static org.junit.jupiter.api.Assertions.*;"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"public class ActivityServiceTest {"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    ActivityService activityService;"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    ActivityRepository activityRepository;"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    private final Group group1 \u003d new Group();"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    private final Student student1 \u003d new Student();"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    private final List\u003cActivity\u003e activities \u003d new ArrayList\u003c\u003e();"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"    public void initTest() {"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        MockitoAnnotations.openMocks(this);"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        group1.setId(\"1\");"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        group1.setName(\"group1\");"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        group1.setYear(2022);"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        group1.setGrade(1);"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        group1.setActivities(List.of(\"1\"));"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"        student1.setActivities(List.of(\"1\"));"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        Activity completed \u003d new Activity();"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        completed.setId(\"1\");"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        completed.setName(\"complete\");"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"        completed.setStartDate(LocalDate.now(ZoneId.systemDefault()).minusDays(6));"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"        completed.setEndDate(LocalDate.now(ZoneId.systemDefault()).minusDays(2));"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        Activity inProg \u003d new Activity();"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"        inProg.setId(\"2\");"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"        inProg.setName(\"prog\");"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"        inProg.setStartDate(LocalDate.now(ZoneId.systemDefault()).minusDays(6));"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"        inProg.setEndDate(LocalDate.now(ZoneId.systemDefault()).plusDays(6));"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"        Activity haveStatus \u003d new Activity();"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        haveStatus.setId(\"3\");"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"        haveStatus.setName(\"haveStat\");"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"        haveStatus.setStartDate(LocalDate.now(ZoneId.systemDefault()).minusDays(6));"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"        haveStatus.setEndDate(LocalDate.now(ZoneId.systemDefault()).plusDays(6));"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"        haveStatus.setStatus(ACTIVITY_STATUS_IN_PROGRESS);"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        Activity justActivity \u003d new Activity();"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setId(\"4\");"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setName(\"justActiv\");"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setStartDate(null);"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setEndDate(null);"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"        activities.addAll(List.of(completed, inProg, haveStatus, justActivity));"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(List.of(completed, inProg, haveStatus, justActivity)).when(activityRepository).findAll();"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(Optional.of(completed)).when(activityRepository).findById(\"1\");"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(Optional.of(inProg)).when(activityRepository).findById(\"2\");"},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(Optional.of(haveStatus)).when(activityRepository).findById(\"3\");"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(Optional.of(justActivity)).when(activityRepository).findById(\"4\");"},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":89,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(Optional.of(completed)).when(activityRepository).findByName(completed.getName());"},{"lineNumber":90,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":92,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":93,"author":{"gitId":"BlackKyiv"},"content":"    public void getAllActivities() {"},{"lineNumber":94,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cActivity\u003e activities \u003d activityService.getAllActivities();"},{"lineNumber":95,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activities.size(), 4);"},{"lineNumber":96,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":97,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":98,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":99,"author":{"gitId":"BlackKyiv"},"content":"    public void testUpdatesStatuses() throws ServiceException {"},{"lineNumber":100,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(4, activityService.getAllActivities().size());"},{"lineNumber":101,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activityService.getAllActivities().stream()"},{"lineNumber":102,"author":{"gitId":"BlackKyiv"},"content":"                .filter(s -\u003e s.getStatus() !\u003d null \u0026\u0026 s.getStatus().equals(ACTIVITY_STATUS_IN_PROGRESS))"},{"lineNumber":103,"author":{"gitId":"BlackKyiv"},"content":"                .count(), 1);"},{"lineNumber":104,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activityService.getAllActivities().stream().filter(s -\u003e s.getStatus() \u003d\u003d null)"},{"lineNumber":105,"author":{"gitId":"BlackKyiv"},"content":"                .count(), 3);"},{"lineNumber":106,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":107,"author":{"gitId":"BlackKyiv"},"content":"        activityService.updateStatuses();"},{"lineNumber":108,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":109,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activityService.getAllActivities().size(), 4);"},{"lineNumber":110,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activityService.getAllActivities().stream()"},{"lineNumber":111,"author":{"gitId":"BlackKyiv"},"content":"                .filter(s -\u003e s.getStatus() !\u003d null \u0026\u0026 s.getStatus().equals(ACTIVITY_STATUS_IN_PROGRESS))"},{"lineNumber":112,"author":{"gitId":"BlackKyiv"},"content":"                .count(), 2);"},{"lineNumber":113,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activityService.getAllActivities().stream()"},{"lineNumber":114,"author":{"gitId":"BlackKyiv"},"content":"                .filter(s -\u003e s.getStatus() !\u003d null \u0026\u0026 s.getStatus().equals(ACTIVITY_STATUS_COMPLETED))"},{"lineNumber":115,"author":{"gitId":"BlackKyiv"},"content":"                .count(), 1);"},{"lineNumber":116,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activityService.getAllActivities().stream().filter(s -\u003e s.getStatus() \u003d\u003d null)"},{"lineNumber":117,"author":{"gitId":"BlackKyiv"},"content":"                .count(), 1);"},{"lineNumber":118,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":120,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":121,"author":{"gitId":"BlackKyiv"},"content":"    public void testUpdateActivityWithException() {"},{"lineNumber":122,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":123,"author":{"gitId":"BlackKyiv"},"content":"        Activity justActivity \u003d new Activity();"},{"lineNumber":124,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setId(\"5\");"},{"lineNumber":125,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setName(\"justActiv\");"},{"lineNumber":126,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setStartDate(null);"},{"lineNumber":127,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setEndDate(null);"},{"lineNumber":128,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":129,"author":{"gitId":"BlackKyiv"},"content":"        assertThrows(ServiceException.class, () -\u003e activityService.updateActivities(List.of(justActivity)));"},{"lineNumber":130,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":132,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":133,"author":{"gitId":"BlackKyiv"},"content":"    public void testGetStatusOfActivitiesForGroup() {"},{"lineNumber":134,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cString\u003e res \u003d activityService.getStatusOfActivitiesForGroup(group1);"},{"lineNumber":135,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activities.size(), res.size());"},{"lineNumber":136,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(res.contains(\"complete \" + ASSIGNED));"},{"lineNumber":137,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(res.containsAll(List.of(\"prog\", \"haveStat\", \"justActiv\")));"},{"lineNumber":138,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":139,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":140,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":141,"author":{"gitId":"BlackKyiv"},"content":"    public void testGetStatusOfActivitiesForStudent() {"},{"lineNumber":142,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cString\u003e res \u003d activityService.getStatusOfActivitiesForStudent(student1);"},{"lineNumber":143,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activities.size(), res.size());"},{"lineNumber":144,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(res.contains(\"complete \" + ASSIGNED));"},{"lineNumber":145,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(res.containsAll(List.of(\"prog\", \"haveStat\", \"justActiv\")));"},{"lineNumber":146,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":147,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":148,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":149,"author":{"gitId":"BlackKyiv"},"content":"    public void testGetActivityByName() {"},{"lineNumber":150,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activities.get(0), activityService.getActivityByName(\"complete\"));"},{"lineNumber":151,"author":{"gitId":"BlackKyiv"},"content":"        assertNull(activityService.getActivityByName(\"test\"));"},{"lineNumber":152,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":153,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":154,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":155,"author":{"gitId":"BlackKyiv"},"content":"    public void testAddGroup() throws ServiceException {"},{"lineNumber":156,"author":{"gitId":"BlackKyiv"},"content":"        Activity justActivity \u003d new Activity();"},{"lineNumber":157,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setId(\"5\");"},{"lineNumber":158,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setName(\"test\");"},{"lineNumber":159,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setStartDate(null);"},{"lineNumber":160,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setEndDate(null);"},{"lineNumber":161,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":162,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activityService.addActivity(justActivity), justActivity);"},{"lineNumber":163,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(Optional.of(justActivity)).when(activityRepository).findByName(justActivity.getName());"},{"lineNumber":164,"author":{"gitId":"BlackKyiv"},"content":"        assertThrows(ServiceException.class, () -\u003e activityService.addActivity(justActivity));"},{"lineNumber":165,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":166,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":167,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":168,"author":{"gitId":"BlackKyiv"},"content":"    public void testUpdateActivitiesSetStatusGroups() throws ServiceException {"},{"lineNumber":169,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":170,"author":{"gitId":"BlackKyiv"},"content":"        Activity justActivity \u003d new Activity();"},{"lineNumber":171,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setId(\"5\");"},{"lineNumber":172,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setName(\"justActiv\");"},{"lineNumber":173,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setStartDate(null);"},{"lineNumber":174,"author":{"gitId":"BlackKyiv"},"content":"        justActivity.setEndDate(null);"},{"lineNumber":175,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":176,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(activityService.updateActivitiesSetStatus(activities, \"COMPLETE\").size(), 4);"},{"lineNumber":177,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":178,"author":{"gitId":"BlackKyiv"},"content":"        activities.add(justActivity);"},{"lineNumber":179,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":180,"author":{"gitId":"BlackKyiv"},"content":"        assertThrows(ServiceException.class, () -\u003e"},{"lineNumber":181,"author":{"gitId":"BlackKyiv"},"content":"                activityService.updateActivitiesSetStatus(activities, \"COMPLETE\"));"},{"lineNumber":182,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":183,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":183}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/DBSampleTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.boot.test.context.SpringBootTest;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import java.util.ArrayList;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import java.util.List;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"@SpringBootTest"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"public class DBSampleTest {"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"    @Autowired"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"    ActivityService activityService;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"    @Autowired"},{"lineNumber":20,"author":{"gitId":"dgoptsii"},"content":"    StudentService studentService;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"    public void test() throws ServiceException {"},{"lineNumber":23,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"dgoptsii":4,"BlackKyiv":22}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/DispatcherTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.DialogHandler;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.CancelHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.mockito.MockitoAnnotations;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"import java.util.ArrayList;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"import java.util.List;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"import static org.junit.jupiter.api.Assertions.assertEquals;"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"public class DispatcherTest {"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    private Dispatcher dispatcher;"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    private CancelHandler cancelHandler;"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    private final static UserSession userSession \u003d UserSession.builder().build();"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    private final static HandlerResponse handleResult1 \u003d new HandlerResponse(new SendMessage(), true);"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    private final static Update request1Update \u003d new Update();"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"    private final static Update request2Update \u003d new Update();"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    static {"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"        Message message \u003d new Message();"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"        message.setText(GlobalConstants.CANCEL_BUTTON_LABEL);"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"        request1Update.setMessage(message);"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"    final static UserRequest request1 \u003d UserRequest"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"            .builder()"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"            .update(request1Update)"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"            .build();"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"    final static UserRequest request2 \u003d UserRequest"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"            .builder()"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"            .userSession(userSession)"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"            .update(request2Update)"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"            .build();"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"    public void initTest() {"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"        MockitoAnnotations.openMocks(this);"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"        Mockito.doReturn(handleResult1).when(cancelHandler).handle(request1);"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"        Mockito.doReturn(true).when(cancelHandler).isApplicable(request1);"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"        dispatcher \u003d new Dispatcher(List.of(cancelHandler), new ArrayList\u003c\u003e(), new ArrayList\u003c\u003e());"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"    public void testApplicableCancelHandler() {"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"        assertEquals(dispatcher.dispatch(request1), handleResult1);"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"    public void testNotApplicableCancelHandler() {"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"        assertEquals(dispatcher.dispatch(request2), new HandlerResponse(null, false));"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":75}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/EmailServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.EmailService;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.MockitoAnnotations;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.mail.javamail.JavaMailSender;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import static org.mockito.Mockito.times;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import static org.mockito.Mockito.verify;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"public class EmailServiceTest {"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"    EmailService emailService;"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    JavaMailSender mailSender;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests(){"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"        MockitoAnnotations.openMocks(this);"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    public void testNotifyAboutAddedActivity() {"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"        emailService.notifyAboutAddedActivity(new Student(), new Activity());"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    public void test(){"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        emailService.notifyAboutCreationStudent(new Student());"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":47}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/GroupServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.repositories.GroupRepository;"},{"lineNumber":7,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":14,"author":{"gitId":"dgoptsii"},"content":"import org.mockito.Mockito;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.MockitoAnnotations;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":19,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import java.util.List;"},{"lineNumber":21,"author":{"gitId":"dgoptsii"},"content":"import java.util.Optional;"},{"lineNumber":22,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import static org.junit.jupiter.api.Assertions.*;"},{"lineNumber":24,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":27,"author":{"gitId":"dgoptsii"},"content":"public class GroupServiceTest {"},{"lineNumber":28,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":29,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":31,"author":{"gitId":"dgoptsii"},"content":"    GroupService groupService;"},{"lineNumber":32,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":34,"author":{"gitId":"dgoptsii"},"content":"    GroupRepository groupRepository;"},{"lineNumber":35,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    final Group group1 \u003d new Group();"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    final Group group2 \u003d new Group();"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    final String group1Name \u003d \"group1\";"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    final String group2Name \u003d \"group2\";"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    final String group1ID \u003d \"1\";"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    final String group2ID \u003d \"2\";"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    final String missingID \u003d \"3\";"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    final Optional\u003cGroup\u003e missingGroup \u003d Optional.empty();"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    final String student1ID \u003d \"1\";"},{"lineNumber":45,"author":{"gitId":"dgoptsii"},"content":"    final Activity activity \u003d new Activity();"},{"lineNumber":46,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":48,"author":{"gitId":"dgoptsii"},"content":"    public void initTest() {"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        MockitoAnnotations.openMocks(this);"},{"lineNumber":50,"author":{"gitId":"dgoptsii"},"content":"        group1.setId(group1ID);"},{"lineNumber":51,"author":{"gitId":"dgoptsii"},"content":"        group1.setName(\"group1\");"},{"lineNumber":52,"author":{"gitId":"dgoptsii"},"content":"        group1.setYear(2022);"},{"lineNumber":53,"author":{"gitId":"dgoptsii"},"content":"        group1.setGrade(1);"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"        group2.setId(group2ID);"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        group2.setName(\"group2\");"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        group2.setYear(2023);"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        group2.setGrade(2);"},{"lineNumber":58,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":59,"author":{"gitId":"dgoptsii"},"content":"        activity.setId(\"1\");"},{"lineNumber":60,"author":{"gitId":"dgoptsii"},"content":"        Mockito.doReturn(Optional.of(group1)).when(groupRepository).findById(group1ID);"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(List.of(group1, group2)).when(groupRepository).findAll();"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(Optional.of(group1)).when(groupRepository).findByName(group1Name);"},{"lineNumber":63,"author":{"gitId":"dgoptsii"},"content":"        Mockito.doReturn(missingGroup).when(groupRepository).findById(missingID);"},{"lineNumber":64,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"    public void getAllGroups() {"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cGroup\u003e groups \u003d groupService.getAllGroups();"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(groups.size(), 2 );"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(groups.contains(group1));"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(groups.contains(group2));"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":75,"author":{"gitId":"dgoptsii"},"content":"    @Test"},{"lineNumber":76,"author":{"gitId":"dgoptsii"},"content":"    public void addGroup() throws ServiceException {"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(groupService.addGroup(group2), group2);"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(Optional.of(group2)).when(groupRepository).findByName(group2Name);"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"        assertThrows(ServiceException.class, () -\u003e groupService.addGroup(group2));"},{"lineNumber":80,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":82,"author":{"gitId":"dgoptsii"},"content":"    @Test"},{"lineNumber":83,"author":{"gitId":"dgoptsii"},"content":"    public void updateGroup() throws ServiceException {"},{"lineNumber":84,"author":{"gitId":"dgoptsii"},"content":"        group1.setName(\"group2\");"},{"lineNumber":85,"author":{"gitId":"dgoptsii"},"content":"        group1.setYear(2023);"},{"lineNumber":86,"author":{"gitId":"dgoptsii"},"content":"        group1.setGrade(2);"},{"lineNumber":87,"author":{"gitId":"dgoptsii"},"content":"        assertEquals(groupService.updateGroup(group1), group1);"},{"lineNumber":88,"author":{"gitId":"dgoptsii"},"content":"        Group group2 \u003d new Group();"},{"lineNumber":89,"author":{"gitId":"dgoptsii"},"content":"        group2.setId(missingID);"},{"lineNumber":90,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e groupService.updateGroup(group2));"},{"lineNumber":91,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":93,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":94,"author":{"gitId":"BlackKyiv"},"content":"    public void getGroupByName() {"},{"lineNumber":95,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(group1, groupService.getGroupByName(group1Name));"},{"lineNumber":96,"author":{"gitId":"BlackKyiv"},"content":"        assertNull(groupService.getGroupById(\"test\"));"},{"lineNumber":97,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":98,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":99,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":100,"author":{"gitId":"BlackKyiv"},"content":"    public void getGroupById() {"},{"lineNumber":101,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(group1, groupService.getGroupById(group1ID));"},{"lineNumber":102,"author":{"gitId":"BlackKyiv"},"content":"        assertNull(groupService.getGroupById(\"test\"));"},{"lineNumber":103,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":105,"author":{"gitId":"dgoptsii"},"content":"    @Test"},{"lineNumber":106,"author":{"gitId":"dgoptsii"},"content":"    public void deleteGroup() throws ServiceException {"},{"lineNumber":107,"author":{"gitId":"dgoptsii"},"content":"        assertEquals(group1ID, groupService.deleteGroup(group1ID).getId());"},{"lineNumber":108,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e groupService.deleteGroup(missingID));"},{"lineNumber":109,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":111,"author":{"gitId":"dgoptsii"},"content":"    @Test"},{"lineNumber":112,"author":{"gitId":"dgoptsii"},"content":"    public void addAndDeleteStudentGroup() throws ServiceException {"},{"lineNumber":113,"author":{"gitId":"dgoptsii"},"content":"        assertEquals(groupService.addStudentGroup(student1ID, group1ID), student1ID);"},{"lineNumber":114,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e groupService.addStudentGroup(student1ID, group1ID));"},{"lineNumber":115,"author":{"gitId":"dgoptsii"},"content":"        assertEquals(groupService.deleteStudentGroup(student1ID, group1ID), student1ID);"},{"lineNumber":116,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e groupService.deleteStudentGroup(student1ID, group1ID));"},{"lineNumber":117,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":118,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":119,"author":{"gitId":"dgoptsii"},"content":"    @Test"},{"lineNumber":120,"author":{"gitId":"dgoptsii"},"content":"    public void addAndDeleteActivityGroup() throws ServiceException {"},{"lineNumber":121,"author":{"gitId":"dgoptsii"},"content":"        assertEquals(groupService.addActivityGroup(activity.getId(), group1ID), activity.getId());"},{"lineNumber":122,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e groupService.addActivityGroup(activity.getId(), group1ID));"},{"lineNumber":123,"author":{"gitId":"dgoptsii"},"content":"        assertEquals(groupService.deleteActivityGroup(activity.getId(), group1ID), activity.getId());"},{"lineNumber":124,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e groupService.deleteActivityGroup(activity.getId(), group1ID));"},{"lineNumber":125,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":127,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":128,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"Mishok":6,"dgoptsii":72,"BlackKyiv":50}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/GroupTemplateServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":4,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":5,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":6,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.model.GroupTemplate;"},{"lineNumber":7,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.repositories.GroupTemplateRepository;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":9,"author":{"gitId":"KateKolokhina"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":10,"author":{"gitId":"KateKolokhina"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.function.Executable;"},{"lineNumber":14,"author":{"gitId":"KateKolokhina"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":15,"author":{"gitId":"KateKolokhina"},"content":"import org.mockito.Mock;"},{"lineNumber":16,"author":{"gitId":"KateKolokhina"},"content":"import org.mockito.Mockito;"},{"lineNumber":17,"author":{"gitId":"KateKolokhina"},"content":"import org.mockito.MockitoAnnotations;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":21,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":22,"author":{"gitId":"KateKolokhina"},"content":"import java.util.Optional;"},{"lineNumber":23,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"import static org.junit.jupiter.api.Assertions.*;"},{"lineNumber":25,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":28,"author":{"gitId":"dgoptsii"},"content":"public class GroupTemplateServiceTest {"},{"lineNumber":29,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":30,"author":{"gitId":"KateKolokhina"},"content":"    @InjectMocks"},{"lineNumber":31,"author":{"gitId":"KateKolokhina"},"content":"    GroupTemplateService groupTemplateService;"},{"lineNumber":32,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":33,"author":{"gitId":"KateKolokhina"},"content":"    @Mock"},{"lineNumber":34,"author":{"gitId":"KateKolokhina"},"content":"    GroupTemplateRepository groupTemplateRepository;"},{"lineNumber":35,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":36,"author":{"gitId":"KateKolokhina"},"content":"    final GroupTemplate group1 \u003d new GroupTemplate();"},{"lineNumber":37,"author":{"gitId":"KateKolokhina"},"content":"    final String group1Name \u003d \"group1\";"},{"lineNumber":38,"author":{"gitId":"KateKolokhina"},"content":"    final String group1ID \u003d \"1\";"},{"lineNumber":39,"author":{"gitId":"KateKolokhina"},"content":"    final String missingID \u003d \"2\";"},{"lineNumber":40,"author":{"gitId":"KateKolokhina"},"content":"    final Optional\u003cGroup\u003e missingGroup \u003d Optional.empty();"},{"lineNumber":41,"author":{"gitId":"KateKolokhina"},"content":"    final String student1ID \u003d \"1\";"},{"lineNumber":42,"author":{"gitId":"KateKolokhina"},"content":"    final Activity activity \u003d new Activity();"},{"lineNumber":43,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":44,"author":{"gitId":"KateKolokhina"},"content":"    @BeforeEach"},{"lineNumber":45,"author":{"gitId":"KateKolokhina"},"content":"    public void initTest() {"},{"lineNumber":46,"author":{"gitId":"KateKolokhina"},"content":"        MockitoAnnotations.openMocks(this);"},{"lineNumber":47,"author":{"gitId":"KateKolokhina"},"content":"        group1.setId(group1ID);"},{"lineNumber":48,"author":{"gitId":"KateKolokhina"},"content":"        group1.setName(\"group1\");"},{"lineNumber":49,"author":{"gitId":"KateKolokhina"},"content":"        group1.setYear(2022);"},{"lineNumber":50,"author":{"gitId":"KateKolokhina"},"content":"        group1.setGrade(1);"},{"lineNumber":51,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":52,"author":{"gitId":"KateKolokhina"},"content":"        activity.setId(\"1\");"},{"lineNumber":53,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":54,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":55,"author":{"gitId":"KateKolokhina"},"content":"        Mockito.doReturn(Optional.of(group1)).when(groupTemplateRepository).findById(group1ID);"},{"lineNumber":56,"author":{"gitId":"KateKolokhina"},"content":"        Mockito.doReturn(missingGroup).when(groupTemplateRepository).findById(missingID);"},{"lineNumber":57,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testGetTemplateByIdFail() throws ServiceException {"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"        assertThrows(ServiceException.class, () -\u003e groupTemplateService.getTemplateById(\"unknown id\"));"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":64,"author":{"gitId":"KateKolokhina"},"content":"    @Test"},{"lineNumber":65,"author":{"gitId":"KateKolokhina"},"content":"    public void addGroup() throws ServiceException {"},{"lineNumber":66,"author":{"gitId":"dgoptsii"},"content":"        GroupTemplate group \u003d new GroupTemplate();"},{"lineNumber":67,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e groupTemplateService.addGroupTemplate(group));"},{"lineNumber":68,"author":{"gitId":"KateKolokhina"},"content":"        assertEquals(group1,groupTemplateService.addGroupTemplate(group1));"},{"lineNumber":69,"author":{"gitId":"KateKolokhina"},"content":"        Mockito.doReturn(group1).when(groupTemplateRepository).findByNameAndYearAndGrade(group1.getName(), group1.getYear(),group1.getGrade());"},{"lineNumber":70,"author":{"gitId":"KateKolokhina"},"content":"        assertThrows(ServiceException.class, () -\u003e groupTemplateService.addGroupTemplate(group1));"},{"lineNumber":71,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":72,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":74,"author":{"gitId":"KateKolokhina"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"KateKolokhina"},"content":"    public void updateGroup() throws ServiceException {"},{"lineNumber":76,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":77,"author":{"gitId":"KateKolokhina"},"content":"        group1.setName(\"group2\");"},{"lineNumber":78,"author":{"gitId":"KateKolokhina"},"content":"        group1.setYear(2023);"},{"lineNumber":79,"author":{"gitId":"KateKolokhina"},"content":"        group1.setGrade(2);"},{"lineNumber":80,"author":{"gitId":"KateKolokhina"},"content":"        assertEquals(group1, groupTemplateService.updateGroupTemplate(group1));"},{"lineNumber":81,"author":{"gitId":"KateKolokhina"},"content":"        GroupTemplate group2 \u003d new GroupTemplate();"},{"lineNumber":82,"author":{"gitId":"KateKolokhina"},"content":"        group2.setId(missingID);"},{"lineNumber":83,"author":{"gitId":"KateKolokhina"},"content":"        assertThrows(ServiceException.class, () -\u003e groupTemplateService.updateGroupTemplate(group2));"},{"lineNumber":84,"author":{"gitId":"KateKolokhina"},"content":""},{"lineNumber":85,"author":{"gitId":"KateKolokhina"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":87,"author":{"gitId":"dgoptsii"},"content":"    @Test"},{"lineNumber":88,"author":{"gitId":"KateKolokhina"},"content":"    public void deleteGroup() throws ServiceException {"},{"lineNumber":89,"author":{"gitId":"KateKolokhina"},"content":"        assertEquals(group1ID, groupTemplateService.deleteGroupTemplate(group1ID).getId());"},{"lineNumber":90,"author":{"gitId":"KateKolokhina"},"content":"        assertThrows(ServiceException.class, () -\u003e groupTemplateService.deleteGroupTemplate(missingID));"},{"lineNumber":91,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"Mishok":4,"dgoptsii":15,"BlackKyiv":2,"Iryna Zubrytska":6,"KateKolokhina":65}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/HttpResponseMessageMock.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import com.microsoft.azure.functions.HttpResponseMessage;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import com.microsoft.azure.functions.HttpStatus;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import com.microsoft.azure.functions.HttpStatusType;"},{"lineNumber":6,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":7,"author":{"gitId":"github-classroom[bot]"},"content":"import java.util.HashMap;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import java.util.Map;"},{"lineNumber":9,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":10,"author":{"gitId":"github-classroom[bot]"},"content":"/**"},{"lineNumber":11,"author":{"gitId":"github-classroom[bot]"},"content":" * The mock for HttpResponseMessage, can be used in unit tests to verify if the"},{"lineNumber":12,"author":{"gitId":"github-classroom[bot]"},"content":" * returned response by HTTP trigger function is correct or not."},{"lineNumber":13,"author":{"gitId":"github-classroom[bot]"},"content":" */"},{"lineNumber":14,"author":{"gitId":"github-classroom[bot]"},"content":"public class HttpResponseMessageMock implements HttpResponseMessage {"},{"lineNumber":15,"author":{"gitId":"github-classroom[bot]"},"content":"    private int httpStatusCode;"},{"lineNumber":16,"author":{"gitId":"github-classroom[bot]"},"content":"    private HttpStatusType httpStatus;"},{"lineNumber":17,"author":{"gitId":"github-classroom[bot]"},"content":"    private Object body;"},{"lineNumber":18,"author":{"gitId":"github-classroom[bot]"},"content":"    private Map\u003cString, String\u003e headers;"},{"lineNumber":19,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":20,"author":{"gitId":"github-classroom[bot]"},"content":"    public HttpResponseMessageMock(HttpStatusType status, Map\u003cString, String\u003e headers, Object body) {"},{"lineNumber":21,"author":{"gitId":"github-classroom[bot]"},"content":"        this.httpStatus \u003d status;"},{"lineNumber":22,"author":{"gitId":"github-classroom[bot]"},"content":"        this.httpStatusCode \u003d status.value();"},{"lineNumber":23,"author":{"gitId":"github-classroom[bot]"},"content":"        this.headers \u003d headers;"},{"lineNumber":24,"author":{"gitId":"github-classroom[bot]"},"content":"        this.body \u003d body;"},{"lineNumber":25,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":27,"author":{"gitId":"github-classroom[bot]"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"github-classroom[bot]"},"content":"    public HttpStatusType getStatus() {"},{"lineNumber":29,"author":{"gitId":"github-classroom[bot]"},"content":"        return this.httpStatus;"},{"lineNumber":30,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":32,"author":{"gitId":"github-classroom[bot]"},"content":"    @Override"},{"lineNumber":33,"author":{"gitId":"github-classroom[bot]"},"content":"    public int getStatusCode() {"},{"lineNumber":34,"author":{"gitId":"github-classroom[bot]"},"content":"        return httpStatusCode;"},{"lineNumber":35,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":37,"author":{"gitId":"github-classroom[bot]"},"content":"    @Override"},{"lineNumber":38,"author":{"gitId":"github-classroom[bot]"},"content":"    public String getHeader(String key) {"},{"lineNumber":39,"author":{"gitId":"github-classroom[bot]"},"content":"        return this.headers.get(key);"},{"lineNumber":40,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":42,"author":{"gitId":"github-classroom[bot]"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"github-classroom[bot]"},"content":"    public Object getBody() {"},{"lineNumber":44,"author":{"gitId":"github-classroom[bot]"},"content":"        return this.body;"},{"lineNumber":45,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":47,"author":{"gitId":"github-classroom[bot]"},"content":"    public static class HttpResponseMessageBuilderMock implements HttpResponseMessage.Builder {"},{"lineNumber":48,"author":{"gitId":"github-classroom[bot]"},"content":"        private Object body;"},{"lineNumber":49,"author":{"gitId":"github-classroom[bot]"},"content":"        private int httpStatusCode;"},{"lineNumber":50,"author":{"gitId":"github-classroom[bot]"},"content":"        private Map\u003cString, String\u003e headers \u003d new HashMap\u003c\u003e();"},{"lineNumber":51,"author":{"gitId":"github-classroom[bot]"},"content":"        private HttpStatusType httpStatus;"},{"lineNumber":52,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":53,"author":{"gitId":"github-classroom[bot]"},"content":"        public Builder status(HttpStatus status) {"},{"lineNumber":54,"author":{"gitId":"github-classroom[bot]"},"content":"            this.httpStatusCode \u003d status.value();"},{"lineNumber":55,"author":{"gitId":"github-classroom[bot]"},"content":"            this.httpStatus \u003d status;"},{"lineNumber":56,"author":{"gitId":"github-classroom[bot]"},"content":"            return this;"},{"lineNumber":57,"author":{"gitId":"github-classroom[bot]"},"content":"        }"},{"lineNumber":58,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":59,"author":{"gitId":"github-classroom[bot]"},"content":"        @Override"},{"lineNumber":60,"author":{"gitId":"github-classroom[bot]"},"content":"        public Builder status(HttpStatusType httpStatusType) {"},{"lineNumber":61,"author":{"gitId":"github-classroom[bot]"},"content":"            this.httpStatusCode \u003d httpStatusType.value();"},{"lineNumber":62,"author":{"gitId":"github-classroom[bot]"},"content":"            this.httpStatus \u003d httpStatusType;"},{"lineNumber":63,"author":{"gitId":"github-classroom[bot]"},"content":"            return this;"},{"lineNumber":64,"author":{"gitId":"github-classroom[bot]"},"content":"        }"},{"lineNumber":65,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":66,"author":{"gitId":"github-classroom[bot]"},"content":"        @Override"},{"lineNumber":67,"author":{"gitId":"github-classroom[bot]"},"content":"        public HttpResponseMessage.Builder header(String key, String value) {"},{"lineNumber":68,"author":{"gitId":"github-classroom[bot]"},"content":"            this.headers.put(key, value);"},{"lineNumber":69,"author":{"gitId":"github-classroom[bot]"},"content":"            return this;"},{"lineNumber":70,"author":{"gitId":"github-classroom[bot]"},"content":"        }"},{"lineNumber":71,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":72,"author":{"gitId":"github-classroom[bot]"},"content":"        @Override"},{"lineNumber":73,"author":{"gitId":"github-classroom[bot]"},"content":"        public HttpResponseMessage.Builder body(Object body) {"},{"lineNumber":74,"author":{"gitId":"github-classroom[bot]"},"content":"            this.body \u003d body;"},{"lineNumber":75,"author":{"gitId":"github-classroom[bot]"},"content":"            return this;"},{"lineNumber":76,"author":{"gitId":"github-classroom[bot]"},"content":"        }"},{"lineNumber":77,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":78,"author":{"gitId":"github-classroom[bot]"},"content":"        @Override"},{"lineNumber":79,"author":{"gitId":"github-classroom[bot]"},"content":"        public HttpResponseMessage build() {"},{"lineNumber":80,"author":{"gitId":"github-classroom[bot]"},"content":"            return new HttpResponseMessageMock(this.httpStatus, this.headers, this.body);"},{"lineNumber":81,"author":{"gitId":"github-classroom[bot]"},"content":"        }"},{"lineNumber":82,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"github-classroom[bot]"},"content":"}"}],"authorContributionMap":{"BlackKyiv":4,"github-classroom[bot]":79}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/MassStudentsServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.repositories.StudentRepository;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.MassStudentsService;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ServiceCSVException;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.MockitoAnnotations;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.springframework.mail.javamail.JavaMailSender;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import java.time.LocalDate;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import java.util.ArrayList;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import java.util.List;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"import static org.junit.jupiter.api.Assertions.*;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"import static org.mockito.ArgumentMatchers.anyString;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"public class MassStudentsServiceTest {"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"    MassStudentsService massStudentsService;"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    StudentRepository studentRepository;"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    ActivityService activityService;"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    JavaMailSender mailSender;"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    public void initTest() {"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        MockitoAnnotations.openMocks(this);"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        Activity activity1 \u003d new Activity(\"aid1\", \"name1\", LocalDate.now(), LocalDate.now(), \"st\");"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        Activity activity2 \u003d new Activity(\"aid2\", \"name2\", LocalDate.now(), LocalDate.now(), \"st\");"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"        Activity activity3 \u003d new Activity(\"aid3\", \"name3\", LocalDate.now(), LocalDate.now(), \"st\");"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(activity1).when(activityService).getActivityById(\"aid1\");"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(activity2).when(activityService).getActivityById(\"aid2\");"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(activity3).when(activityService).getActivityById(\"aid3\");"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(true).when(activityService).existById(anyString());"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"    public void generateStudentCSVTest() {"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        Student student1 \u003d new Student(\"id1\", \"fn1\", \"ln1\", \"p1\", \"d1\", \"em1\", new ArrayList\u003c\u003e());"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        Student student2 \u003d new Student(\"id2\", \"fn2\", \"ln2\", \"p2\", \"d2\", \"em2\", List.of(\"aid1\", \"aid2\"));"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"        String csv \u003d massStudentsService.generateStudentCSV(List.of(student1, student2));"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"        assertNotNull(csv);"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"        String[] lines \u003d csv.split(\"\\n\");"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(lines.length, 2);"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(lines[0].split(\",\").length, 5);"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(lines[1].split(\",\").length, 7);"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"    public void parseStudentCSVandReplaceAllTest() throws ServiceCSVException {"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        String st1 \u003d \"ln1,fn1,p1,em1,d1\\n\";"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"        String st2 \u003d \"ln2,fn2,p2,em2,d2,aid1,aid3\\n\";"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"        String st3 \u003d \"ln3,fn3,p3,em3,d1,aid1,aid1,aid2\";"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"        String lines \u003d st1 + st2 + st3;"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cStudent\u003e res \u003d massStudentsService.parseStudentCSV(lines);"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(res.size(), 3);"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"    public void failParamsStudentCSVandReplaceAllTest() {"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"        try {"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"            String st1 \u003d \"ln1,fn1,em1,d1\\n\";"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"            String st2 \u003d \"ln2,fn2,p2,em2,d2,aid1,aid3\\n\";"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"            String st3 \u003d \"ln3,fn3,p3,em3,d1,aid1,aid1,aid2\";"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"            String lines \u003d st1 + st2 + st3;"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"            massStudentsService.parseStudentCSV(lines);"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":"            fail();"},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"        } catch (ServiceCSVException e) {"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"            assertEquals(e.getErrorType(), ServiceCSVException.TypeOfCSVException.NOT_ENOUGH_PARAMS_ON_LINE);"},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":89,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":91,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":92,"author":{"gitId":"BlackKyiv"},"content":"    public void failDubEmailStudentCSVandReplaceAllTest() {"},{"lineNumber":93,"author":{"gitId":"BlackKyiv"},"content":"        try {"},{"lineNumber":94,"author":{"gitId":"BlackKyiv"},"content":"            String st1 \u003d \"ln1,fn1,p1,em1,d1\\n\";"},{"lineNumber":95,"author":{"gitId":"BlackKyiv"},"content":"            String st2 \u003d \"ln2,fn2,p2,em2,d2,aid1,aid3\\n\";"},{"lineNumber":96,"author":{"gitId":"BlackKyiv"},"content":"            String st3 \u003d \"ln3,fn3,p3,em2,d1,aid1,aid1,aid2\";"},{"lineNumber":97,"author":{"gitId":"BlackKyiv"},"content":"            String lines \u003d st1 + st2 + st3;"},{"lineNumber":98,"author":{"gitId":"BlackKyiv"},"content":"            massStudentsService.parseStudentCSV(lines);"},{"lineNumber":99,"author":{"gitId":"BlackKyiv"},"content":"            fail();"},{"lineNumber":100,"author":{"gitId":"BlackKyiv"},"content":"        } catch (ServiceCSVException e) {"},{"lineNumber":101,"author":{"gitId":"BlackKyiv"},"content":"            assertEquals(e.getErrorType(), ServiceCSVException.TypeOfCSVException.EMAIL_DUPLICATE);"},{"lineNumber":102,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":103,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":105,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":106,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":106}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/StudentServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"dgoptsii"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":3,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":4,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Activity;"},{"lineNumber":5,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":6,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.repositories.ActivityRepository;"},{"lineNumber":8,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.repositories.GroupRepository;"},{"lineNumber":9,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.repositories.StudentRepository;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.EmailService;"},{"lineNumber":11,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.service.ServiceException;"},{"lineNumber":12,"author":{"gitId":"dgoptsii"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":15,"author":{"gitId":"dgoptsii"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":18,"author":{"gitId":"dgoptsii"},"content":"import org.mockito.Mockito;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.MockitoAnnotations;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":23,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":24,"author":{"gitId":"dgoptsii"},"content":"import java.util.ArrayList;"},{"lineNumber":25,"author":{"gitId":"dgoptsii"},"content":"import java.util.List;"},{"lineNumber":26,"author":{"gitId":"dgoptsii"},"content":"import java.util.Optional;"},{"lineNumber":27,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":28,"author":{"gitId":"dgoptsii"},"content":"import static org.junit.jupiter.api.Assertions.*;"},{"lineNumber":29,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":32,"author":{"gitId":"dgoptsii"},"content":"public class StudentServiceTest {"},{"lineNumber":33,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":34,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":36,"author":{"gitId":"dgoptsii"},"content":"    StudentService studentService;"},{"lineNumber":37,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":39,"author":{"gitId":"dgoptsii"},"content":"    StudentRepository studentRepository;"},{"lineNumber":40,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":42,"author":{"gitId":"dgoptsii"},"content":"    GroupRepository groupRepository;"},{"lineNumber":43,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"    EmailService emailService;"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"    ActivityRepository activityRepository;"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":50,"author":{"gitId":"dgoptsii"},"content":"    final static Student student1 \u003d new Student();"},{"lineNumber":51,"author":{"gitId":"dgoptsii"},"content":"    final static Student student2 \u003d new Student();"},{"lineNumber":52,"author":{"gitId":"dgoptsii"},"content":"    final static Student student3 \u003d new Student();"},{"lineNumber":53,"author":{"gitId":"dgoptsii"},"content":"    final static String sID1 \u003d \"1\";"},{"lineNumber":54,"author":{"gitId":"dgoptsii"},"content":"    final static String sID2 \u003d \"2\";"},{"lineNumber":55,"author":{"gitId":"dgoptsii"},"content":"    final static String sID3 \u003d \"3\";"},{"lineNumber":56,"author":{"gitId":"dgoptsii"},"content":"    final static String sEmail1 \u003d \"e1\";"},{"lineNumber":57,"author":{"gitId":"dgoptsii"},"content":"    final static String sEmail2 \u003d \"e2\";"},{"lineNumber":58,"author":{"gitId":"dgoptsii"},"content":"    final static String sEmail3 \u003d \"e3\";"},{"lineNumber":59,"author":{"gitId":"dgoptsii"},"content":"    static List\u003cStudent\u003e studentsList \u003d new ArrayList\u003c\u003e();"},{"lineNumber":60,"author":{"gitId":"dgoptsii"},"content":"    final static String missingID \u003d \"4\";"},{"lineNumber":61,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":62,"author":{"gitId":"dgoptsii"},"content":"    final static Optional\u003cStudent\u003e missingStudent \u003d Optional.empty();"},{"lineNumber":63,"author":{"gitId":"dgoptsii"},"content":"    final static String group1ID \u003d \"1\";"},{"lineNumber":64,"author":{"gitId":"dgoptsii"},"content":"    final static Group group1 \u003d new Group();"},{"lineNumber":65,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":66,"author":{"gitId":"dgoptsii"},"content":"    final static String activityId \u003d \"1\";"},{"lineNumber":67,"author":{"gitId":"dgoptsii"},"content":"    final static String activityInGroupId \u003d \"2\";"},{"lineNumber":68,"author":{"gitId":"dgoptsii"},"content":"    final Activity activity \u003d new Activity();"},{"lineNumber":69,"author":{"gitId":"dgoptsii"},"content":"    final Activity activityInDb \u003d new Activity();"},{"lineNumber":70,"author":{"gitId":"dgoptsii"},"content":"    final Activity activityInGroup \u003d new Activity();"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":73,"author":{"gitId":"dgoptsii"},"content":"    public void initTest() {"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"        MockitoAnnotations.openMocks(this);"},{"lineNumber":75,"author":{"gitId":"dgoptsii"},"content":"        student1.setId(sID1);"},{"lineNumber":76,"author":{"gitId":"dgoptsii"},"content":"        student2.setId(sID2);"},{"lineNumber":77,"author":{"gitId":"dgoptsii"},"content":"        student3.setId(sID3);"},{"lineNumber":78,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":79,"author":{"gitId":"dgoptsii"},"content":"        student1.setEmail(sEmail1);"},{"lineNumber":80,"author":{"gitId":"dgoptsii"},"content":"        student2.setEmail(sEmail2);"},{"lineNumber":81,"author":{"gitId":"dgoptsii"},"content":"        student3.setEmail(sEmail3);"},{"lineNumber":82,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":83,"author":{"gitId":"dgoptsii"},"content":"        studentsList \u003d new ArrayList\u003c\u003e();"},{"lineNumber":84,"author":{"gitId":"dgoptsii"},"content":"        studentsList.add(student1);"},{"lineNumber":85,"author":{"gitId":"dgoptsii"},"content":"        studentsList.add(student2);"},{"lineNumber":86,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":87,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":88,"author":{"gitId":"dgoptsii"},"content":"        group1.setId(group1ID);"},{"lineNumber":89,"author":{"gitId":"dgoptsii"},"content":"        activityInGroup.setId(activityInGroupId);"},{"lineNumber":90,"author":{"gitId":"dgoptsii"},"content":"        activity.setId(activityId);"},{"lineNumber":91,"author":{"gitId":"dgoptsii"},"content":"        activityInDb.setId(activityInGroupId);"},{"lineNumber":92,"author":{"gitId":"dgoptsii"},"content":"        group1.getActivities().add(activityInDb.getId());"},{"lineNumber":93,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":94,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(Optional.of(student3)).when(studentRepository).findByEmail(sEmail3);"},{"lineNumber":95,"author":{"gitId":"dgoptsii"},"content":"        Mockito.doReturn(Optional.of(student2)).when(studentRepository).findById(sID2);"},{"lineNumber":96,"author":{"gitId":"dgoptsii"},"content":"        Mockito.doReturn(Optional.of(student1)).when(studentRepository).findById(sID1);"},{"lineNumber":97,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(Optional.of(activity)).when(activityRepository).findById(activityId);"},{"lineNumber":98,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(List.of(student1, student2, student3)).when(studentRepository).findAll();"},{"lineNumber":99,"author":{"gitId":"dgoptsii"},"content":"        Mockito.doReturn(missingStudent).when(studentRepository).findById(missingID);"},{"lineNumber":100,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":101,"author":{"gitId":"dgoptsii"},"content":"        Mockito.doReturn(Optional.of(group1)).when(groupRepository).findById(group1ID);"},{"lineNumber":102,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":103,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":105,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":106,"author":{"gitId":"BlackKyiv"},"content":"    public void getAllGroups() {"},{"lineNumber":107,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cStudent\u003e students \u003d studentService.getAllStudents();"},{"lineNumber":108,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(students.size(), 3 );"},{"lineNumber":109,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(students.contains(student1));"},{"lineNumber":110,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(students.contains(student2));"},{"lineNumber":111,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(students.contains(student3));"},{"lineNumber":112,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":114,"author":{"gitId":"dgoptsii"},"content":"    @Test"},{"lineNumber":115,"author":{"gitId":"dgoptsii"},"content":"    public void addStudents() throws ServiceException {"},{"lineNumber":116,"author":{"gitId":"dgoptsii"},"content":"        List\u003cStudent\u003e addedAdded \u003d studentService.addStudents(studentsList);"},{"lineNumber":117,"author":{"gitId":"dgoptsii"},"content":"        List\u003cStudent\u003e assumeInDB \u003d new ArrayList\u003c\u003e();"},{"lineNumber":118,"author":{"gitId":"dgoptsii"},"content":"        assumeInDB.add(student1);"},{"lineNumber":119,"author":{"gitId":"dgoptsii"},"content":"        assumeInDB.add(student2);"},{"lineNumber":120,"author":{"gitId":"dgoptsii"},"content":"        for (Student s : addedAdded) {"},{"lineNumber":121,"author":{"gitId":"dgoptsii"},"content":"            assertTrue(assumeInDB.contains(s));"},{"lineNumber":122,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":123,"author":{"gitId":"dgoptsii"},"content":"        studentsList.add(student3);"},{"lineNumber":124,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e studentService.addStudents(studentsList));"},{"lineNumber":125,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":127,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":128,"author":{"gitId":"BlackKyiv"},"content":"    public void getStudentByEmail() {"},{"lineNumber":129,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(student3, studentService.getStudentByEmail(sEmail3));"},{"lineNumber":130,"author":{"gitId":"BlackKyiv"},"content":"        assertNull(studentService.getStudentByEmail(\"test\"));"},{"lineNumber":131,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":132,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":133,"author":{"gitId":"dgoptsii"},"content":"    @Test"},{"lineNumber":134,"author":{"gitId":"dgoptsii"},"content":"    public void updateStudents() throws ServiceException {"},{"lineNumber":135,"author":{"gitId":"dgoptsii"},"content":"        List\u003cStudent\u003e notAdded \u003d studentService.updateStudents(studentsList);"},{"lineNumber":136,"author":{"gitId":"dgoptsii"},"content":"        List\u003cStudent\u003e assumeInDB \u003d new ArrayList\u003c\u003e();"},{"lineNumber":137,"author":{"gitId":"dgoptsii"},"content":"        assumeInDB.add(student1);"},{"lineNumber":138,"author":{"gitId":"dgoptsii"},"content":"        assumeInDB.add(student2);"},{"lineNumber":139,"author":{"gitId":"dgoptsii"},"content":"        for (Student s : notAdded) {"},{"lineNumber":140,"author":{"gitId":"dgoptsii"},"content":"            assertTrue(assumeInDB.contains(s));"},{"lineNumber":141,"author":{"gitId":"dgoptsii"},"content":"        }"},{"lineNumber":142,"author":{"gitId":"dgoptsii"},"content":"        studentsList.add(student3);"},{"lineNumber":143,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e studentService.updateStudents(studentsList));"},{"lineNumber":144,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":145,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":146,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":147,"author":{"gitId":"dgoptsii"},"content":"    @Test"},{"lineNumber":148,"author":{"gitId":"dgoptsii"},"content":"    public void addAndDeleteActivityStudent() throws ServiceException {"},{"lineNumber":149,"author":{"gitId":"dgoptsii"},"content":"        assertEquals(studentService.addStudentActivity(activity.getId(), sID1), activity.getId());"},{"lineNumber":150,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e studentService.addStudentActivity(activityInDb.getId(), missingID));"},{"lineNumber":151,"author":{"gitId":"dgoptsii"},"content":"        assertEquals(studentService.deleteStudentActivity(activity.getId(), sID1), activity.getId());"},{"lineNumber":152,"author":{"gitId":"dgoptsii"},"content":"        assertThrows(ServiceException.class, () -\u003e studentService.deleteStudentActivity(activity.getId(), missingID));"},{"lineNumber":153,"author":{"gitId":"dgoptsii"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":155,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":156,"author":{"gitId":"BlackKyiv"},"content":"    public void replaceAll() throws ServiceException {"},{"lineNumber":157,"author":{"gitId":"BlackKyiv"},"content":"        studentService.replaceAllStudents(new ArrayList\u003c\u003e());"},{"lineNumber":158,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":159,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":160,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":161,"author":{"gitId":"dgoptsii"},"content":"}"}],"authorContributionMap":{"Mishok":6,"dgoptsii":113,"BlackKyiv":42}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/TelegramServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.telegram.StudentsBotSender;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.ParseMode;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import static org.junit.jupiter.api.Assertions.assertEquals;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import static org.mockito.Mockito.*;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"public class TelegramServiceTest {"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"    public void testSendValidMessage() throws Exception {"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"        StudentsBotSender studentsBotSender \u003d mock(StudentsBotSender.class);"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"        when(studentsBotSender.execute(any(BotApiMethod.class))).thenReturn(null);"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"        TelegramService telegramService \u003d new TelegramService(studentsBotSender);"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"        String text \u003d \"Some text\";"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"        Long chatId \u003d 1L;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"        BotApiMethod\u003c?\u003e result \u003d telegramService.sendMessage(chatId, text);"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"        SendMessage actual \u003d SendMessage"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"                .builder()"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"                .text(text)"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"                .chatId(chatId.toString())"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"                .parseMode(ParseMode.HTML)"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"                .build();"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"        assertEquals(result, actual);"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    public void testSendInvalidMessage() throws Exception {"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        StudentsBotSender studentsBotSender \u003d mock(StudentsBotSender.class);"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"        when(studentsBotSender.execute(any(BotApiMethod.class))).thenThrow(new RuntimeException());"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        TelegramService telegramService \u003d new TelegramService(studentsBotSender);"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        String text \u003d \"Some text\";"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        Long chatId \u003d 1L;"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"        BotApiMethod\u003c?\u003e result \u003d telegramService.sendMessage(chatId, text);"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"        SendMessage actual \u003d SendMessage"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"                .builder()"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"                .text(text)"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"                .chatId(chatId.toString())"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"                .parseMode(ParseMode.HTML)"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"                .build();"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"        assertEquals(result, actual);"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":53,"BlackKyiv":1}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/CancelHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.CancelHandler;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.StartCommandHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.MockitoAnnotations;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboard;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"public class CancelHandlerTest {"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"    private CancelHandler cancelHandler;"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    private StartCommandHandler startCommandHandler;"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    public void initTests() {"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"        MockitoAnnotations.openMocks(this);"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        Mockito.doReturn(null).when(startCommandHandler).handle(Mockito.any(UserRequest.class));"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"        cancelHandler \u003d new CancelHandler(startCommandHandler);"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    public void testHandleMethod() {"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"        UserSession session \u003d UserSession.builder().conversationState(ConversationState.WAITING_FOR_TEXT).build();"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"        cancelHandler.handle(UserRequest.builder().userSession(session).build());"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(session.getConversationState(), ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"    public void testIsApplicable(){"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"        Message messageApplicable \u003d new Message();"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"        messageApplicable.setText(\"❌ Скасувати\");"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"        Update updateApplicable \u003d new Update();"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"        updateApplicable.setMessage(messageApplicable);"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"        UserRequest userRequestApplicable \u003d UserRequest.builder().chatId(1L).update(updateApplicable).build();"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(cancelHandler.isApplicable(userRequestApplicable));"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":61}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/KeyboardHelperTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.StudentConstants;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboardMarkup;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import java.util.ArrayList;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import java.util.List;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import static org.junit.jupiter.api.Assertions.assertEquals;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import static org.junit.jupiter.api.Assertions.assertTrue;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"public class KeyboardHelperTest {"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"    private static final KeyboardHelper keyboardHelper \u003d new KeyboardHelper();"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"    public void buildAdditionalActionsTestConstructingKeyboardWithProperValue() {"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"        String keyName \u003d \"action\";"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"        ReplyKeyboardMarkup result \u003d keyboardHelper.buildAdditionalActions(List.of(keyName));"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"        assertEquals(result.getKeyboard().get(0).get(0).getText(), keyName);"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"    public void buildMainMenuTestContainsStudentsButton() {"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"        ReplyKeyboardMarkup result \u003d keyboardHelper.buildMainMenu();"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"        assertTrue(result.getKeyboard().get(0).contains(GlobalConstants.GROUP_BUTTON_LABEL));"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    public void buildMainMenuWithCancelTestContainsCancelButton() {"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        ReplyKeyboardMarkup result \u003d keyboardHelper.buildMenuWithCancel();"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        assertEquals(result.getKeyboard().get(0).get(0).getText(), GlobalConstants.CANCEL_BUTTON_LABEL);"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"    public void buildGroupMenuWithFirstButtonIsAdd() {"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"        ReplyKeyboardMarkup result \u003d keyboardHelper.buildGroupMenuWithCancel();"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        assertEquals(result.getKeyboard().get(0).get(0).getText(), GroupConstants.GROUP_ADD_BUTTON_LABEL);"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"    public void buildAdditionalActionsVerticalTest() {"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        final int N \u003d 10;"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        List\u003cString\u003e actions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        for (int i \u003d 0; i \u003c N; i++) {"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"            actions.add(\"option \" + i);"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        }"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup result \u003d keyboardHelper.buildAdditionalActionsVertical(actions);"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(result.getKeyboard().get(0).get(0).getText(), GlobalConstants.CANCEL_BUTTON_LABEL);"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        assertEquals(result.getKeyboard().size(), N + 1);"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"    public void buildGroupTemplateMenuWithCancelTest() {"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"        ReplyKeyboardMarkup result \u003d keyboardHelper.buildStudentMenuWithCancel();"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(result.getKeyboard().get(0).contains(StudentConstants.STUDENT_SHOW_CSV_BUTTON_LABEL));"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"        assertTrue(result.getKeyboard().get(0).contains(StudentConstants.STUDENT_UPDATE_CSV_BUTTON_LABEL));"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":46,"BlackKyiv":21}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/StartCommandHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.StartCommandHandler;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.mockito.MockitoAnnotations;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.Spy;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboard;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"public class StartCommandHandlerTest {"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"    private StartCommandHandler startHandler;"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    private TelegramService telegramService;"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    private final KeyboardHelper keyboardHelper \u003d new KeyboardHelper();"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    @Spy"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    private Message messageApplicable;"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    private static final Update updateApplicable \u003d new Update();"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    private UserSessionService userSessionService \u003d new UserSessionService();"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    private static final UserSession userSession \u003d UserSession.builder().chatId(1L).build();"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"    private static final UserRequest userRequest \u003d UserRequest.builder().chatId(1L).userSession(userSession).build();"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"    private static final UserRequest userRequestApplicable \u003d UserRequest.builder().chatId(1L).userSession(userSession).update(updateApplicable).build();"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"    private static final UserRequest userRequestNotApplicable \u003d UserRequest.builder().chatId(1L).update(new Update()).build();"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"    private static final BotApiMethod\u003c?\u003e resultSendMessage \u003d SendMessage.builder().chatId(1L).text(\"Request\").build();"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    public void initTests() {"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"        MockitoAnnotations.openMocks(this);"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"        Mockito.doReturn(resultSendMessage).when(telegramService).sendMessage(Mockito.any(Long.class), Mockito.any(String.class), Mockito.any(ReplyKeyboard.class));"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"        Mockito.doReturn(resultSendMessage).when(telegramService).sendMessage(Mockito.any(Long.class), Mockito.any(String.class));"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"        Mockito.doReturn(true).when(messageApplicable).isCommand();"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"        messageApplicable.setText(\"/start\");"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"        updateApplicable.setMessage(messageApplicable);"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"        startHandler \u003d new StartCommandHandler(telegramService, keyboardHelper, userSessionService);"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"    public void startCommandHandlerTestHandle() {"},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"        HandlerResponse result \u003d startHandler.handle(userRequest);"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(resultSendMessage, result.getResult());"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":"    public void testIsApplicable(){"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(startHandler.isApplicable(userRequestApplicable));"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicable(){"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(startHandler.isApplicable(userRequestNotApplicable));"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":79}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/TelegramWebhookHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import com.microsoft.azure.functions.ExecutionContext;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import com.microsoft.azure.functions.HttpRequestMessage;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import com.microsoft.azure.functions.HttpResponseMessage;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import com.microsoft.azure.functions.HttpStatus;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.HttpResponseMessageMock;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.functions.TelegramWebhookHandler;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Spy;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.stubbing.Answer;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import java.util.Optional;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import java.util.logging.Logger;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"import static org.junit.jupiter.api.Assertions.assertEquals;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"import static org.mockito.Mockito.doAnswer;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"import static org.mockito.Mockito.doReturn;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"public class TelegramWebhookHandlerTest {"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    HttpRequestMessage\u003cOptional\u003cString\u003e\u003e mockRequest;"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    ExecutionContext mockContext;"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    @Spy"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    TelegramWebhookHandler spyHandler;"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    public void initMocks() {"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        doAnswer((Answer\u003cHttpResponseMessage.Builder\u003e) invocation -\u003e {"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"            HttpStatus status \u003d (HttpStatus) invocation.getArguments()[0];"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"            return new HttpResponseMessageMock.HttpResponseMessageBuilderMock().status(status);"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"        }).when(mockRequest).createResponseBuilder(any(HttpStatus.class));"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        doReturn(Logger.getGlobal()).when(mockContext).getLogger();"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"    public void testInvalidStringReturnsBadRequest() {"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        doReturn(Optional.of(\"Bad request\")).when(mockRequest).getBody();"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        final HttpResponseMessage ret \u003d new TelegramWebhookHandler().run(mockRequest, mockContext);"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"        assertEquals(ret.getStatus(), HttpStatus.BAD_REQUEST);"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    public void testValidJSONReturnsOK() {"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"        doReturn(Optional.of(\"{\\\"update_id\\\":22483710,\\n\" + \"\\\"message\\\":{\\\"message_id\\\":7,\\\"from\\\":{\\\"id\\\":463933526,\\\"is_bot\\\":false,\\\"first_name\\\":\\\"A\\\",\\\"last_name\\\":\\\"B\\\",\\\"username\\\":\\\"C\\\",\\\"language_code\\\":\\\"en\\\"},\\\"chat\\\":{\\\"id\\\":463933526,\\\"first_name\\\":\\\"A\\\",\\\"last_name\\\":\\\"B\\\",\\\"username\\\":\\\"V\\\",\\\"type\\\":\\\"private\\\"},\\\"date\\\":1664719220,\\\"text\\\":\\\"Very interesting topic.\\\"}}\"))"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"                .when(mockRequest).getBody();"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"        doReturn(null).when(spyHandler).handleRequest(any(Update.class), any(ExecutionContext.class));"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"        final HttpResponseMessage ret \u003d spyHandler.run(mockRequest, mockContext);"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"        assertEquals(ret.getStatus(), HttpStatus.OK);"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":44,"BlackKyiv":28}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/UserRequestHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.mockito.Spy;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"public class UserRequestHandlerTest {"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"    private UserSession userSession \u003d UserSession.builder().chatId(1L).build();"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"    private Update update \u003d new Update();"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    @Spy"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    private Message message \u003d new Message();"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"        update.setMessage(message);"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"        userRequest \u003d UserRequest.builder().userSession(userSession).chatId(1L).update(update).build();"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    public void testIsCommandFalseNotCommand(){"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"        final String commandLabel \u003d \"Label\";"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        Mockito.doReturn(false).when(message).isCommand();"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"        message.setText(commandLabel);"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(UserRequestHandler.isCommand(update, commandLabel));"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"    public void testIsCommandFalseText(){"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"        final String commandLabel \u003d \"Label\";"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        Mockito.doReturn(true).when(message).isCommand();"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        message.setText(\"Not right label\");"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(UserRequestHandler.isCommand(update, commandLabel));"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"    public void testIsCommandTrue(){"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"        final String commandLabel \u003d \"Label\";"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"        Mockito.doReturn(true).when(message).isCommand();"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"        message.setText(commandLabel);"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(UserRequestHandler.isCommand(update, commandLabel));"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":60}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/assign/group/AssignActivitiesToGroupHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.assign.group;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.assign.group.AssignActivitiesToGroupHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.*;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"import java.util.HashMap;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"import java.util.Map;"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"public class AssignActivitiesToGroupHandlerTest {"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    private AssignActivitiesToGroupHandler assignActivitiesToGroupHandler;"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    private GroupService groupService;"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    private ActivityService activityService;"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests() {"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Test group\");"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        Map\u003cString, Object\u003e data \u003d new HashMap\u003c\u003e();"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"        data.put(GroupConstants.GROUP_MAP_KEY, new Group());"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"                .data(data)"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState() {"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Test group\");"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(assignActivitiesToGroupHandler.isApplicable(userRequest));"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable() {"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Test group\");"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(assignActivitiesToGroupHandler.isApplicable(userRequest));"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler() {"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new Group()).when(groupService).getGroupByName(Mockito.anyString());"},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new Group()).when(groupService).getGroupById(Mockito.any());"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new Activity()).when(activityService).getActivityByName(Mockito.anyString());"},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":89,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d assignActivitiesToGroupHandler.handle(userRequest);"},{"lineNumber":90,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":91,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":92,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":93,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_GROUP_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":94,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":95}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/assign/group/SelectActivitieToGroupHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.assign.group;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.assign.group.SelectActivitiesToAssignToGroupHandler;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"import java.util.HashMap;"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"public class SelectActivitieToGroupHandlerTest {"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    private SelectActivitiesToAssignToGroupHandler selectActivitiesToAssignToGroupHandler;"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    private GroupService groupService;"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    private ActivityService activityService;"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests() {"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Test group\");"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"                .data(new HashMap\u003c\u003e())"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState() {"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Test group\");"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(selectActivitiesToAssignToGroupHandler.isApplicable(userRequest));"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable() {"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Test group\");"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_TO_ASSIGN_CHOICE);"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(selectActivitiesToAssignToGroupHandler.isApplicable(userRequest));"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler() {"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new Group()).when(groupService).getGroupByName(Mockito.anyString());"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d selectActivitiesToAssignToGroupHandler.handle(userRequest);"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_GROUP_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":89,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":90}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/assign/group/SelectGroupToAssignHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.assign.group;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.assign.group.SelectGroupToAssignHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"public class SelectGroupToAssignHandlerTest {"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"    private SelectGroupToAssignHandler selectGroupToAssignHandler;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    private GroupService groupService;"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests() {"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState() {"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(GlobalConstants.GROUP_BUTTON_LABEL);"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(selectGroupToAssignHandler.isApplicable(userRequest));"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableMessage() {"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(selectGroupToAssignHandler.isApplicable(userRequest));"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable() {"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(GlobalConstants.GROUP_SHOW_ALL_ASSIGN_LABEL);"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(selectGroupToAssignHandler.isApplicable(userRequest));"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler() {"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d selectGroupToAssignHandler.handle(userRequest);"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_GROUP_TO_ASSIGN_CHOICE);"},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":87}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/assign/student/AssignActivitiesToStudentHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.assign.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.StudentConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.assign.student.AssignActivitiesToStudentHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.*;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"import java.util.HashMap;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"import java.util.Map;"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"public class AssignActivitiesToStudentHandlerTest {"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    private AssignActivitiesToStudentHandler assignActivitiesToStudentHandler;"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    private StudentService studentService;"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    private ActivityService activityService;"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests() {"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Test student\");"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        Map\u003cString, Object\u003e data \u003d new HashMap\u003c\u003e();"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        data.put(StudentConstants.STUDENT_MAP_KEY, new Student());"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"                .data(data)"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState() {"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Test student\");"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(assignActivitiesToStudentHandler.isApplicable(userRequest));"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable() {"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Test student\");"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(assignActivitiesToStudentHandler.isApplicable(userRequest));"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler() {"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new Student()).when(studentService).getStudentByEmail(Mockito.any());"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new Activity()).when(activityService).getActivityByName(Mockito.anyString());"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d assignActivitiesToStudentHandler.handle(userRequest);"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":89,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":90,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_STUDENT_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":91,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":92}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/assign/student/SelectActivitiesToAssignToStudentHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.assign.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.assign.student.SelectActivitiesToAssignToStudentHandler;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.Student;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ActivityService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"import java.util.HashMap;"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"public class SelectActivitiesToAssignToStudentHandlerTest {"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    private SelectActivitiesToAssignToStudentHandler selectActivitiesToAssignToStudentHandler;"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    private StudentService studentService;"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    private ActivityService activityService;"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests() {"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"StudentName StudentLast \\n asda@add\");"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"                .data(new HashMap\u003c\u003e())"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState() {"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"StudentName StudentLast \\n asda@add\");"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(selectActivitiesToAssignToStudentHandler.isApplicable(userRequest));"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable() {"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"StudentName StudentLast \\n asda@add\");"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_STUDENT_TO_ASSIGN_CHOICE);"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(selectActivitiesToAssignToStudentHandler.isApplicable(userRequest));"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler() {"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new Student()).when(studentService).getStudentByEmail(Mockito.anyString());"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d selectActivitiesToAssignToStudentHandler.handle(userRequest);"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_STUDENT_ACTIVITY_ASSIGN_CHOICE);"},{"lineNumber":89,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":90}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/assign/student/SelectStudentToAssignHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.assign.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.assign.student.SelectStudentToAssignHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"public class SelectStudentToAssignHandlerTest {"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"    private SelectStudentToAssignHandler selectStudentToAssignHandler;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    private StudentService studentSerice;"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests() {"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState() {"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(GlobalConstants.GROUP_BUTTON_LABEL);"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(selectStudentToAssignHandler.isApplicable(userRequest));"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableMessage() {"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(selectStudentToAssignHandler.isApplicable(userRequest));"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable() {"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(GlobalConstants.STUDENT_SHOW_ALL_ASSIGN_LABEL);"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(selectStudentToAssignHandler.isApplicable(userRequest));"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler() {"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d selectStudentToAssignHandler.handle(userRequest);"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_STUDENT_TO_ASSIGN_CHOICE);"},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":87}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/group/buttons/AddGroupButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.group.buttons;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.AddGroupButtonHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.AddGroupDialog;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"public class AddGroupButtonHandlerTest {"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    @InjectMocks"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    private AddGroupButtonHandler addGroupButtonHandler;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"    private AddGroupDialog addGroupDialog;"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    private Message message;"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    private Update update;"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    private UserSession userSession;"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        message \u003d new Message();"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        update \u003d new Update();"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        update.setMessage(message);"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"                .chatId(1L)"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"                .build();"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        Mockito.when(addGroupDialog.startDialog(Mockito.any(UserRequest.class)))"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"                .thenReturn(new HandlerResponse(null, true));"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"        message.setText(GroupConstants.GROUP_ADD_BUTTON_LABEL);"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(addGroupButtonHandler.isApplicable(userRequest));"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(addGroupButtonHandler.isApplicable(userRequest));"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"    public void testIsApplicable(){"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"        message.setText(GroupConstants.GROUP_ADD_BUTTON_LABEL);"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(addGroupButtonHandler.isApplicable(userRequest));"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    public void testHandler(){"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"        HandlerResponse handlerResponse \u003d addGroupButtonHandler.handle(userRequest);"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":79}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/group/buttons/DeleteGroupButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.group.buttons;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.DeleteGroupButtonHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.DeleteGroupDialog;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"public class DeleteGroupButtonHandlerTest {"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    @InjectMocks"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    private DeleteGroupButtonHandler deleteGroupButtonHandler;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"    private DeleteGroupDialog deleteGroupDialog;"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    private Message message;"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    private Update update;"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    private UserSession userSession;"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        message \u003d new Message();"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        update \u003d new Update();"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        update.setMessage(message);"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"                .chatId(1L)"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"                .build();"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        Mockito.when(deleteGroupDialog.startDialog(Mockito.any(UserRequest.class)))"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"                .thenReturn(new HandlerResponse(null, true));"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"        message.setText(GroupConstants.GROUP_DELETE_BUTTON_LABEL);"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(deleteGroupButtonHandler.isApplicable(userRequest));"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(deleteGroupButtonHandler.isApplicable(userRequest));"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"    public void testIsApplicable(){"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"        message.setText(GroupConstants.GROUP_DELETE_BUTTON_LABEL);"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(deleteGroupButtonHandler.isApplicable(userRequest));"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    public void testHandler(){"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"        HandlerResponse handlerResponse \u003d deleteGroupButtonHandler.handle(userRequest);"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":79}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/group/buttons/GroupButtonsHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.group.buttons;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.GroupButtonsHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.AddGroupDialog;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"public class GroupButtonsHandlerTest {"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    @InjectMocks"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    private GroupButtonsHandler groupButtonsHandler;"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    private TelegramService telegramService;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"    private Message message;"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    private Update update;"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    private UserSession userSession;"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest;"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        message \u003d new Message();"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        update \u003d new Update();"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"        update.setMessage(message);"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"                .chatId(1L)"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"                .build();"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"        message.setText(GlobalConstants.GROUP_BUTTON_LABEL);"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(groupButtonsHandler.isApplicable(userRequest));"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(groupButtonsHandler.isApplicable(userRequest));"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"    public void testIsApplicable(){"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":"        message.setText(GlobalConstants.GROUP_BUTTON_LABEL);"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(groupButtonsHandler.isApplicable(userRequest));"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"    public void testHandler(){"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":"        HandlerResponse handlerResponse \u003d groupButtonsHandler.handle(userRequest);"},{"lineNumber":81,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":82,"author":{"gitId":"Mishok"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":83,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":84,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":85,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":86}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/group/buttons/ShowAllGroupsButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.group.buttons;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.GroupButtonsHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.ShowAllGroupsButtonHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"public class ShowAllGroupsButtonHandlerTest {"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"    @InjectMocks"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    private ShowAllGroupsButtonHandler showAllGroupsButtonHandler;"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    private GroupService groupService;"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    private TelegramService telegramService;"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    private UserSessionService userSessionService;"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    private GroupButtonsHandler groupButtonsHandler;"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    private Message message;"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"    private Update update;"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"    private UserSession userSession;"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest;"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"        message \u003d new Message();"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"        update \u003d new Update();"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"        update.setMessage(message);"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"                .chatId(1L)"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"                .build();"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"        message.setText(GroupConstants.GROUP_SHOW_ALL_BUTTON_LABEL);"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(showAllGroupsButtonHandler.isApplicable(userRequest));"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(showAllGroupsButtonHandler.isApplicable(userRequest));"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    public void testIsApplicable(){"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"        message.setText(GroupConstants.GROUP_SHOW_ALL_BUTTON_LABEL);"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(showAllGroupsButtonHandler.isApplicable(userRequest));"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":"    public void testHandler(){"},{"lineNumber":81,"author":{"gitId":"Mishok"},"content":"        Mockito.when(groupButtonsHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(null, true));"},{"lineNumber":82,"author":{"gitId":"Mishok"},"content":"        HandlerResponse handlerResponse \u003d showAllGroupsButtonHandler.handle(userRequest);"},{"lineNumber":83,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":84,"author":{"gitId":"Mishok"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":85,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":86,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":87}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/group/buttons/UpdateGroupButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.group.buttons;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.UpdateGroupButtonHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.UpdateGroupDialog;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"public class UpdateGroupButtonHandlerTest {"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    @InjectMocks"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    private UpdateGroupButtonHandler updateGroupButtonHandler;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"    private UpdateGroupDialog updateGroupDialog;"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    private Message message;"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    private Update update;"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    private UserSession userSession;"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"        message \u003d new Message();"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        update \u003d new Update();"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        update.setMessage(message);"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"                .chatId(1L)"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"                .build();"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        Mockito.when(updateGroupDialog.startDialog(Mockito.any(UserRequest.class)))"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"                .thenReturn(new HandlerResponse(null, true));"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"        message.setText(GroupConstants.GROUP_EDIT_BUTTON_LABEL);"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(updateGroupButtonHandler.isApplicable(userRequest));"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(updateGroupButtonHandler.isApplicable(userRequest));"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"    public void testIsApplicable(){"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"        message.setText(GroupConstants.GROUP_EDIT_BUTTON_LABEL);"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(updateGroupButtonHandler.isApplicable(userRequest));"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    public void testHandler(){"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"        HandlerResponse handlerResponse \u003d updateGroupButtonHandler.handle(userRequest);"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":79}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/group/common/CommonAskHandlersTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.group.common;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.common.AskGroupGradeHandler;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.common.AskGroupIDHandler;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.common.AskGroupNameHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.common.AskGroupYearHandler;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.telegram.StudentsBotSender;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.exceptions.TelegramApiException;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"public class CommonAskHandlersTest {"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":"    @InjectMocks"},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"    private TelegramService telegramService;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"    private StudentsBotSender studentsBotSender;"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    private KeyboardHelper keyboardHelper \u003d new KeyboardHelper();"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    private AskGroupGradeHandler askGroupGradeHandler;"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    private AskGroupIDHandler askGroupIDHandler;"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    private AskGroupNameHandler askGroupNameHandler;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    private AskGroupYearHandler askGroupYearHandler;"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest \u003d UserRequest.builder().chatId(1L).build();"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"        try {"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"            //Immediately return message"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"            Mockito.when(studentsBotSender.execute(Mockito.any(SendMessage.class))).thenAnswer(res -\u003e res);"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"            askGroupGradeHandler \u003d new AskGroupGradeHandler(telegramService, keyboardHelper);"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"            askGroupIDHandler \u003d new AskGroupIDHandler(telegramService, keyboardHelper);"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"            askGroupNameHandler \u003d new AskGroupNameHandler(telegramService, keyboardHelper);"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"            askGroupYearHandler \u003d new AskGroupYearHandler(telegramService, keyboardHelper);"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"        } catch (TelegramApiException e) {"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"            throw new RuntimeException(e);"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"    public void testAskGradeHandler(){"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d askGroupGradeHandler.handle(userRequest);"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(((SendMessage)response.getResult()).getText(), GroupConstants.ASK_FOR_GROUP_GRADE);"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"    public void testAskYearHandler(){"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d askGroupYearHandler.handle(userRequest);"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(((SendMessage)response.getResult()).getText(), GroupConstants.ASK_FOR_GROUP_YEAR);"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"    public void testAskIDHandler(){"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d askGroupIDHandler.handle(userRequest);"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(((SendMessage)response.getResult()).getText(), GroupConstants.ASK_FOR_GROUP_ID);"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":"    public void testAskNameHandler(){"},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d askGroupNameHandler.handle(userRequest);"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(((SendMessage)response.getResult()).getText(), GroupConstants.ASK_FOR_GROUP_NAME);"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":80}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/group/common/CommonGetHandlersTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.group.common;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.common.*;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.telegram.StudentsBotSender;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.exceptions.TelegramApiException;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"import java.util.Map;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"public class CommonGetHandlersTest {"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    @InjectMocks"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"    private TelegramService telegramService;"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    private StudentsBotSender studentsBotSender;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    private KeyboardHelper keyboardHelper \u003d new KeyboardHelper();"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"    private UserSession userSession;"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    private Message message;"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    private Update update;"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest;"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        try {"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"            //Immediately return message"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"            Mockito.when(studentsBotSender.execute(Mockito.any(SendMessage.class))).thenAnswer(res -\u003e res);"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"//            getGroupIDHandler \u003d new GetGroupIDHandler();"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"//            getGroupNameHandler \u003d new GetGroupNameHandler();"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"            userSession \u003d UserSession.builder().chatId(1L).data(Map.of(GroupConstants.GROUP_MAP_KEY, new Group())).build();"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"            message \u003d new Message();"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"            update \u003d new Update();"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"            update.setMessage(message);"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"            userRequest \u003d UserRequest.builder().userSession(userSession).update(update).chatId(1L).build();"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"        } catch (TelegramApiException e) {"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"            throw new RuntimeException(e);"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"        }"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"    public void testValidInputGetGradeHandler(){"},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"        final int grade \u003d 3;"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"        GetGroupGradeHandler getGroupGradeHandler \u003d new GetGroupGradeHandler(telegramService, keyboardHelper);"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"        message.setText(Integer.toString(grade));"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d getGroupGradeHandler.handle(userRequest);"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(((Group)userRequest.getUserSession().getData().get(GroupConstants.GROUP_MAP_KEY)).getGrade(), grade);"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"    public void testInvalidInputGetGradeHandler(){"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"        final String input \u003d \"Not valid grade\";"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"        GetGroupGradeHandler getGroupGradeHandler \u003d new GetGroupGradeHandler(telegramService, keyboardHelper);"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"        message.setText(input);"},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":81,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d getGroupGradeHandler.handle(userRequest);"},{"lineNumber":82,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":83,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(((SendMessage)response.getResult()).getText(), String.format(GroupConstants.WRONG_GRADE, input));"},{"lineNumber":84,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(response.isSuccess());"},{"lineNumber":85,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":87,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":88,"author":{"gitId":"Mishok"},"content":"    public void testValidInputGetYearHandler(){"},{"lineNumber":89,"author":{"gitId":"Mishok"},"content":"        final int year \u003d 2015;"},{"lineNumber":90,"author":{"gitId":"Mishok"},"content":"        GetGroupYearHandler getGroupYearHandler \u003d new GetGroupYearHandler(telegramService, keyboardHelper);"},{"lineNumber":91,"author":{"gitId":"Mishok"},"content":"        message.setText(Integer.toString(year));"},{"lineNumber":92,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":93,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d getGroupYearHandler.handle(userRequest);"},{"lineNumber":94,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":95,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(((Group)userRequest.getUserSession().getData().get(GroupConstants.GROUP_MAP_KEY)).getYear(), year);"},{"lineNumber":96,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":97,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":98,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":99,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":100,"author":{"gitId":"Mishok"},"content":"    public void testInvalidInputGetYearHandler(){"},{"lineNumber":101,"author":{"gitId":"Mishok"},"content":"        final String input \u003d \"Not valid year\";"},{"lineNumber":102,"author":{"gitId":"Mishok"},"content":"        GetGroupYearHandler getGroupYearHandler \u003d new GetGroupYearHandler(telegramService, keyboardHelper);"},{"lineNumber":103,"author":{"gitId":"Mishok"},"content":"        message.setText(input);"},{"lineNumber":104,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":105,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d getGroupYearHandler.handle(userRequest);"},{"lineNumber":106,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":107,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(((SendMessage)response.getResult()).getText(), String.format(GroupConstants.WRONG_YEAR, input));"},{"lineNumber":108,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(response.isSuccess());"},{"lineNumber":109,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":111,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":112,"author":{"gitId":"Mishok"},"content":"    public void testValidInputGetIDHandler(){"},{"lineNumber":113,"author":{"gitId":"Mishok"},"content":"        final int input \u003d 2015;"},{"lineNumber":114,"author":{"gitId":"Mishok"},"content":"        GetGroupIDHandler getGroupIDHandler \u003d new GetGroupIDHandler();"},{"lineNumber":115,"author":{"gitId":"Mishok"},"content":"        message.setText(Integer.toString(input));"},{"lineNumber":116,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":117,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d getGroupIDHandler.handle(userRequest);"},{"lineNumber":118,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":119,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(((Group)userRequest.getUserSession().getData().get(GroupConstants.GROUP_MAP_KEY)).getId(), Integer.toString(input));"},{"lineNumber":120,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":121,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":123,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":124,"author":{"gitId":"Mishok"},"content":"    public void testValidInputGetNameHandler(){"},{"lineNumber":125,"author":{"gitId":"Mishok"},"content":"        final String input \u003d \"Some name\";"},{"lineNumber":126,"author":{"gitId":"Mishok"},"content":"        GetGroupNameHandler getGroupNameHandler \u003d new GetGroupNameHandler();"},{"lineNumber":127,"author":{"gitId":"Mishok"},"content":"        message.setText(input);"},{"lineNumber":128,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":129,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d getGroupNameHandler.handle(userRequest);"},{"lineNumber":130,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":131,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(((Group)userRequest.getUserSession().getData().get(GroupConstants.GROUP_MAP_KEY)).getName(), input);"},{"lineNumber":132,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":133,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":134,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":135,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":135}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/group/dialogs/AddDialogHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.group.dialogs;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.AddGroupDialog;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.GroupButtonsHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.common.*;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"import java.util.HashMap;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"public class AddDialogHandlerTest {"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    @InjectMocks"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    private AddGroupDialog addGroupDialog;"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    private AskGroupNameHandler askGroupNameHandler;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    private GetGroupNameHandler getGroupNameHandler;"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"    private AskGroupGradeHandler askGroupGradeHandler;"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    private GetGroupGradeHandler getGroupGradeHandler;"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"    private AskGroupYearHandler askGroupYearHandler;"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    private GetGroupYearHandler getGroupYearHandler;"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"    private GroupButtonsHandler groupButtonsHandler;"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"    private UserSessionService userSessionService;"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    private GroupService groupService;"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"    private TelegramService telegramService;"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest;"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"    private UserSession userSession;"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"    private Update update;"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"    private Message message;"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"        userSession \u003d UserSession.builder().data(new HashMap\u003c\u003e()).build();"},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"        userRequest \u003d UserRequest.builder().userSession(userSession).chatId(1L).build();"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"        message \u003d new Message();"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"        update \u003d new Update();"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"        update.setMessage(message);"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    public void testStartDialog(){"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"        final String message \u003d \"Dialog started\";"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"        Mockito.when(askGroupNameHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d addGroupDialog.startDialog(userRequest);"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":81,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":82,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":84,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":85,"author":{"gitId":"Mishok"},"content":"    public void testIsApplicable(){"},{"lineNumber":86,"author":{"gitId":"Mishok"},"content":"        userSession.setDialogState(DialogState.ADD_GROUP);"},{"lineNumber":87,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(addGroupDialog.isApplicable(userRequest));"},{"lineNumber":88,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":90,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":91,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableDialogState(){"},{"lineNumber":92,"author":{"gitId":"Mishok"},"content":"        userSession.setDialogState(DialogState.UPDATE_GROUP);"},{"lineNumber":93,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(addGroupDialog.isApplicable(userRequest));"},{"lineNumber":94,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":96,"author":{"gitId":"KateKolokhina"},"content":"    //todo"},{"lineNumber":97,"author":{"gitId":"KateKolokhina"},"content":"    // take off comment"},{"lineNumber":98,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":99,"author":{"gitId":"Mishok"},"content":"    public void testFinishActionsSuccessfulGroupAdd(){"},{"lineNumber":100,"author":{"gitId":"Mishok"},"content":"        final String message \u003d \"Dialog finish actions true\";"},{"lineNumber":101,"author":{"gitId":"Mishok"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":102,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_YEAR);"},{"lineNumber":103,"author":{"gitId":"Mishok"},"content":"        userSession.getData().put(\"group\", new Group());"},{"lineNumber":104,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":105,"author":{"gitId":"Mishok"},"content":"        Mockito.when(getGroupYearHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":106,"author":{"gitId":"KateKolokhina"},"content":"      //  Mockito.when(groupService.addGroup(Mockito.any(Group.class))).thenReturn(true);"},{"lineNumber":107,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":108,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d addGroupDialog.handle(userRequest);"},{"lineNumber":109,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":110,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":111,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":112,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"KateKolokhina"},"content":"    //todo"},{"lineNumber":114,"author":{"gitId":"KateKolokhina"},"content":"    // take off comment"},{"lineNumber":115,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":116,"author":{"gitId":"Mishok"},"content":"    public void testFinishActionsUnsuccessfulGroupAdd(){"},{"lineNumber":117,"author":{"gitId":"Mishok"},"content":"        final String message \u003d \"Dialog finish actions false\";"},{"lineNumber":118,"author":{"gitId":"Mishok"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":119,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_YEAR);"},{"lineNumber":120,"author":{"gitId":"Mishok"},"content":"        userSession.getData().put(\"group\", new Group());"},{"lineNumber":121,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":122,"author":{"gitId":"Mishok"},"content":"        Mockito.when(getGroupYearHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":123,"author":{"gitId":"KateKolokhina"},"content":"       // Mockito.when(groupService.addGroup(Mockito.any(Group.class))).thenReturn(false);"},{"lineNumber":124,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":125,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d addGroupDialog.handle(userRequest);"},{"lineNumber":126,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":127,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":128,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":129,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":131,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":132,"author":{"gitId":"Mishok"},"content":"    public void testDialogType(){"},{"lineNumber":133,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(addGroupDialog.getDialogType(), DialogState.ADD_GROUP);"},{"lineNumber":134,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":129,"KateKolokhina":6}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/group/dialogs/DeleteDialogHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.group.dialogs;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.DeleteGroupDialog;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.GroupButtonsHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.common.*;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"import java.util.HashMap;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"public class DeleteDialogHandlerTest {"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    @InjectMocks"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    private DeleteGroupDialog deleteGroupDialog;"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    private AskGroupIDHandler askGroupIDHandler;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    private GetGroupIDHandler getGroupIDHandler;"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"    private GroupButtonsHandler groupButtonsHandler;"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    private UserSessionService userSessionService;"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"    private GroupService groupService;"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    private TelegramService telegramService;"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest;"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"    private UserSession userSession;"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    private Update update;"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"    private Message message;"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"        userSession \u003d UserSession.builder().data(new HashMap\u003c\u003e()).build();"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"        userRequest \u003d UserRequest.builder().userSession(userSession).chatId(1L).build();"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"        message \u003d new Message();"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"        update \u003d new Update();"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"        update.setMessage(message);"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":"    public void testStartDialog(){"},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"        final String message \u003d \"Dialog started\";"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"        Mockito.when(askGroupIDHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d deleteGroupDialog.startDialog(userRequest);"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"    public void testIsApplicable(){"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"        userSession.setDialogState(DialogState.DELETE_GROUP);"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(deleteGroupDialog.isApplicable(userRequest));"},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":82,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":83,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableDialogState(){"},{"lineNumber":84,"author":{"gitId":"Mishok"},"content":"        userSession.setDialogState(DialogState.UPDATE_GROUP);"},{"lineNumber":85,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(deleteGroupDialog.isApplicable(userRequest));"},{"lineNumber":86,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"KateKolokhina"},"content":"    //todo"},{"lineNumber":88,"author":{"gitId":"KateKolokhina"},"content":"    // take off comment"},{"lineNumber":89,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":90,"author":{"gitId":"Mishok"},"content":"    public void testFinishActionsSuccessfulGroupDelete(){"},{"lineNumber":91,"author":{"gitId":"Mishok"},"content":"        final String message \u003d \"Dialog finish actions true\";"},{"lineNumber":92,"author":{"gitId":"Mishok"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":93,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ID);"},{"lineNumber":94,"author":{"gitId":"Mishok"},"content":"        Group group \u003d new Group();"},{"lineNumber":95,"author":{"gitId":"Mishok"},"content":"        group.setId(\"id\");"},{"lineNumber":96,"author":{"gitId":"Mishok"},"content":"        userSession.getData().put(\"group\", group);"},{"lineNumber":97,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":98,"author":{"gitId":"Mishok"},"content":"        Mockito.when(getGroupIDHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":99,"author":{"gitId":"KateKolokhina"},"content":"      //  Mockito.when(groupService.deleteGroup(Mockito.anyString())).thenReturn(true);"},{"lineNumber":100,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":101,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d deleteGroupDialog.handle(userRequest);"},{"lineNumber":102,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":103,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":104,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":105,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"KateKolokhina"},"content":"    //todo"},{"lineNumber":107,"author":{"gitId":"KateKolokhina"},"content":"    // take off comment"},{"lineNumber":108,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":109,"author":{"gitId":"Mishok"},"content":"    public void testFinishActionsUnsuccessfulGroupDelete(){"},{"lineNumber":110,"author":{"gitId":"Mishok"},"content":"        final String message \u003d \"Dialog finish actions false\";"},{"lineNumber":111,"author":{"gitId":"Mishok"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":112,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ID);"},{"lineNumber":113,"author":{"gitId":"Mishok"},"content":"        Group group \u003d new Group();"},{"lineNumber":114,"author":{"gitId":"Mishok"},"content":"        group.setId(\"id\");"},{"lineNumber":115,"author":{"gitId":"Mishok"},"content":"        userSession.getData().put(\"group\", group);"},{"lineNumber":116,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":117,"author":{"gitId":"Mishok"},"content":"        Mockito.when(getGroupIDHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":118,"author":{"gitId":"KateKolokhina"},"content":"      //  Mockito.when(groupService.deleteGroup(Mockito.anyString())).thenReturn(false);"},{"lineNumber":119,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":120,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d deleteGroupDialog.handle(userRequest);"},{"lineNumber":121,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":122,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":123,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":124,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":126,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":127,"author":{"gitId":"Mishok"},"content":"    public void testDialogType(){"},{"lineNumber":128,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(deleteGroupDialog.getDialogType(), DialogState.DELETE_GROUP);"},{"lineNumber":129,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":124,"KateKolokhina":6}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/group/dialogs/UpdateDialogHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.handler.group.dialogs;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.UpdateGroupDialog;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.GroupButtonsHandler;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.handler.impl.group.common.*;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.Group;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mock;"},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"import org.mockito.Mockito;"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"import java.util.HashMap;"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"public class UpdateDialogHandlerTest {"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    @InjectMocks"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":"    private UpdateGroupDialog updateGroupDialog;"},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"    private AskGroupIDHandler askGroupIDHandler;"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    private GetGroupIDHandler getGroupIDHandler;"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":"    private AskGroupNameHandler askGroupNameHandler;"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"    private GetGroupNameHandler getGroupNameHandler;"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"    private AskGroupGradeHandler askGroupGradeHandler;"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    private GetGroupGradeHandler getGroupGradeHandler;"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"    private AskGroupYearHandler askGroupYearHandler;"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"    private GetGroupYearHandler getGroupYearHandler;"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    private GroupButtonsHandler groupButtonsHandler;"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"    private UserSessionService userSessionService;"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"    private GroupService groupService;"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"    @Mock"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":"    private TelegramService telegramService;"},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":"    private UserRequest userRequest;"},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":"    private UserSession userSession;"},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    private Update update;"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"    private Message message;"},{"lineNumber":65,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":66,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":67,"author":{"gitId":"Mishok"},"content":"    public void initTests(){"},{"lineNumber":68,"author":{"gitId":"Mishok"},"content":"        userSession \u003d UserSession.builder().data(new HashMap\u003c\u003e()).build();"},{"lineNumber":69,"author":{"gitId":"Mishok"},"content":"        userRequest \u003d UserRequest.builder().userSession(userSession).chatId(1L).build();"},{"lineNumber":70,"author":{"gitId":"Mishok"},"content":"        message \u003d new Message();"},{"lineNumber":71,"author":{"gitId":"Mishok"},"content":"        update \u003d new Update();"},{"lineNumber":72,"author":{"gitId":"Mishok"},"content":"        update.setMessage(message);"},{"lineNumber":73,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":75,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":76,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":77,"author":{"gitId":"Mishok"},"content":"    public void testStartDialog(){"},{"lineNumber":78,"author":{"gitId":"Mishok"},"content":"        final String message \u003d \"Dialog started\";"},{"lineNumber":79,"author":{"gitId":"Mishok"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":80,"author":{"gitId":"Mishok"},"content":"        Mockito.when(askGroupIDHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":81,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":82,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d updateGroupDialog.startDialog(userRequest);"},{"lineNumber":83,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":84,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":85,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":86,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":88,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":89,"author":{"gitId":"Mishok"},"content":"    public void testIsApplicable(){"},{"lineNumber":90,"author":{"gitId":"Mishok"},"content":"        userSession.setDialogState(DialogState.UPDATE_GROUP);"},{"lineNumber":91,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(updateGroupDialog.isApplicable(userRequest));"},{"lineNumber":92,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":94,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":95,"author":{"gitId":"Mishok"},"content":"    public void testIsNotApplicableDialogState(){"},{"lineNumber":96,"author":{"gitId":"Mishok"},"content":"        userSession.setDialogState(DialogState.ADD_GROUP);"},{"lineNumber":97,"author":{"gitId":"Mishok"},"content":"        Assertions.assertFalse(updateGroupDialog.isApplicable(userRequest));"},{"lineNumber":98,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":99,"author":{"gitId":"KateKolokhina"},"content":"    //todo"},{"lineNumber":100,"author":{"gitId":"KateKolokhina"},"content":"    // take off comment"},{"lineNumber":101,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":102,"author":{"gitId":"Mishok"},"content":"    public void testFinishActionsSuccessfulGroupUpdate(){"},{"lineNumber":103,"author":{"gitId":"Mishok"},"content":"        final String message \u003d \"Dialog finish actions true\";"},{"lineNumber":104,"author":{"gitId":"Mishok"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":105,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_YEAR);"},{"lineNumber":106,"author":{"gitId":"Mishok"},"content":"        userSession.getData().put(\"group\", new Group());"},{"lineNumber":107,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":108,"author":{"gitId":"Mishok"},"content":"        Mockito.when(getGroupYearHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":109,"author":{"gitId":"KateKolokhina"},"content":"     //   Mockito.when(groupService.updateGroup(Mockito.any(Group.class))).thenReturn(true);"},{"lineNumber":110,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":111,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d updateGroupDialog.handle(userRequest);"},{"lineNumber":112,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":113,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":114,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":115,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":116,"author":{"gitId":"KateKolokhina"},"content":"    //todo"},{"lineNumber":117,"author":{"gitId":"KateKolokhina"},"content":"    // take off comment"},{"lineNumber":118,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":119,"author":{"gitId":"Mishok"},"content":"    public void testFinishActionsUnsuccessfulGroupUpdate(){"},{"lineNumber":120,"author":{"gitId":"Mishok"},"content":"        final String message \u003d \"Dialog finish actions false\";"},{"lineNumber":121,"author":{"gitId":"Mishok"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":122,"author":{"gitId":"Mishok"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_YEAR);"},{"lineNumber":123,"author":{"gitId":"Mishok"},"content":"        userSession.getData().put(\"group\", new Group());"},{"lineNumber":124,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":125,"author":{"gitId":"Mishok"},"content":"        Mockito.when(getGroupYearHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":126,"author":{"gitId":"KateKolokhina"},"content":"     //   Mockito.when(groupService.updateGroup(Mockito.any(Group.class))).thenReturn(false);"},{"lineNumber":127,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":128,"author":{"gitId":"Mishok"},"content":"        HandlerResponse response \u003d updateGroupDialog.handle(userRequest);"},{"lineNumber":129,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":130,"author":{"gitId":"Mishok"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":131,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":132,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":133,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":134,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":135,"author":{"gitId":"Mishok"},"content":"    public void testDialogType(){"},{"lineNumber":136,"author":{"gitId":"Mishok"},"content":"        Assertions.assertEquals(updateGroupDialog.getDialogType(), DialogState.UPDATE_GROUP);"},{"lineNumber":137,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":138,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":132,"KateKolokhina":6}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/grouptemplate/buttons/AddTemplateButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.grouptemplate.buttons;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.AddTemplateButtonHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.dialog.AddTemplateDialog;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mock;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mockito;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"public class AddTemplateButtonHandlerTest {"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    @InjectMocks"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AddTemplateButtonHandler addTemplateButtonHandler;"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AddTemplateDialog addTemplateDialog;"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Message message;"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Update update;"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSession userSession;"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserRequest userRequest;"},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"    @BeforeEach"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void initTests(){"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"        message \u003d new Message();"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"        update \u003d new Update();"},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"        update.setMessage(message);"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"                .chatId(1L)"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":"                .build();"},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(addTemplateDialog.startDialog(Mockito.any(UserRequest.class)))"},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"                .thenReturn(new HandlerResponse(null, true));"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(GroupTemplateConstants.GROUP_TEMPLATE_ADD_BUTTON_LABEL);"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(addTemplateButtonHandler.isApplicable(userRequest));"},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(addTemplateButtonHandler.isApplicable(userRequest));"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsApplicable(){"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(GroupTemplateConstants.GROUP_TEMPLATE_ADD_BUTTON_LABEL);"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(addTemplateButtonHandler.isApplicable(userRequest));"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testHandler(){"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse handlerResponse \u003d addTemplateButtonHandler.handle(userRequest);"},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":81}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/grouptemplate/buttons/DeleteTemplateButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.grouptemplate.buttons;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.DeleteTemplateButtonHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.dialog.DeleteTemplateDialog;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mock;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mockito;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"public class DeleteTemplateButtonHandlerTest {"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    @InjectMocks"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"    private DeleteTemplateButtonHandler deleteTemplateButtonHandler;"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    private DeleteTemplateDialog deleteTemplateDialog;"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Message message;"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Update update;"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSession userSession;"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserRequest userRequest;"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"    @BeforeEach"},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void initTests(){"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"        message \u003d new Message();"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"        update \u003d new Update();"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"        update.setMessage(message);"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"                .chatId(1L)"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"                .build();"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(deleteTemplateDialog.startDialog(Mockito.any(UserRequest.class)))"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"                .thenReturn(new HandlerResponse(null, true));"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(GroupTemplateConstants.GROUP_TEMPLATE_DELETE_BUTTON_LABEL);"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(deleteTemplateButtonHandler.isApplicable(userRequest));"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(deleteTemplateButtonHandler.isApplicable(userRequest));"},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsApplicable(){"},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(GroupTemplateConstants.GROUP_TEMPLATE_DELETE_BUTTON_LABEL);"},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(deleteTemplateButtonHandler.isApplicable(userRequest));"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testHandler(){"},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse handlerResponse \u003d deleteTemplateButtonHandler.handle(userRequest);"},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":79}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/grouptemplate/buttons/ShowAllGroupTemplatesButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.grouptemplate.buttons;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.ShowAllGroupTemplatesButtonHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.TemplateButtonsHandler;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mock;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mockito;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"public class ShowAllGroupTemplatesButtonHandlerTest {"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    @InjectMocks"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    private ShowAllGroupTemplatesButtonHandler showAllGroupTemplatesButtonHandler;"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TemplateButtonsHandler templateButtonsHandler;"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GroupTemplateService templateService;"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Message message;"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Update update;"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSession userSession;"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserRequest userRequest;"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"    @BeforeEach"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void initTests(){"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"        message \u003d new Message();"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":"        update \u003d new Update();"},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"        update.setMessage(message);"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":"                .chatId(1L)"},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"                .build();"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(GroupTemplateConstants.SHOW_GROUP_TEMPLATE);"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(showAllGroupTemplatesButtonHandler.isApplicable(userRequest));"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(showAllGroupTemplatesButtonHandler.isApplicable(userRequest));"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsApplicable(){"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(GroupTemplateConstants.GROUP_TEMPLATE_SHOW_ALL_BUTTON_LABEL);"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(showAllGroupTemplatesButtonHandler.isApplicable(userRequest));"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testHandler(){"},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(templateButtonsHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(null, true));"},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse handlerResponse \u003d showAllGroupTemplatesButtonHandler.handle(userRequest);"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":82,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":83}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/grouptemplate/buttons/TemplateButtonsHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.grouptemplate.buttons;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.TemplateButtonsHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mock;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mockito;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"public class TemplateButtonsHandlerTest {"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    @InjectMocks"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TemplateButtonsHandler templateButtonsHandler;"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TelegramService telegramService;"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Message message;"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Update update;"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSession userSession;"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserRequest userRequest;"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"    @BeforeEach"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void initTests(){"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"        message \u003d new Message();"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":"        update \u003d new Update();"},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"        update.setMessage(message);"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":"                .chatId(1L)"},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"                .build();"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(GlobalConstants.GROUP_TEMPLATES_BUTTON_LABEL);"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(templateButtonsHandler.isApplicable(userRequest));"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(templateButtonsHandler.isApplicable(userRequest));"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsApplicable(){"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(GlobalConstants.GROUP_TEMPLATES_BUTTON_LABEL);"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(templateButtonsHandler.isApplicable(userRequest));"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testHandler(){"},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse handlerResponse \u003d templateButtonsHandler.handle(userRequest);"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":82,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":83,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":84,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":85}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/grouptemplate/buttons/UpdateTemplateButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.grouptemplate.buttons;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.UpdateTemplateButtonHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.dialog.UpdateTemplateDialog;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mock;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mockito;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"public class UpdateTemplateButtonHandlerTest {"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    @InjectMocks"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UpdateTemplateButtonHandler updateTemplateButtonHandler;"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UpdateTemplateDialog updateTemplateDialog;"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Message message;"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Update update;"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSession userSession;"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserRequest userRequest;"},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"    @BeforeEach"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void initTests(){"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"        message \u003d new Message();"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"        update \u003d new Update();"},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"        update.setMessage(message);"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"                .chatId(1L)"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":"                .build();"},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(updateTemplateDialog.startDialog(Mockito.any(UserRequest.class)))"},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"                .thenReturn(new HandlerResponse(null, true));"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(GroupTemplateConstants.GROUP_TEMPLATE_EDIT_BUTTON_LABEL);"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(updateTemplateButtonHandler.isApplicable(userRequest));"},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_GROUP_ACTION_CHOICE);"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(updateTemplateButtonHandler.isApplicable(userRequest));"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsApplicable(){"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(GroupTemplateConstants.GROUP_TEMPLATE_EDIT_BUTTON_LABEL);"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_ACTION_CHOICE);"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(updateTemplateButtonHandler.isApplicable(userRequest));"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testHandler(){"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse handlerResponse \u003d updateTemplateButtonHandler.handle(userRequest);"},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":81}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/grouptemplate/common/AskTemplateHandlersTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.grouptemplate.common;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.*;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.telegram.StudentsBotSender;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mock;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mockito;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.exceptions.TelegramApiException;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"public class AskTemplateHandlersTest {"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"    @InjectMocks"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TelegramService telegramService;"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"    private StudentsBotSender studentsBotSender;"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    private KeyboardHelper keyboardHelper \u003d new KeyboardHelper();"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AskTemplateIdHandler askTemplateIdHandler;"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AskTemplateNameHandler askTemplateNameHandler;"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AskTemplateGradeHandler askTemplateGradeHandler;"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AskTemplateYearHandler askTemplateYearHandler;"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserRequest userRequest \u003d UserRequest.builder().chatId(1L).build();"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"    @BeforeEach"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void initTests(){"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"        try {"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"            //Immediately return message"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"            Mockito.when(studentsBotSender.execute(Mockito.any(SendMessage.class))).thenAnswer(res -\u003e res);"},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"            askTemplateIdHandler \u003d new AskTemplateIdHandler(telegramService, keyboardHelper);"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"            askTemplateNameHandler \u003d new AskTemplateNameHandler(telegramService, keyboardHelper);"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"            askTemplateGradeHandler \u003d new AskTemplateGradeHandler(telegramService, keyboardHelper);"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":"            askTemplateYearHandler \u003d new AskTemplateYearHandler(telegramService, keyboardHelper);"},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"        } catch (TelegramApiException e) {"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"            throw new RuntimeException(e);"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":"        }"},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testAskGradeHandler(){"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d askTemplateGradeHandler.handle(userRequest);"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((SendMessage)response.getResult()).getText(),"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"                GroupTemplateConstants.ASK_FOR_GROUP_TEMPLATE_GRADE + \"\\n\\n\""},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":"                        + GlobalConstants.SKIP_STEP);"},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testAskYearHandler(){"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d askTemplateYearHandler.handle(userRequest);"},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((SendMessage)response.getResult()).getText(),"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"                GroupTemplateConstants.ASK_FOR_GROUP_TEMPLATE_YEAR + \"\\n\\n\""},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"                        + GlobalConstants.SKIP_STEP);"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testAskIDHandler(){"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d askTemplateIdHandler.handle(userRequest);"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((SendMessage)response.getResult()).getText(),"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"                GroupTemplateConstants.ASK_FOR_GROUP_TEMPLATE_ID);"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testAskNameHandler(){"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d askTemplateNameHandler.handle(userRequest);"},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((SendMessage)response.getResult()).getText(),"},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"                GroupTemplateConstants.ASK_FOR_GROUP_TEMPLATE_NAME + \"\\n\\n\""},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"                        + GlobalConstants.SKIP_STEP);"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":81}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/grouptemplate/common/GetTemplateHandlersTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.grouptemplate.common;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.GroupTemplateConstants;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.GetTemplateGradeHandler;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.GetTemplateIdHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.GetTemplateNameHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.GetTemplateYearHandler;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.*;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.telegram.StudentsBotSender;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mock;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.Map;"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"public class GetTemplateHandlersTest {"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"    @InjectMocks"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TelegramService telegramService;"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GroupTemplateService groupTemplateService;"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"    private StudentsBotSender studentsBotSender;"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    private KeyboardHelper keyboardHelper \u003d new KeyboardHelper();"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSession userSession;"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Message message;"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Update update;"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserRequest userRequest;"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"    @BeforeEach"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void initTests() {"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession \u003d UserSession.builder().chatId(1L).data(Map.of(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY, new GroupTemplate())).build();"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"        message \u003d new Message();"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"        update \u003d new Update();"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":"        update.setMessage(message);"},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest \u003d UserRequest.builder().userSession(userSession).update(update).chatId(1L).build();"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testValidInputGetIDHandler() {"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String input \u003d \"id\";"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"        GetTemplateIdHandler getTemplateIdHandler \u003d new GetTemplateIdHandler(groupTemplateService, telegramService, keyboardHelper);"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(input);"},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d getTemplateIdHandler.handle(userRequest);"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((GroupTemplate)userRequest.getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY)).getId(), input);"},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testValidInputGetNameHandler() {"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String input \u003d \"Some name\";"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":"        GetTemplateNameHandler getTemplateNameHandler \u003d new GetTemplateNameHandler();"},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(input);"},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d getTemplateNameHandler.handle(userRequest);"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((GroupTemplate)userRequest.getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY)).getName(), input);"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testValidInputGetGradeHandler() {"},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"        final int input \u003d 4;"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":"        GetTemplateGradeHandler getTemplateGradeHandler \u003d new GetTemplateGradeHandler(telegramService, keyboardHelper);"},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(Integer.toString(input));"},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d getTemplateGradeHandler.handle(userRequest);"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((GroupTemplate)userRequest.getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY)).getGrade(), input);"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":83,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":84,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testValidInputGetYearHandler() {"},{"lineNumber":85,"author":{"gitId":"Iryna Zubrytska"},"content":"        final int input \u003d 2022;"},{"lineNumber":86,"author":{"gitId":"Iryna Zubrytska"},"content":"        GetTemplateYearHandler getTemplateYearHandler \u003d new GetTemplateYearHandler(telegramService, keyboardHelper);"},{"lineNumber":87,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(Integer.toString(input));"},{"lineNumber":88,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d getTemplateYearHandler.handle(userRequest);"},{"lineNumber":89,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((GroupTemplate)userRequest.getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY)).getYear(), input);"},{"lineNumber":90,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":91,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":93,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":94,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testSkippedInputGetNameHandler() {"},{"lineNumber":95,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String input \u003d \"-\";"},{"lineNumber":96,"author":{"gitId":"Iryna Zubrytska"},"content":"        GetTemplateNameHandler getTemplateNameHandler \u003d new GetTemplateNameHandler();"},{"lineNumber":97,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(input);"},{"lineNumber":98,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d getTemplateNameHandler.handle(userRequest);"},{"lineNumber":99,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((GroupTemplate)userRequest.getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY)).getName(), null);"},{"lineNumber":100,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":101,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":103,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":104,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testSkippedInputGetGradeHandler() {"},{"lineNumber":105,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String input \u003d \"-\";"},{"lineNumber":106,"author":{"gitId":"Iryna Zubrytska"},"content":"        GetTemplateGradeHandler getTemplateGradeHandler \u003d new GetTemplateGradeHandler(telegramService, keyboardHelper);"},{"lineNumber":107,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(input);"},{"lineNumber":108,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d getTemplateGradeHandler.handle(userRequest);"},{"lineNumber":109,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((GroupTemplate)userRequest.getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY)).getGrade(), null);"},{"lineNumber":110,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":111,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":112,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":113,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":114,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testSkippedInputGetYearHandler() {"},{"lineNumber":115,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String input \u003d \"-\";"},{"lineNumber":116,"author":{"gitId":"Iryna Zubrytska"},"content":"        GetTemplateYearHandler getTemplateYearHandler \u003d new GetTemplateYearHandler(telegramService, keyboardHelper);"},{"lineNumber":117,"author":{"gitId":"Iryna Zubrytska"},"content":"        message.setText(input);"},{"lineNumber":118,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d getTemplateYearHandler.handle(userRequest);"},{"lineNumber":119,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(((GroupTemplate)userRequest.getUserSession().getData().get(GroupTemplateConstants.GROUP_TEMPLATE_MAP_KEY)).getYear(), null);"},{"lineNumber":120,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":121,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":122}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/grouptemplate/dialogs/AddTemplateDialogTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.grouptemplate.dialogs;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.TemplateButtonsHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.AskTemplateNameHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.AskTemplateYearHandler;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.GetTemplateNameHandler;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.GetTemplateYearHandler;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.dialog.AddTemplateDialog;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.*;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mock;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mockito;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.HashMap;"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"public class AddTemplateDialogTest {"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":"    @InjectMocks"},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AddTemplateDialog addTemplateDialog;"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AskTemplateNameHandler askTemplateNameHandler;"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GetTemplateNameHandler getTemplateNameHandler;"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AskTemplateYearHandler askTemplateYearHandler;"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GetTemplateYearHandler getTemplateYearHandler;"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TemplateButtonsHandler templateButtonsHandler;"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSessionService userSessionService;"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GroupTemplateService groupTemplateService;"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TelegramService telegramService;"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserRequest userRequest;"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSession userSession;"},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Update update;"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Message message;"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"    @BeforeEach"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void initTests(){"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession \u003d UserSession.builder().data(new HashMap\u003c\u003e()).build();"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest \u003d UserRequest.builder().userSession(userSession).chatId(1L).build();"},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":"        message \u003d new Message();"},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"        update \u003d new Update();"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"        update.setMessage(message);"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testDialogType(){"},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(addTemplateDialog.getDialogType(), DialogState.ADD_GROUP_TEMPLATE);"},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testStartDialog(){"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String message \u003d \"Dialog started\";"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(askTemplateNameHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":82,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":83,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d addTemplateDialog.startDialog(userRequest);"},{"lineNumber":84,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":85,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":86,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":87,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":88,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":89,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":90,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsApplicable(){"},{"lineNumber":91,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setDialogState(DialogState.ADD_GROUP_TEMPLATE);"},{"lineNumber":92,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(addTemplateDialog.isApplicable(userRequest));"},{"lineNumber":93,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":95,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":96,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableDialogState(){"},{"lineNumber":97,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setDialogState(DialogState.UPDATE_GROUP_TEMPLATE);"},{"lineNumber":98,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(addTemplateDialog.isApplicable(userRequest));"},{"lineNumber":99,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":100,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":101,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":102,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testFinishActionsSuccessfulTemplateAdd() {"},{"lineNumber":103,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String message \u003d \"Dialog finish actions true\";"},{"lineNumber":104,"author":{"gitId":"Iryna Zubrytska"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":105,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_YEAR);"},{"lineNumber":106,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.getData().put(\"group template\", new GroupTemplate());"},{"lineNumber":107,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":108,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(getTemplateYearHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":109,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":110,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d addTemplateDialog.handle(userRequest);"},{"lineNumber":111,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":112,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":113,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":114,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":116,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":117,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testFinishActionsUnsuccessfulTemplateAdd() {"},{"lineNumber":118,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String message \u003d \"Dialog finish actions false\";"},{"lineNumber":119,"author":{"gitId":"Iryna Zubrytska"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":120,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_YEAR);"},{"lineNumber":121,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.getData().put(\"group template\", new GroupTemplate());"},{"lineNumber":122,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":123,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(getTemplateYearHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":124,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":125,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d addTemplateDialog.handle(userRequest);"},{"lineNumber":126,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":127,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":128,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":129,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":130}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/grouptemplate/dialogs/DeleteTemplateDialogTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.grouptemplate.dialogs;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.AskTemplateIdHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.GetTemplateIdHandler;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.TemplateButtonsHandler;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.dialog.DeleteTemplateDialog;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.*;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mock;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mockito;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.HashMap;"},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":"public class DeleteTemplateDialogTest {"},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    @InjectMocks"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    private DeleteTemplateDialog deleteTemplateDialog;"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AskTemplateIdHandler askTemplateIdHandler;"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GetTemplateIdHandler getTemplateIdHandler;"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TemplateButtonsHandler templateButtonsHandler;"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSessionService userSessionService;"},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GroupTemplateService groupTemplateService;"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TelegramService telegramService;"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserRequest userRequest;"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSession userSession;"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Update update;"},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Message message;"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":"    @BeforeEach"},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void initTests(){"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession \u003d UserSession.builder().data(new HashMap\u003c\u003e()).build();"},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest \u003d UserRequest.builder().userSession(userSession).chatId(1L).build();"},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":"        message \u003d new Message();"},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"        update \u003d new Update();"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":"        update.setMessage(message);"},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testDialogType(){"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(deleteTemplateDialog.getDialogType(), DialogState.DELETE_GROUP_TEMPLATE);"},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testStartDialog(){"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String message \u003d \"Dialog started\";"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(askTemplateIdHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d deleteTemplateDialog.startDialog(userRequest);"},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":82,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsApplicable(){"},{"lineNumber":83,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setDialogState(DialogState.DELETE_GROUP_TEMPLATE);"},{"lineNumber":84,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(deleteTemplateDialog.isApplicable(userRequest));"},{"lineNumber":85,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":87,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":88,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableDialogState(){"},{"lineNumber":89,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setDialogState(DialogState.UPDATE_GROUP_TEMPLATE);"},{"lineNumber":90,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(deleteTemplateDialog.isApplicable(userRequest));"},{"lineNumber":91,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":93,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":94,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testFinishActionsSuccessfulGroupDelete(){"},{"lineNumber":95,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String message \u003d \"Dialog finish actions true\";"},{"lineNumber":96,"author":{"gitId":"Iryna Zubrytska"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":97,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_ID);"},{"lineNumber":98,"author":{"gitId":"Iryna Zubrytska"},"content":"        GroupTemplate template\u003d new GroupTemplate();"},{"lineNumber":99,"author":{"gitId":"Iryna Zubrytska"},"content":"        template.setId(\"id\");"},{"lineNumber":100,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.getData().put(\"group template\", template);"},{"lineNumber":101,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":102,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(getTemplateIdHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":103,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":104,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d deleteTemplateDialog.handle(userRequest);"},{"lineNumber":105,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":106,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":107,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":108,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":110,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":111,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testFinishActionsUnsuccessfulGroupDelete(){"},{"lineNumber":112,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String message \u003d \"Dialog finish actions false\";"},{"lineNumber":113,"author":{"gitId":"Iryna Zubrytska"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":114,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_ID);"},{"lineNumber":115,"author":{"gitId":"Iryna Zubrytska"},"content":"        GroupTemplate template\u003d new GroupTemplate();"},{"lineNumber":116,"author":{"gitId":"Iryna Zubrytska"},"content":"        template.setId(\"id\");"},{"lineNumber":117,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.getData().put(\"group template\", template);"},{"lineNumber":118,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":119,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(getTemplateIdHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":120,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":121,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d deleteTemplateDialog.handle(userRequest);"},{"lineNumber":122,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":123,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":124,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":125,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":126}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/grouptemplate/dialogs/UpdateTemplateDialogTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Iryna Zubrytska"},"content":"package edu.kmaooad.handler.grouptemplate.dialogs;"},{"lineNumber":2,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":3,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.constants.bot.DialogState;"},{"lineNumber":5,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.button.TemplateButtonsHandler;"},{"lineNumber":6,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.common.*;"},{"lineNumber":7,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.handler.impl.template.dialog.UpdateTemplateDialog;"},{"lineNumber":8,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.model.*;"},{"lineNumber":9,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.GroupTemplateService;"},{"lineNumber":10,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"Iryna Zubrytska"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":12,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":13,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":14,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":15,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":16,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":17,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mock;"},{"lineNumber":18,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.Mockito;"},{"lineNumber":19,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":20,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":21,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":22,"author":{"gitId":"Iryna Zubrytska"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":23,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":24,"author":{"gitId":"Iryna Zubrytska"},"content":"import java.util.HashMap;"},{"lineNumber":25,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":26,"author":{"gitId":"Iryna Zubrytska"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":27,"author":{"gitId":"Iryna Zubrytska"},"content":"public class UpdateTemplateDialogTest {"},{"lineNumber":28,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":29,"author":{"gitId":"Iryna Zubrytska"},"content":"    @InjectMocks"},{"lineNumber":30,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UpdateTemplateDialog updateTemplateDialog;"},{"lineNumber":31,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":32,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":33,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AskTemplateNameHandler askTemplateNameHandler;"},{"lineNumber":34,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":35,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":36,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GetTemplateNameHandler getTemplateNameHandler;"},{"lineNumber":37,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":38,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":39,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AskTemplateYearHandler askTemplateYearHandler;"},{"lineNumber":40,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":41,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":42,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GetTemplateYearHandler getTemplateYearHandler;"},{"lineNumber":43,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":44,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":45,"author":{"gitId":"Iryna Zubrytska"},"content":"    private AskTemplateIdHandler askTemplateIdHandler;"},{"lineNumber":46,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":47,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":48,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GetTemplateIdHandler getTemplateIdHandler;"},{"lineNumber":49,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":50,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":51,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TemplateButtonsHandler templateButtonsHandler;"},{"lineNumber":52,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":53,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":54,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSessionService userSessionService;"},{"lineNumber":55,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":56,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":57,"author":{"gitId":"Iryna Zubrytska"},"content":"    private GroupTemplateService groupTemplateService;"},{"lineNumber":58,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":59,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Mock"},{"lineNumber":60,"author":{"gitId":"Iryna Zubrytska"},"content":"    private TelegramService telegramService;"},{"lineNumber":61,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":62,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserRequest userRequest;"},{"lineNumber":63,"author":{"gitId":"Iryna Zubrytska"},"content":"    private UserSession userSession;"},{"lineNumber":64,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Update update;"},{"lineNumber":65,"author":{"gitId":"Iryna Zubrytska"},"content":"    private Message message;"},{"lineNumber":66,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":67,"author":{"gitId":"Iryna Zubrytska"},"content":"    @BeforeEach"},{"lineNumber":68,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void initTests(){"},{"lineNumber":69,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession \u003d UserSession.builder().data(new HashMap\u003c\u003e()).build();"},{"lineNumber":70,"author":{"gitId":"Iryna Zubrytska"},"content":"        userRequest \u003d UserRequest.builder().userSession(userSession).chatId(1L).build();"},{"lineNumber":71,"author":{"gitId":"Iryna Zubrytska"},"content":"        message \u003d new Message();"},{"lineNumber":72,"author":{"gitId":"Iryna Zubrytska"},"content":"        update \u003d new Update();"},{"lineNumber":73,"author":{"gitId":"Iryna Zubrytska"},"content":"        update.setMessage(message);"},{"lineNumber":74,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":76,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":77,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testDialogType(){"},{"lineNumber":78,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(updateTemplateDialog.getDialogType(), DialogState.UPDATE_GROUP_TEMPLATE);"},{"lineNumber":79,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":81,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":82,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testStartDialog(){"},{"lineNumber":83,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String message \u003d \"Dialog started\";"},{"lineNumber":84,"author":{"gitId":"Iryna Zubrytska"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":85,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(askTemplateIdHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":86,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":87,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d updateTemplateDialog.startDialog(userRequest);"},{"lineNumber":88,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":89,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":90,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":91,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":93,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":94,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsApplicable(){"},{"lineNumber":95,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setDialogState(DialogState.UPDATE_GROUP_TEMPLATE);"},{"lineNumber":96,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(updateTemplateDialog.isApplicable(userRequest));"},{"lineNumber":97,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":98,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":99,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":100,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testIsNotApplicableDialogState(){"},{"lineNumber":101,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setDialogState(DialogState.UPDATE_GROUP);"},{"lineNumber":102,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertFalse(updateTemplateDialog.isApplicable(userRequest));"},{"lineNumber":103,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":105,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":106,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testFinishActionsSuccessfulGroupUpdate(){"},{"lineNumber":107,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String message \u003d \"Dialog finish actions true\";"},{"lineNumber":108,"author":{"gitId":"Iryna Zubrytska"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":109,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_YEAR);"},{"lineNumber":110,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.getData().put(\"group template\", new GroupTemplate());"},{"lineNumber":111,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":112,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(getTemplateYearHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":113,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":114,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d updateTemplateDialog.handle(userRequest);"},{"lineNumber":115,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":116,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":117,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":118,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":120,"author":{"gitId":"Iryna Zubrytska"},"content":"    @Test"},{"lineNumber":121,"author":{"gitId":"Iryna Zubrytska"},"content":"    public void testFinishActionsUnsuccessfulGroupUpdate(){"},{"lineNumber":122,"author":{"gitId":"Iryna Zubrytska"},"content":"        final String message \u003d \"Dialog finish actions false\";"},{"lineNumber":123,"author":{"gitId":"Iryna Zubrytska"},"content":"        SendMessage res \u003d SendMessage.builder().chatId(userRequest.getChatId()).text(message).build();"},{"lineNumber":124,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_TEMPLATE_YEAR);"},{"lineNumber":125,"author":{"gitId":"Iryna Zubrytska"},"content":"        userSession.getData().put(\"group template\", new GroupTemplate());"},{"lineNumber":126,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":127,"author":{"gitId":"Iryna Zubrytska"},"content":"        Mockito.when(getTemplateYearHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(res, true));"},{"lineNumber":128,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":129,"author":{"gitId":"Iryna Zubrytska"},"content":"        HandlerResponse response \u003d updateTemplateDialog.handle(userRequest);"},{"lineNumber":130,"author":{"gitId":"Iryna Zubrytska"},"content":""},{"lineNumber":131,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertTrue(response.isSuccess());"},{"lineNumber":132,"author":{"gitId":"Iryna Zubrytska"},"content":"        Assertions.assertEquals(response.getResult(), res);"},{"lineNumber":133,"author":{"gitId":"Iryna Zubrytska"},"content":"    }"},{"lineNumber":134,"author":{"gitId":"Iryna Zubrytska"},"content":"}"}],"authorContributionMap":{"Iryna Zubrytska":134}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/student/AskAllStudentsCSVButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.StudentConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.student.AskAllStudentsCSVButtonHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"public class AskAllStudentsCSVButtonHandlerTest {"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    private AskAllStudentsCSVButtonHandler askAllStudentsCSVButtonHandler;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests() {"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState() {"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(StudentConstants.STUDENT_UPDATE_CSV_BUTTON_LABEL);"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(askAllStudentsCSVButtonHandler.isApplicable(userRequest));"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableMessage() {"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(askAllStudentsCSVButtonHandler.isApplicable(userRequest));"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable() {"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(StudentConstants.STUDENT_UPDATE_CSV_BUTTON_LABEL);"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(askAllStudentsCSVButtonHandler.isApplicable(userRequest));"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler() {"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d askAllStudentsCSVButtonHandler.handle(userRequest);"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_STUDENT_CSV);"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":84}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/student/GetAllStudentsCSVButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.student.GetAllStudentsCSVButtonHandler;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.student.StudentButtonsHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.MassStudentsService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.ServiceCSVException;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"import static edu.kmaooad.service.ServiceCSVException.TypeOfCSVException.*;"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"public class GetAllStudentsCSVButtonHandlerTest {"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    private GetAllStudentsCSVButtonHandler getAllStudentsCSVButtonHandler;"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    private MassStudentsService massStudentsService;"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"    private StudentService studentService;"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"    private StudentButtonsHandler studentButtonsHandler;"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests() {"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState() {"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Some text\");"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(getAllStudentsCSVButtonHandler.isApplicable(userRequest));"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable() {"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Some text\");"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_STUDENT_CSV);"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(getAllStudentsCSVButtonHandler.isApplicable(userRequest));"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler() {"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d getAllStudentsCSVButtonHandler.handle(userRequest);"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":89,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":90,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":91,"author":{"gitId":"BlackKyiv"},"content":"    public void exceptionNotEnoughParamsThrowTestHandler() throws ServiceCSVException {"},{"lineNumber":92,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doThrow(new ServiceCSVException(NOT_ENOUGH_PARAMS_ON_LINE, \"\")).when(massStudentsService).parseStudentCSV(any());"},{"lineNumber":93,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":94,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":95,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d getAllStudentsCSVButtonHandler.handle(userRequest);"},{"lineNumber":96,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":97,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_STUDENT_CSV);"},{"lineNumber":98,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":99,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":100,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":101,"author":{"gitId":"BlackKyiv"},"content":"    public void exceptionEmailDuplicateThrowTestHandler() throws ServiceCSVException {"},{"lineNumber":102,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doThrow(new ServiceCSVException(EMAIL_DUPLICATE, \"\")).when(massStudentsService).parseStudentCSV(any());"},{"lineNumber":103,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":104,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":105,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d getAllStudentsCSVButtonHandler.handle(userRequest);"},{"lineNumber":106,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":107,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_STUDENT_CSV);"},{"lineNumber":108,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":110,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":111,"author":{"gitId":"BlackKyiv"},"content":"    public void exceptionActivityThrowTestHandler() throws ServiceCSVException {"},{"lineNumber":112,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doThrow(new ServiceCSVException(ACTIVITY_DOESNT_EXIST, \"\")).when(massStudentsService).parseStudentCSV(any());"},{"lineNumber":113,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":114,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":115,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d getAllStudentsCSVButtonHandler.handle(userRequest);"},{"lineNumber":116,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":117,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_STUDENT_CSV);"},{"lineNumber":118,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":120,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":121,"author":{"gitId":"BlackKyiv"},"content":"    public void exceptionThrowTestHandler() throws ServiceCSVException {"},{"lineNumber":122,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doThrow(new RuntimeException()).when(massStudentsService).parseStudentCSV(any());"},{"lineNumber":123,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":124,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":125,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d getAllStudentsCSVButtonHandler.handle(userRequest);"},{"lineNumber":126,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":127,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_STUDENT_CSV);"},{"lineNumber":128,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":129}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/student/ShowAllStudentsButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.StudentConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.student.ShowAllStudentsButtonHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.student.StudentButtonsHandler;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.GroupService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"public class ShowAllStudentsButtonHandlerTest {"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"    private ShowAllStudentsButtonHandler showAllStudentsButtonHandler;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    private StudentService studentService;"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    private UserSessionService userSessionService;"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    private StudentButtonsHandler studentButtonsHandler;"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests() {"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState() {"},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(StudentConstants.STUDENT_SHOW_ALL_BUTTON_LABEL);"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(showAllStudentsButtonHandler.isApplicable(userRequest));"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableMessage() {"},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(showAllStudentsButtonHandler.isApplicable(userRequest));"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable() {"},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(StudentConstants.STUDENT_SHOW_ALL_BUTTON_LABEL);"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(showAllStudentsButtonHandler.isApplicable(userRequest));"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler() {"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.when(studentButtonsHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(null, true));"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d showAllStudentsButtonHandler.handle(userRequest);"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":87}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/student/ShowAllStudentsCSVButtonHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.StudentConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.student.ShowAllStudentsCSVButtonHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.student.StudentButtonsHandler;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.MassStudentsService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.StudentService;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"public class ShowAllStudentsCSVButtonHandlerTest {"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":"    private ShowAllStudentsCSVButtonHandler showAllStudentsCSVButtonHandler;"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    private StudentService studentService;"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    private UserSessionService userSessionService;"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    private StudentButtonsHandler studentButtonsHandler;"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    private MassStudentsService massStudentsService;"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests() {"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState() {"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(StudentConstants.STUDENT_SHOW_ALL_BUTTON_LABEL);"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(showAllStudentsCSVButtonHandler.isApplicable(userRequest));"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableMessage() {"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(showAllStudentsCSVButtonHandler.isApplicable(userRequest));"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable() {"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(StudentConstants.STUDENT_SHOW_CSV_BUTTON_LABEL);"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(showAllStudentsCSVButtonHandler.isApplicable(userRequest));"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler() {"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.when(studentButtonsHandler.handle(Mockito.any(UserRequest.class))).thenReturn(new HandlerResponse(null, true));"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d showAllStudentsCSVButtonHandler.handle(userRequest);"},{"lineNumber":85,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":86,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":87,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":88,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":89}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/handler/student/StudentButtonsHandlerTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"package edu.kmaooad.handler.student;"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.ConversationState;"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.constants.bot.GlobalConstants;"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.handler.impl.student.StudentButtonsHandler;"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.helper.KeyboardHelper;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.model.UserSession;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import edu.kmaooad.service.TelegramService;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Assertions;"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":14,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":15,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":16,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":17,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mockito;"},{"lineNumber":18,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":20,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":22,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":23,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"public class StudentButtonsHandlerTest {"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":"    private StudentButtonsHandler studentButtonsHandler;"},{"lineNumber":31,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"    private TelegramService telegramService;"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":"    private KeyboardHelper keyboardHelper;"},{"lineNumber":36,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":37,"author":{"gitId":"BlackKyiv"},"content":"    private Message message;"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"    private Update update;"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"    private UserSession userSession;"},{"lineNumber":40,"author":{"gitId":"BlackKyiv"},"content":"    private UserRequest userRequest;"},{"lineNumber":41,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":42,"author":{"gitId":"BlackKyiv"},"content":"    @BeforeEach"},{"lineNumber":43,"author":{"gitId":"BlackKyiv"},"content":"    public void initTests(){"},{"lineNumber":44,"author":{"gitId":"BlackKyiv"},"content":"        message \u003d new Message();"},{"lineNumber":45,"author":{"gitId":"BlackKyiv"},"content":"        update \u003d new Update();"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        update.setMessage(message);"},{"lineNumber":47,"author":{"gitId":"BlackKyiv"},"content":"        userSession \u003d UserSession.builder()"},{"lineNumber":48,"author":{"gitId":"BlackKyiv"},"content":"                .chatId(1L)"},{"lineNumber":49,"author":{"gitId":"BlackKyiv"},"content":"                .build();"},{"lineNumber":50,"author":{"gitId":"BlackKyiv"},"content":"        userRequest \u003d UserRequest.builder().update(update).userSession(userSession).build();"},{"lineNumber":51,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":53,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableConversationState(){"},{"lineNumber":55,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(GlobalConstants.STUDENTS_BUTTON_LABEL);"},{"lineNumber":56,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.CONVERSATION_STARTED);"},{"lineNumber":57,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(studentButtonsHandler.isApplicable(userRequest));"},{"lineNumber":58,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":60,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":61,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsNotApplicableMessage(){"},{"lineNumber":62,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(\"Not applicable\");"},{"lineNumber":63,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":64,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertFalse(studentButtonsHandler.isApplicable(userRequest));"},{"lineNumber":65,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":67,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":68,"author":{"gitId":"BlackKyiv"},"content":"    public void testIsApplicable(){"},{"lineNumber":69,"author":{"gitId":"BlackKyiv"},"content":"        message.setText(GlobalConstants.STUDENTS_BUTTON_LABEL);"},{"lineNumber":70,"author":{"gitId":"BlackKyiv"},"content":"        userSession.setConversationState(ConversationState.WAITING_FOR_MAIN_MENU_ACTION_CHOICE);"},{"lineNumber":71,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(studentButtonsHandler.isApplicable(userRequest));"},{"lineNumber":72,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":74,"author":{"gitId":"BlackKyiv"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"BlackKyiv"},"content":"    public void testHandler(){"},{"lineNumber":76,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d new SendMessage();"},{"lineNumber":77,"author":{"gitId":"BlackKyiv"},"content":"        Mockito.doReturn(new SendMessage()).when(telegramService).sendMessage(Mockito.anyLong(), Mockito.anyString());"},{"lineNumber":78,"author":{"gitId":"BlackKyiv"},"content":"        HandlerResponse handlerResponse \u003d studentButtonsHandler.handle(userRequest);"},{"lineNumber":79,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":80,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertNull(handlerResponse.getResult());"},{"lineNumber":81,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertTrue(handlerResponse.isSuccess());"},{"lineNumber":82,"author":{"gitId":"BlackKyiv"},"content":"        Assertions.assertEquals(userSession.getConversationState(), ConversationState.WAITING_FOR_STUDENT_ACTION_CHOICE);"},{"lineNumber":83,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":84,"author":{"gitId":"BlackKyiv"},"content":"}"}],"authorContributionMap":{"BlackKyiv":84}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/telegram/StudentsBotTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.telegram;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.Dispatcher;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.HandlerResponse;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.model.UserRequest;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.service.UserSessionService;"},{"lineNumber":7,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.telegram.StudentsBot;"},{"lineNumber":8,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.telegram.TelegramConfig;"},{"lineNumber":9,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":10,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":11,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Chat;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.User;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":"import static org.junit.jupiter.api.Assertions.assertNull;"},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import static org.mockito.Mockito.mock;"},{"lineNumber":19,"author":{"gitId":"Mishok"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":21,"author":{"gitId":"Mishok"},"content":"public class StudentsBotTest {"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"    public void testOnWebhookUpdateReceivedValidInput() {"},{"lineNumber":24,"author":{"gitId":"Mishok"},"content":"        TelegramConfig telegramConfig \u003d mock(TelegramConfig.class);"},{"lineNumber":25,"author":{"gitId":"Mishok"},"content":"        when(telegramConfig.getWebhookPath()).thenReturn(\"https://test-webhook.com\");"},{"lineNumber":26,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":27,"author":{"gitId":"Mishok"},"content":"        Dispatcher dispatcher \u003d mock(Dispatcher.class);"},{"lineNumber":28,"author":{"gitId":"Mishok"},"content":"        when(dispatcher.dispatch(any(UserRequest.class))).thenReturn(new HandlerResponse(null, false));"},{"lineNumber":29,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":30,"author":{"gitId":"Mishok"},"content":"        UserSessionService userSessionService \u003d new UserSessionService();"},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"        StudentsBot studentsBot \u003d new StudentsBot(telegramConfig, dispatcher, userSessionService);"},{"lineNumber":32,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":33,"author":{"gitId":"Mishok"},"content":"        User user \u003d new User();"},{"lineNumber":34,"author":{"gitId":"Mishok"},"content":"        user.setId(1L);"},{"lineNumber":35,"author":{"gitId":"Mishok"},"content":"        user.setFirstName(\"User\");"},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"        Chat chat \u003d new Chat();"},{"lineNumber":38,"author":{"gitId":"Mishok"},"content":"        chat.setId(1L);"},{"lineNumber":39,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":"        Message message \u003d new Message();"},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        message.setFrom(user);"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"        message.setChat(chat);"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":"        message.setText(\"Message\");"},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"        Update update \u003d new Update();"},{"lineNumber":46,"author":{"gitId":"Mishok"},"content":"        update.setMessage(message);"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":"        BotApiMethod\u003c?\u003e result \u003d studentsBot.onWebhookUpdateReceived(update);"},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"        assertNull(result);"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":53,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"Mishok"},"content":"    public void testOnWebhookUpdateReceivedInvalidInput() {"},{"lineNumber":55,"author":{"gitId":"Mishok"},"content":"        TelegramConfig telegramConfig \u003d mock(TelegramConfig.class);"},{"lineNumber":56,"author":{"gitId":"Mishok"},"content":"        when(telegramConfig.getWebhookPath()).thenReturn(\"https://test-webhook.com\");"},{"lineNumber":57,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":58,"author":{"gitId":"Mishok"},"content":"        StudentsBot studentsBot \u003d new StudentsBot(telegramConfig, null, null);"},{"lineNumber":59,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":60,"author":{"gitId":"Mishok"},"content":"        BotApiMethod\u003c?\u003e result \u003d studentsBot.onWebhookUpdateReceived(new Update());"},{"lineNumber":61,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":62,"author":{"gitId":"Mishok"},"content":"        assertNull(result);"},{"lineNumber":63,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":64}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/telegram/TelegramWebhookTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"package edu.kmaooad.telegram;"},{"lineNumber":2,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":3,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.functions.TelegramWebhook;"},{"lineNumber":4,"author":{"gitId":"Mishok"},"content":"import edu.kmaooad.telegram.StudentsBot;"},{"lineNumber":5,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.BeforeEach;"},{"lineNumber":6,"author":{"gitId":"Mishok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":"import org.junit.jupiter.api.extension.ExtendWith;"},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.InjectMocks;"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.Mock;"},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.MockitoAnnotations;"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"import org.mockito.junit.jupiter.MockitoExtension;"},{"lineNumber":12,"author":{"gitId":"Mishok"},"content":"import org.mockito.junit.jupiter.MockitoSettings;"},{"lineNumber":13,"author":{"gitId":"Mishok"},"content":"import org.mockito.quality.Strictness;"},{"lineNumber":14,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":15,"author":{"gitId":"Mishok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":16,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":17,"author":{"gitId":"Mishok"},"content":"import static org.junit.jupiter.api.Assertions.assertNull;"},{"lineNumber":18,"author":{"gitId":"Mishok"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":19,"author":{"gitId":"BlackKyiv"},"content":"import static org.mockito.Mockito.lenient;"},{"lineNumber":20,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":21,"author":{"gitId":"BlackKyiv"},"content":"@ExtendWith(MockitoExtension.class)"},{"lineNumber":22,"author":{"gitId":"Mishok"},"content":"@MockitoSettings(strictness \u003d Strictness.LENIENT)"},{"lineNumber":23,"author":{"gitId":"Mishok"},"content":"public class TelegramWebhookTest {"},{"lineNumber":24,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":25,"author":{"gitId":"BlackKyiv"},"content":"    @Mock"},{"lineNumber":26,"author":{"gitId":"BlackKyiv"},"content":"    StudentsBot studentsBot;"},{"lineNumber":27,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":28,"author":{"gitId":"BlackKyiv"},"content":"    @InjectMocks"},{"lineNumber":29,"author":{"gitId":"BlackKyiv"},"content":"    TelegramWebhook telegramWebhook;"},{"lineNumber":30,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":31,"author":{"gitId":"Mishok"},"content":"    @BeforeEach"},{"lineNumber":32,"author":{"gitId":"BlackKyiv"},"content":"    public void initTest() {"},{"lineNumber":33,"author":{"gitId":"BlackKyiv"},"content":"        MockitoAnnotations.openMocks(this);"},{"lineNumber":34,"author":{"gitId":"BlackKyiv"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":36,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":37,"author":{"gitId":"Mishok"},"content":"    public void testValidUpdate() {"},{"lineNumber":38,"author":{"gitId":"BlackKyiv"},"content":"        lenient().doReturn(null).when(studentsBot).onWebhookUpdateReceived(any(Update.class));"},{"lineNumber":39,"author":{"gitId":"BlackKyiv"},"content":"        BotApiMethod\u003c?\u003e result \u003d telegramWebhook.apply(new Update());"},{"lineNumber":40,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":41,"author":{"gitId":"Mishok"},"content":"        assertNull(result);"},{"lineNumber":42,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":44,"author":{"gitId":"Mishok"},"content":"    @Test"},{"lineNumber":45,"author":{"gitId":"Mishok"},"content":"    public void testInvalidUpdate() {"},{"lineNumber":46,"author":{"gitId":"BlackKyiv"},"content":"        lenient().doThrow(new RuntimeException()).when(studentsBot).onWebhookUpdateReceived(any(Update.class));"},{"lineNumber":47,"author":{"gitId":"Mishok"},"content":"        BotApiMethod\u003c?\u003e result \u003d new TelegramWebhook(studentsBot).apply(new Update());"},{"lineNumber":48,"author":{"gitId":"Mishok"},"content":""},{"lineNumber":49,"author":{"gitId":"Mishok"},"content":"        System.out.println(result);"},{"lineNumber":50,"author":{"gitId":"Mishok"},"content":"        assertNull(result);"},{"lineNumber":51,"author":{"gitId":"Mishok"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"Mishok"},"content":"}"}],"authorContributionMap":{"Mishok":31,"BlackKyiv":21}},{"path":"kmaooad-functions/src/test/resources/application.properties","fileType":"properties","lines":[{"lineNumber":1,"author":{"gitId":"BlackKyiv"},"content":"telegram.webhook-path\u003dhttps://kmaooad-opossum.azurewebsites.net/api/TelegramWebhook?code\u003ddJJsepX5C3eCaVHHU0SDlnVwdtfcg0AZMtYYpRtVYNmHAzFunxVWgQ\u003d\u003d"},{"lineNumber":2,"author":{"gitId":"BlackKyiv"},"content":"telegram.bot-name\u003dkmaooad_opossum_bot"},{"lineNumber":3,"author":{"gitId":"BlackKyiv"},"content":"telegram.bot-token\u003d5775292875:AAFzbPJ0g9-STwZvZ-4dtN0DK00-nMsgdIA"},{"lineNumber":4,"author":{"gitId":"BlackKyiv"},"content":"logging.level.root\u003dINFO"},{"lineNumber":5,"author":{"gitId":"BlackKyiv"},"content":"spring.data.mongodb.uri\u003dmongodb://Opossum:Sh56MZnkL00DYYI7@ac-eyakdio-shard-00-00.egv5fqu.mongodb.net:27017,ac-eyakdio-shard-00-01.egv5fqu.mongodb.net:27017,ac-eyakdio-shard-00-02.egv5fqu.mongodb.net:27017/?ssl\u003dtrue\u0026replicaSet\u003datlas-h2y16s-shard-0\u0026authSource\u003dadmin\u0026retryWrites\u003dtrue\u0026w\u003dmajority"},{"lineNumber":6,"author":{"gitId":"BlackKyiv"},"content":"spring.data.mongodb.database\u003dOpossum"},{"lineNumber":7,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":8,"author":{"gitId":"BlackKyiv"},"content":"scheduler.enabled \u003d false"},{"lineNumber":9,"author":{"gitId":"BlackKyiv"},"content":""},{"lineNumber":10,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.host\u003dsmtp.gmail.com"},{"lineNumber":11,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.username\u003dopossum.bot.notify@gmail.com"},{"lineNumber":12,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.password\u003dsxzrstkublvycdbh"},{"lineNumber":13,"author":{"gitId":"BlackKyiv"},"content":"spring.mail.port\u003d587"},{"lineNumber":14,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":15,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":16,"author":{"gitId":"dgoptsii"},"content":"# Other properties"},{"lineNumber":17,"author":{"gitId":"dgoptsii"},"content":"spring.mail.properties.mail.smtp.auth\u003dtrue"},{"lineNumber":18,"author":{"gitId":"dgoptsii"},"content":"spring.mail.properties.mail.smtp.connectiontimeout\u003d5000"},{"lineNumber":19,"author":{"gitId":"dgoptsii"},"content":"spring.mail.properties.mail.smtp.timeout\u003d5000"},{"lineNumber":20,"author":{"gitId":"dgoptsii"},"content":"spring.mail.properties.mail.smtp.writetimeout\u003d5000"},{"lineNumber":21,"author":{"gitId":"dgoptsii"},"content":""},{"lineNumber":22,"author":{"gitId":"dgoptsii"},"content":"# TLS , port 587"},{"lineNumber":23,"author":{"gitId":"dgoptsii"},"content":"spring.mail.properties.mail.smtp.starttls.enable\u003dtrue"}],"authorContributionMap":{"dgoptsii":10,"BlackKyiv":13}},{"path":"kmaooad-functions/src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker","fileType":"MockMaker","lines":[{"lineNumber":1,"author":{"gitId":"Mishok"},"content":"mock-maker-inline"}],"authorContributionMap":{"Mishok":1}}]
