[{"path":".github/workflows/ci.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"Anton Shabinskiy"},"content":"name: CI"},{"lineNumber":2,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":3,"author":{"gitId":"Anton Shabinskiy"},"content":"on:"},{"lineNumber":4,"author":{"gitId":"Anton Shabinskiy"},"content":"  pull_request:"},{"lineNumber":5,"author":{"gitId":"Anton Shabinskiy"},"content":"  push:"},{"lineNumber":6,"author":{"gitId":"Anton Shabinskiy"},"content":"    branches:"},{"lineNumber":7,"author":{"gitId":"Anton Shabinskiy"},"content":"      - master"},{"lineNumber":8,"author":{"gitId":"Anton Shabinskiy"},"content":"  workflow_dispatch:"},{"lineNumber":9,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":10,"author":{"gitId":"Anton Shabinskiy"},"content":"env:"},{"lineNumber":11,"author":{"gitId":"Anton Shabinskiy"},"content":"  PACKAGE_DIRECTORY: \u0027./kmaooad-functions\u0027 # set this to the directory which contains pom.xml file"},{"lineNumber":12,"author":{"gitId":"Anton Shabinskiy"},"content":"  JAVA_VERSION: \u002711\u0027 # set this to the java version to use"},{"lineNumber":13,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":14,"author":{"gitId":"Anton Shabinskiy"},"content":"jobs:"},{"lineNumber":15,"author":{"gitId":"Anton Shabinskiy"},"content":"  build-and-test:"},{"lineNumber":16,"author":{"gitId":"Anton Shabinskiy"},"content":"    runs-on: windows-latest"},{"lineNumber":17,"author":{"gitId":"Anton Shabinskiy"},"content":"    steps:"},{"lineNumber":18,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: \u0027Checkout GitHub Action\u0027"},{"lineNumber":19,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: actions/checkout@v2"},{"lineNumber":20,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":21,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: Setup Java Sdk ${{ env.JAVA_VERSION }}"},{"lineNumber":22,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: actions/setup-java@v1"},{"lineNumber":23,"author":{"gitId":"Anton Shabinskiy"},"content":"        with:"},{"lineNumber":24,"author":{"gitId":"Anton Shabinskiy"},"content":"          java-version: ${{ env.JAVA_VERSION }}"},{"lineNumber":25,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":26,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: Install dependencies"},{"lineNumber":27,"author":{"gitId":"Anton Shabinskiy"},"content":"        shell: pwsh"},{"lineNumber":28,"author":{"gitId":"Anton Shabinskiy"},"content":"        run: |"},{"lineNumber":29,"author":{"gitId":"Anton Shabinskiy"},"content":"          pushd \u0027./${{ env.PACKAGE_DIRECTORY }}\u0027"},{"lineNumber":30,"author":{"gitId":"Anton Shabinskiy"},"content":"          mvn install -DskipTests\u003dtrue -B -V"},{"lineNumber":31,"author":{"gitId":"Anton Shabinskiy"},"content":"          popd"},{"lineNumber":32,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":33,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: Run tests and collect coverage"},{"lineNumber":34,"author":{"gitId":"Anton Shabinskiy"},"content":"        shell: pwsh"},{"lineNumber":35,"author":{"gitId":"Anton Shabinskiy"},"content":"        run: |"},{"lineNumber":36,"author":{"gitId":"Anton Shabinskiy"},"content":"          pushd \u0027./${{ env.PACKAGE_DIRECTORY }}\u0027"},{"lineNumber":37,"author":{"gitId":"Anton Shabinskiy"},"content":"          mvn -B test"},{"lineNumber":38,"author":{"gitId":"Anton Shabinskiy"},"content":"          popd"},{"lineNumber":39,"author":{"gitId":"Anton Shabinskiy"},"content":"      "},{"lineNumber":40,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: Upload coverage to Codecov"},{"lineNumber":41,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: codecov/codecov-action@v3"},{"lineNumber":42,"author":{"gitId":"Anton Shabinskiy"},"content":"      "},{"lineNumber":43,"author":{"gitId":"Anton Shabinskiy"},"content":"      "}],"authorContributionMap":{"Anton Shabinskiy":43}},{"path":".github/workflows/deploy.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"Anton Shabinskiy"},"content":"# Docs for the Azure Web Apps Deploy action: https://github.com/azure/functions-action"},{"lineNumber":2,"author":{"gitId":"Anton Shabinskiy"},"content":"# More GitHub Actions for Azure: https://github.com/Azure/actions"},{"lineNumber":3,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":4,"author":{"gitId":"Anton Shabinskiy"},"content":"name: Deploy"},{"lineNumber":5,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":6,"author":{"gitId":"Anton Shabinskiy"},"content":"on:"},{"lineNumber":7,"author":{"gitId":"Anton Shabinskiy"},"content":"  push:"},{"lineNumber":8,"author":{"gitId":"Anton Shabinskiy"},"content":"    branches:"},{"lineNumber":9,"author":{"gitId":"Anton Shabinskiy"},"content":"      - master"},{"lineNumber":10,"author":{"gitId":"Anton Shabinskiy"},"content":"  workflow_dispatch:"},{"lineNumber":11,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":12,"author":{"gitId":"Anton Shabinskiy"},"content":"env:"},{"lineNumber":13,"author":{"gitId":"Anton Shabinskiy"},"content":"  AZURE_FUNCTIONAPP_NAME: kmaooad-bots # set this to your function app name on Azure"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"  PACKAGE_DIRECTORY: \u0027./kmaooad-functions\u0027 # set this to the directory which contains pom.xml file"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"  JAVA_VERSION: \u002711\u0027 # set this to the java version to use"},{"lineNumber":16,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":17,"author":{"gitId":"Anton Shabinskiy"},"content":"jobs:"},{"lineNumber":18,"author":{"gitId":"Anton Shabinskiy"},"content":"  build-and-deploy:"},{"lineNumber":19,"author":{"gitId":"Anton Shabinskiy"},"content":"    runs-on: windows-latest"},{"lineNumber":20,"author":{"gitId":"Anton Shabinskiy"},"content":"    steps:"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"      - name: \u0027Checkout GitHub Action\u0027"},{"lineNumber":22,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: actions/checkout@v2"},{"lineNumber":23,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":24,"author":{"gitId":"Anton Shabinskiy"},"content":"      - name: Setup Java Sdk ${{ env.JAVA_VERSION }}"},{"lineNumber":25,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: actions/setup-java@v1"},{"lineNumber":26,"author":{"gitId":"Anton Shabinskiy"},"content":"        with:"},{"lineNumber":27,"author":{"gitId":"Anton Shabinskiy"},"content":"          java-version: ${{ env.JAVA_VERSION }}"},{"lineNumber":28,"author":{"gitId":"Anton Shabinskiy"},"content":""},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"      - name: \u0027Restore Project Dependencies Using Mvn\u0027"},{"lineNumber":30,"author":{"gitId":"Anton Shabinskiy"},"content":"        shell: pwsh"},{"lineNumber":31,"author":{"gitId":"Anton Shabinskiy"},"content":"        run: |"},{"lineNumber":32,"author":{"gitId":"Anton Shabinskiy"},"content":"          pushd \u0027./${{ env.PACKAGE_DIRECTORY }}\u0027"},{"lineNumber":33,"author":{"gitId":"Anton Shabinskiy"},"content":"          mvn clean package"},{"lineNumber":34,"author":{"gitId":"Anton Shabinskiy"},"content":"          popd"},{"lineNumber":35,"author":{"gitId":"sun-ok"},"content":"      - name: \u0027Run Azure Functions Action\u0027"},{"lineNumber":36,"author":{"gitId":"Anton Shabinskiy"},"content":"        uses: Azure/functions-action@v1"},{"lineNumber":37,"author":{"gitId":"Anton Shabinskiy"},"content":"        id: fa"},{"lineNumber":38,"author":{"gitId":"Anton Shabinskiy"},"content":"        with:"},{"lineNumber":39,"author":{"gitId":"sun-ok"},"content":"          app-name: \u0027kmaooad-bots\u0027"},{"lineNumber":40,"author":{"gitId":"sun-ok"},"content":"          slot-name: \u0027Production\u0027"},{"lineNumber":41,"author":{"gitId":"Anton Shabinskiy"},"content":"          publish-profile: ${{ secrets.AZUREAPPSERVICE_PUBLISHPROFILE_888607070321451CADF6F6C77B55F58C }}"},{"lineNumber":42,"author":{"gitId":"sun-ok"},"content":"          package: \u0027${{ env.PACKAGE_DIRECTORY }}\u0027"},{"lineNumber":43,"author":{"gitId":"Anton Shabinskiy"},"content":"          respect-pom-xml: true"}],"authorContributionMap":{"Anton Shabinskiy":35,"sun-ok":8}},{"path":".idea/libraries/Maven__org_mongodb_bson_4_4_2.xml","fileType":"xml","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"\u003ccomponent name\u003d\"libraryTable\"\u003e"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":"  \u003clibrary name\u003d\"Maven: org.mongodb:bson:4.4.2\"\u003e"},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"    \u003cCLASSES\u003e"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"      \u003croot url\u003d\"jar://$MAVEN_REPOSITORY$/org/mongodb/bson/4.4.2/bson-4.4.2.jar!/\" /\u003e"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"    \u003c/CLASSES\u003e"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"    \u003cJAVADOC\u003e"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"      \u003croot url\u003d\"jar://$MAVEN_REPOSITORY$/org/mongodb/bson/4.4.2/bson-4.4.2-javadoc.jar!/\" /\u003e"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"    \u003c/JAVADOC\u003e"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"    \u003cSOURCES\u003e"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"      \u003croot url\u003d\"jar://$MAVEN_REPOSITORY$/org/mongodb/bson/4.4.2/bson-4.4.2-sources.jar!/\" /\u003e"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"    \u003c/SOURCES\u003e"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"  \u003c/library\u003e"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"\u003c/component\u003e"}],"authorContributionMap":{"sun-ok":13}},{"path":".idea/libraries/Maven__org_mongodb_mongodb_driver_core_4_4_2.xml","fileType":"xml","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"\u003ccomponent name\u003d\"libraryTable\"\u003e"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":"  \u003clibrary name\u003d\"Maven: org.mongodb:mongodb-driver-core:4.4.2\"\u003e"},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"    \u003cCLASSES\u003e"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"      \u003croot url\u003d\"jar://$MAVEN_REPOSITORY$/org/mongodb/mongodb-driver-core/4.4.2/mongodb-driver-core-4.4.2.jar!/\" /\u003e"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"    \u003c/CLASSES\u003e"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"    \u003cJAVADOC\u003e"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"      \u003croot url\u003d\"jar://$MAVEN_REPOSITORY$/org/mongodb/mongodb-driver-core/4.4.2/mongodb-driver-core-4.4.2-javadoc.jar!/\" /\u003e"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"    \u003c/JAVADOC\u003e"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"    \u003cSOURCES\u003e"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"      \u003croot url\u003d\"jar://$MAVEN_REPOSITORY$/org/mongodb/mongodb-driver-core/4.4.2/mongodb-driver-core-4.4.2-sources.jar!/\" /\u003e"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"    \u003c/SOURCES\u003e"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"  \u003c/library\u003e"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"\u003c/component\u003e"}],"authorContributionMap":{"sun-ok":13}},{"path":".idea/libraries/Maven__org_mongodb_mongodb_driver_sync_4_4_2.xml","fileType":"xml","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"\u003ccomponent name\u003d\"libraryTable\"\u003e"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":"  \u003clibrary name\u003d\"Maven: org.mongodb:mongodb-driver-sync:4.4.2\"\u003e"},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"    \u003cCLASSES\u003e"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"      \u003croot url\u003d\"jar://$MAVEN_REPOSITORY$/org/mongodb/mongodb-driver-sync/4.4.2/mongodb-driver-sync-4.4.2.jar!/\" /\u003e"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"    \u003c/CLASSES\u003e"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"    \u003cJAVADOC\u003e"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"      \u003croot url\u003d\"jar://$MAVEN_REPOSITORY$/org/mongodb/mongodb-driver-sync/4.4.2/mongodb-driver-sync-4.4.2-javadoc.jar!/\" /\u003e"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"    \u003c/JAVADOC\u003e"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"    \u003cSOURCES\u003e"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"      \u003croot url\u003d\"jar://$MAVEN_REPOSITORY$/org/mongodb/mongodb-driver-sync/4.4.2/mongodb-driver-sync-4.4.2-sources.jar!/\" /\u003e"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"    \u003c/SOURCES\u003e"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"  \u003c/library\u003e"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"\u003c/component\u003e"}],"authorContributionMap":{"sun-ok":13}},{"path":"LICENSE","fileType":"LICENSE","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"MIT License"},{"lineNumber":2,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":3,"author":{"gitId":"github-classroom[bot]"},"content":"Copyright (c) 2022 NAUKMA OOAD 2022"},{"lineNumber":4,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":5,"author":{"gitId":"github-classroom[bot]"},"content":"Permission is hereby granted, free of charge, to any person obtaining a copy"},{"lineNumber":6,"author":{"gitId":"github-classroom[bot]"},"content":"of this software and associated documentation files (the \"Software\"), to deal"},{"lineNumber":7,"author":{"gitId":"github-classroom[bot]"},"content":"in the Software without restriction, including without limitation the rights"},{"lineNumber":8,"author":{"gitId":"github-classroom[bot]"},"content":"to use, copy, modify, merge, publish, distribute, sublicense, and/or sell"},{"lineNumber":9,"author":{"gitId":"github-classroom[bot]"},"content":"copies of the Software, and to permit persons to whom the Software is"},{"lineNumber":10,"author":{"gitId":"github-classroom[bot]"},"content":"furnished to do so, subject to the following conditions:"},{"lineNumber":11,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":12,"author":{"gitId":"github-classroom[bot]"},"content":"The above copyright notice and this permission notice shall be included in all"},{"lineNumber":13,"author":{"gitId":"github-classroom[bot]"},"content":"copies or substantial portions of the Software."},{"lineNumber":14,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":15,"author":{"gitId":"github-classroom[bot]"},"content":"THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR"},{"lineNumber":16,"author":{"gitId":"github-classroom[bot]"},"content":"IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,"},{"lineNumber":17,"author":{"gitId":"github-classroom[bot]"},"content":"FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE"},{"lineNumber":18,"author":{"gitId":"github-classroom[bot]"},"content":"AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER"},{"lineNumber":19,"author":{"gitId":"github-classroom[bot]"},"content":"LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,"},{"lineNumber":20,"author":{"gitId":"github-classroom[bot]"},"content":"OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE"},{"lineNumber":21,"author":{"gitId":"github-classroom[bot]"},"content":"SOFTWARE."}],"authorContributionMap":{"github-classroom[bot]":21}},{"path":"README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"[![Open in Visual Studio Code](https://classroom.github.com/assets/open-in-vscode-c66648af7eb3fe8bc4f294546bfd86ef473780cde1dea487d3c4ff354943c9ae.svg)](https://classroom.github.com/online_ide?assignment_repo_id\u003d8735356\u0026assignment_repo_type\u003dAssignmentRepo)"}],"authorContributionMap":{"github-classroom[bot]":1}},{"path":"kmaooad-functions/.gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"# Build output"},{"lineNumber":2,"author":{"gitId":"github-classroom[bot]"},"content":"target/"},{"lineNumber":3,"author":{"gitId":"github-classroom[bot]"},"content":"*.class"},{"lineNumber":4,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":5,"author":{"gitId":"github-classroom[bot]"},"content":"# Log file"},{"lineNumber":6,"author":{"gitId":"github-classroom[bot]"},"content":"*.log"},{"lineNumber":7,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":8,"author":{"gitId":"github-classroom[bot]"},"content":"# BlueJ files"},{"lineNumber":9,"author":{"gitId":"github-classroom[bot]"},"content":"*.ctxt"},{"lineNumber":10,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":11,"author":{"gitId":"github-classroom[bot]"},"content":"# Mobile Tools for Java (J2ME)"},{"lineNumber":12,"author":{"gitId":"github-classroom[bot]"},"content":".mtj.tmp/"},{"lineNumber":13,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":14,"author":{"gitId":"github-classroom[bot]"},"content":"# Package Files #"},{"lineNumber":15,"author":{"gitId":"github-classroom[bot]"},"content":"*.jar"},{"lineNumber":16,"author":{"gitId":"github-classroom[bot]"},"content":"*.war"},{"lineNumber":17,"author":{"gitId":"github-classroom[bot]"},"content":"*.ear"},{"lineNumber":18,"author":{"gitId":"github-classroom[bot]"},"content":"*.zip"},{"lineNumber":19,"author":{"gitId":"github-classroom[bot]"},"content":"*.tar.gz"},{"lineNumber":20,"author":{"gitId":"github-classroom[bot]"},"content":"*.rar"},{"lineNumber":21,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":22,"author":{"gitId":"github-classroom[bot]"},"content":"# virtual machine crash logs, see http://www.java.com/en/download/help/error_hotspot.xml"},{"lineNumber":23,"author":{"gitId":"github-classroom[bot]"},"content":"hs_err_pid*"},{"lineNumber":24,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":25,"author":{"gitId":"github-classroom[bot]"},"content":"# IDE"},{"lineNumber":26,"author":{"gitId":"github-classroom[bot]"},"content":".idea/"},{"lineNumber":27,"author":{"gitId":"github-classroom[bot]"},"content":"*.iml"},{"lineNumber":28,"author":{"gitId":"github-classroom[bot]"},"content":".settings/"},{"lineNumber":29,"author":{"gitId":"github-classroom[bot]"},"content":".project"},{"lineNumber":30,"author":{"gitId":"github-classroom[bot]"},"content":".classpath"},{"lineNumber":31,"author":{"gitId":"github-classroom[bot]"},"content":".vscode/"},{"lineNumber":32,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":33,"author":{"gitId":"github-classroom[bot]"},"content":"# macOS"},{"lineNumber":34,"author":{"gitId":"github-classroom[bot]"},"content":".DS_Store"},{"lineNumber":35,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":36,"author":{"gitId":"github-classroom[bot]"},"content":"# Azure Functions"},{"lineNumber":37,"author":{"gitId":"github-classroom[bot]"},"content":"local.settings.json"},{"lineNumber":38,"author":{"gitId":"github-classroom[bot]"},"content":"bin/"},{"lineNumber":39,"author":{"gitId":"github-classroom[bot]"},"content":"obj/"}],"authorContributionMap":{"github-classroom[bot]":39}},{"path":"kmaooad-functions/host.json","fileType":"json","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"{"},{"lineNumber":2,"author":{"gitId":"github-classroom[bot]"},"content":"  \"version\": \"2.0\","},{"lineNumber":3,"author":{"gitId":"github-classroom[bot]"},"content":"  \"extensionBundle\": {"},{"lineNumber":4,"author":{"gitId":"github-classroom[bot]"},"content":"    \"id\": \"Microsoft.Azure.Functions.ExtensionBundle\","},{"lineNumber":5,"author":{"gitId":"github-classroom[bot]"},"content":"    \"version\": \"[3.*, 4.0.0)\""},{"lineNumber":6,"author":{"gitId":"github-classroom[bot]"},"content":"  } "},{"lineNumber":7,"author":{"gitId":"github-classroom[bot]"},"content":"}"}],"authorContributionMap":{"github-classroom[bot]":7}},{"path":"kmaooad-functions/outputs/Output.txt","fileType":"txt","lines":[{"lineNumber":1,"author":{"gitId":"xOooQOFU"},"content":"POST / HTTP/1.1"},{"lineNumber":2,"author":{"gitId":"xOooQOFU"},"content":"Host: bots.requestcatcher.com"},{"lineNumber":3,"author":{"gitId":"xOooQOFU"},"content":"Accept-Encoding: gzip, deflate"},{"lineNumber":4,"author":{"gitId":"xOooQOFU"},"content":"Connection: keep-alive"},{"lineNumber":5,"author":{"gitId":"xOooQOFU"},"content":"Content-Length: 332"},{"lineNumber":6,"author":{"gitId":"xOooQOFU"},"content":"Content-Type: application/json"},{"lineNumber":7,"author":{"gitId":"xOooQOFU"},"content":""},{"lineNumber":8,"author":{"gitId":"xOooQOFU"},"content":"{\"update_id\":983721550,"},{"lineNumber":9,"author":{"gitId":"xOooQOFU"},"content":"\"message\":{\"message_id\":6,\"from\":{\"id\":421325006,\"is_bot\":false,\"first_name\":\"Alexandra\",\"last_name\":\"Shliakhova\",\"username\":\"Sun_0k\",\"language_code\":\"ru\"},\"chat\":{\"id\":421325006,\"first_name\":\"Alexandra\",\"last_name\":\"Shliakhova\",\"username\":\"Sun_0k\",\"type\":\"private\"},\"date\":1664723185,\"text\":\"hello, world\"}}"}],"authorContributionMap":{"xOooQOFU":9}},{"path":"kmaooad-functions/pom.xml","fileType":"xml","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\" ?\u003e"},{"lineNumber":2,"author":{"gitId":"github-classroom[bot]"},"content":"\u003cproject xmlns\u003d\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi\u003d\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation\u003d\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\u003e"},{"lineNumber":3,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cmodelVersion\u003e4.0.0\u003c/modelVersion\u003e"},{"lineNumber":4,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":5,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cgroupId\u003eedu.kmaooad\u003c/groupId\u003e"},{"lineNumber":6,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cartifactId\u003ekmaooad-functions\u003c/artifactId\u003e"},{"lineNumber":7,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cversion\u003e1.0-SNAPSHOT\u003c/version\u003e"},{"lineNumber":8,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cpackaging\u003ejar\u003c/packaging\u003e"},{"lineNumber":9,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":10,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cname\u003eAzure Java Functions\u003c/name\u003e"},{"lineNumber":11,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"    \u003cparent\u003e"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"        \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"        \u003cartifactId\u003espring-boot-starter-parent\u003c/artifactId\u003e"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"        \u003cversion\u003e2.6.6\u003c/version\u003e"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"        \u003crelativePath/\u003e \u003c!-- lookup parent from repository --\u003e"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    \u003c/parent\u003e"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":19,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cproperties\u003e"},{"lineNumber":20,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cproject.build.sourceEncoding\u003eUTF-8\u003c/project.build.sourceEncoding\u003e"},{"lineNumber":21,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cjava.version\u003e11\u003c/java.version\u003e"},{"lineNumber":22,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cazure.functions.maven.plugin.version\u003e1.20.0\u003c/azure.functions.maven.plugin.version\u003e"},{"lineNumber":23,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cazure.functions.java.library.version\u003e2.0.1\u003c/azure.functions.java.library.version\u003e"},{"lineNumber":24,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cfunctionAppName\u003ekmaooad-functions-20220927162321908\u003c/functionAppName\u003e"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"        \u003cstart-class\u003eedu.kmaooad.Application\u003c/start-class\u003e"},{"lineNumber":26,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003c/properties\u003e"},{"lineNumber":27,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"    \u003cdependencyManagement\u003e"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"        \u003cdependencies\u003e"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"            \u003cdependency\u003e"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"                \u003cgroupId\u003eorg.springframework.cloud\u003c/groupId\u003e"},{"lineNumber":32,"author":{"gitId":"sun-ok"},"content":"                \u003cartifactId\u003espring-cloud-function-dependencies\u003c/artifactId\u003e"},{"lineNumber":33,"author":{"gitId":"sun-ok"},"content":"                \u003cversion\u003e3.2.3\u003c/version\u003e"},{"lineNumber":34,"author":{"gitId":"sun-ok"},"content":"                \u003ctype\u003epom\u003c/type\u003e"},{"lineNumber":35,"author":{"gitId":"sun-ok"},"content":"                \u003cscope\u003eimport\u003c/scope\u003e"},{"lineNumber":36,"author":{"gitId":"sun-ok"},"content":"            \u003c/dependency\u003e"},{"lineNumber":37,"author":{"gitId":"sun-ok"},"content":"        \u003c/dependencies\u003e"},{"lineNumber":38,"author":{"gitId":"sun-ok"},"content":"    \u003c/dependencyManagement\u003e"},{"lineNumber":39,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":40,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cdependencies\u003e"},{"lineNumber":41,"author":{"gitId":"xOooQOFU"},"content":""},{"lineNumber":42,"author":{"gitId":"xOooQOFU"},"content":"        \u003cdependency\u003e"},{"lineNumber":43,"author":{"gitId":"sun-ok"},"content":"            \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e"},{"lineNumber":44,"author":{"gitId":"sun-ok"},"content":"            \u003cartifactId\u003espring-boot-starter-data-mongodb\u003c/artifactId\u003e"},{"lineNumber":45,"author":{"gitId":"sun-ok"},"content":"            \u003cversion\u003e2.7.5\u003c/version\u003e"},{"lineNumber":46,"author":{"gitId":"sun-ok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":47,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":48,"author":{"gitId":"sun-ok"},"content":"        \u003cdependency\u003e"},{"lineNumber":49,"author":{"gitId":"sun-ok"},"content":"            \u003cgroupId\u003eorg.springframework.cloud\u003c/groupId\u003e"},{"lineNumber":50,"author":{"gitId":"sun-ok"},"content":"            \u003cartifactId\u003espring-cloud-function-adapter-azure\u003c/artifactId\u003e"},{"lineNumber":51,"author":{"gitId":"sun-ok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":52,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":53,"author":{"gitId":"sun-ok"},"content":"        \u003cdependency\u003e"},{"lineNumber":54,"author":{"gitId":"sun-ok"},"content":"            \u003cgroupId\u003eorg.springframework.cloud\u003c/groupId\u003e"},{"lineNumber":55,"author":{"gitId":"sun-ok"},"content":"            \u003cartifactId\u003espring-cloud-starter-function-webflux\u003c/artifactId\u003e"},{"lineNumber":56,"author":{"gitId":"sun-ok"},"content":"            \u003cscope\u003eprovided\u003c/scope\u003e"},{"lineNumber":57,"author":{"gitId":"sun-ok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":58,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":59,"author":{"gitId":"sun-ok"},"content":"        \u003cdependency\u003e"},{"lineNumber":60,"author":{"gitId":"sun-ok"},"content":"            \u003cgroupId\u003eorg.testcontainers\u003c/groupId\u003e"},{"lineNumber":61,"author":{"gitId":"sun-ok"},"content":"            \u003cartifactId\u003emongodb\u003c/artifactId\u003e"},{"lineNumber":62,"author":{"gitId":"sun-ok"},"content":"            \u003cversion\u003e1.17.5\u003c/version\u003e"},{"lineNumber":63,"author":{"gitId":"sun-ok"},"content":"            \u003cscope\u003etest\u003c/scope\u003e"},{"lineNumber":64,"author":{"gitId":"xOooQOFU"},"content":"        \u003c/dependency\u003e"},{"lineNumber":65,"author":{"gitId":"xOooQOFU"},"content":""},{"lineNumber":66,"author":{"gitId":"xOooQOFU"},"content":"        \u003cdependency\u003e"},{"lineNumber":67,"author":{"gitId":"xOooQOFU"},"content":"            \u003cgroupId\u003eorg.json\u003c/groupId\u003e"},{"lineNumber":68,"author":{"gitId":"xOooQOFU"},"content":"            \u003cartifactId\u003ejson\u003c/artifactId\u003e"},{"lineNumber":69,"author":{"gitId":"xOooQOFU"},"content":"            \u003cversion\u003e20220320\u003c/version\u003e"},{"lineNumber":70,"author":{"gitId":"xOooQOFU"},"content":"        \u003c/dependency\u003e"},{"lineNumber":71,"author":{"gitId":"xOooQOFU"},"content":""},{"lineNumber":72,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cdependency\u003e"},{"lineNumber":73,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cgroupId\u003ecom.microsoft.azure.functions\u003c/groupId\u003e"},{"lineNumber":74,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cartifactId\u003eazure-functions-java-library\u003c/artifactId\u003e"},{"lineNumber":75,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cversion\u003e${azure.functions.java.library.version}\u003c/version\u003e"},{"lineNumber":76,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003c/dependency\u003e"},{"lineNumber":77,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":78,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003c!-- Test --\u003e"},{"lineNumber":79,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cdependency\u003e"},{"lineNumber":80,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cgroupId\u003eorg.junit.jupiter\u003c/groupId\u003e"},{"lineNumber":81,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cartifactId\u003ejunit-jupiter\u003c/artifactId\u003e"},{"lineNumber":82,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cversion\u003e5.4.2\u003c/version\u003e"},{"lineNumber":83,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cscope\u003etest\u003c/scope\u003e"},{"lineNumber":84,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003c/dependency\u003e"},{"lineNumber":85,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":86,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cdependency\u003e"},{"lineNumber":87,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cgroupId\u003eorg.mockito\u003c/groupId\u003e"},{"lineNumber":88,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cartifactId\u003emockito-core\u003c/artifactId\u003e"},{"lineNumber":89,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cversion\u003e2.23.4\u003c/version\u003e"},{"lineNumber":90,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cscope\u003etest\u003c/scope\u003e"},{"lineNumber":91,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003c/dependency\u003e"},{"lineNumber":92,"author":{"gitId":"xOooQOFU"},"content":"        \u003cdependency\u003e"},{"lineNumber":93,"author":{"gitId":"xOooQOFU"},"content":"            \u003cgroupId\u003eorg.mortbay.jetty\u003c/groupId\u003e"},{"lineNumber":94,"author":{"gitId":"xOooQOFU"},"content":"            \u003cartifactId\u003ejetty-util\u003c/artifactId\u003e"},{"lineNumber":95,"author":{"gitId":"xOooQOFU"},"content":"            \u003cversion\u003e6.1.25\u003c/version\u003e"},{"lineNumber":96,"author":{"gitId":"xOooQOFU"},"content":"        \u003c/dependency\u003e"},{"lineNumber":97,"author":{"gitId":"sun-ok"},"content":"        \u003cdependency\u003e"},{"lineNumber":98,"author":{"gitId":"sun-ok"},"content":"            \u003cgroupId\u003eorg.testng\u003c/groupId\u003e"},{"lineNumber":99,"author":{"gitId":"sun-ok"},"content":"            \u003cartifactId\u003etestng\u003c/artifactId\u003e"},{"lineNumber":100,"author":{"gitId":"sun-ok"},"content":"            \u003cversion\u003eRELEASE\u003c/version\u003e"},{"lineNumber":101,"author":{"gitId":"sun-ok"},"content":"            \u003cscope\u003etest\u003c/scope\u003e"},{"lineNumber":102,"author":{"gitId":"sun-ok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":103,"author":{"gitId":"sun-ok"},"content":"        \u003cdependency\u003e"},{"lineNumber":104,"author":{"gitId":"sun-ok"},"content":"            \u003cgroupId\u003eorg.projectlombok\u003c/groupId\u003e"},{"lineNumber":105,"author":{"gitId":"sun-ok"},"content":"            \u003cartifactId\u003elombok\u003c/artifactId\u003e"},{"lineNumber":106,"author":{"gitId":"sun-ok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":107,"author":{"gitId":"sun-ok"},"content":"        \u003cdependency\u003e"},{"lineNumber":108,"author":{"gitId":"sun-ok"},"content":"            \u003cgroupId\u003eorg.springframework\u003c/groupId\u003e"},{"lineNumber":109,"author":{"gitId":"sun-ok"},"content":"            \u003cartifactId\u003espring-test\u003c/artifactId\u003e"},{"lineNumber":110,"author":{"gitId":"sun-ok"},"content":"            \u003cversion\u003e5.3.18\u003c/version\u003e"},{"lineNumber":111,"author":{"gitId":"sun-ok"},"content":"            \u003cscope\u003etest\u003c/scope\u003e"},{"lineNumber":112,"author":{"gitId":"sun-ok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":113,"author":{"gitId":"sun-ok"},"content":"        \u003cdependency\u003e"},{"lineNumber":114,"author":{"gitId":"sun-ok"},"content":"            \u003cgroupId\u003eorg.telegram\u003c/groupId\u003e"},{"lineNumber":115,"author":{"gitId":"sun-ok"},"content":"            \u003cartifactId\u003etelegrambots-spring-boot-starter\u003c/artifactId\u003e"},{"lineNumber":116,"author":{"gitId":"sun-ok"},"content":"            \u003cversion\u003e6.1.0\u003c/version\u003e"},{"lineNumber":117,"author":{"gitId":"sun-ok"},"content":"        \u003c/dependency\u003e"},{"lineNumber":118,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003c/dependencies\u003e"},{"lineNumber":119,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":120,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003cbuild\u003e"},{"lineNumber":121,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003cplugins\u003e"},{"lineNumber":122,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cplugin\u003e"},{"lineNumber":123,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cgroupId\u003eorg.apache.maven.plugins\u003c/groupId\u003e"},{"lineNumber":124,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cartifactId\u003emaven-compiler-plugin\u003c/artifactId\u003e"},{"lineNumber":125,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cversion\u003e3.8.1\u003c/version\u003e"},{"lineNumber":126,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cconfiguration\u003e"},{"lineNumber":127,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003csource\u003e${java.version}\u003c/source\u003e"},{"lineNumber":128,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003ctarget\u003e${java.version}\u003c/target\u003e"},{"lineNumber":129,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cencoding\u003e${project.build.sourceEncoding}\u003c/encoding\u003e"},{"lineNumber":130,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003c/configuration\u003e"},{"lineNumber":131,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003c/plugin\u003e"},{"lineNumber":132,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cplugin\u003e"},{"lineNumber":133,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cgroupId\u003ecom.microsoft.azure\u003c/groupId\u003e"},{"lineNumber":134,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cartifactId\u003eazure-functions-maven-plugin\u003c/artifactId\u003e"},{"lineNumber":135,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cversion\u003e${azure.functions.maven.plugin.version}\u003c/version\u003e"},{"lineNumber":136,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cconfiguration\u003e"},{"lineNumber":137,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- function app name --\u003e"},{"lineNumber":138,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cappName\u003e${functionAppName}\u003c/appName\u003e"},{"lineNumber":139,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- function app resource group --\u003e"},{"lineNumber":140,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cresourceGroup\u003ejava-functions-group\u003c/resourceGroup\u003e"},{"lineNumber":141,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- function app service plan name --\u003e"},{"lineNumber":142,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cappServicePlanName\u003ejava-functions-app-service-plan\u003c/appServicePlanName\u003e"},{"lineNumber":143,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- function app region--\u003e"},{"lineNumber":144,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-regions for all valid values --\u003e"},{"lineNumber":145,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cregion\u003ewestus\u003c/region\u003e"},{"lineNumber":146,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- function pricingTier, default to be consumption if not specified --\u003e"},{"lineNumber":147,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-pricing-tiers for all valid values --\u003e"},{"lineNumber":148,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- \u003cpricingTier\u003e\u003c/pricingTier\u003e --\u003e"},{"lineNumber":149,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- Whether to disable application insights, default is false --\u003e"},{"lineNumber":150,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details for all valid configurations for application insights--\u003e"},{"lineNumber":151,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c!-- \u003cdisableAppInsights\u003e\u003c/disableAppInsights\u003e --\u003e"},{"lineNumber":152,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cruntime\u003e"},{"lineNumber":153,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003c!-- runtime os, could be windows, linux or docker--\u003e"},{"lineNumber":154,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cos\u003ewindows\u003c/os\u003e"},{"lineNumber":155,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cjavaVersion\u003e11\u003c/javaVersion\u003e"},{"lineNumber":156,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c/runtime\u003e"},{"lineNumber":157,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cappSettings\u003e"},{"lineNumber":158,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cproperty\u003e"},{"lineNumber":159,"author":{"gitId":"github-classroom[bot]"},"content":"                            \u003cname\u003eFUNCTIONS_EXTENSION_VERSION\u003c/name\u003e"},{"lineNumber":160,"author":{"gitId":"github-classroom[bot]"},"content":"                            \u003cvalue\u003e~4\u003c/value\u003e"},{"lineNumber":161,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003c/property\u003e"},{"lineNumber":162,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c/appSettings\u003e"},{"lineNumber":163,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003c/configuration\u003e"},{"lineNumber":164,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cexecutions\u003e"},{"lineNumber":165,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cexecution\u003e"},{"lineNumber":166,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cid\u003epackage-functions\u003c/id\u003e"},{"lineNumber":167,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cgoals\u003e"},{"lineNumber":168,"author":{"gitId":"github-classroom[bot]"},"content":"                            \u003cgoal\u003epackage\u003c/goal\u003e"},{"lineNumber":169,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003c/goals\u003e"},{"lineNumber":170,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c/execution\u003e"},{"lineNumber":171,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003c/executions\u003e"},{"lineNumber":172,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003c/plugin\u003e"},{"lineNumber":173,"author":{"gitId":"Anton Shabinskiy"},"content":"            \u003cplugin\u003e"},{"lineNumber":174,"author":{"gitId":"Anton Shabinskiy"},"content":"                \u003cgroupId\u003eorg.apache.maven.plugins\u003c/groupId\u003e"},{"lineNumber":175,"author":{"gitId":"Anton Shabinskiy"},"content":"                \u003cartifactId\u003emaven-surefire-plugin\u003c/artifactId\u003e"},{"lineNumber":176,"author":{"gitId":"Anton Shabinskiy"},"content":"                \u003cversion\u003e3.0.0-M7\u003c/version\u003e"},{"lineNumber":177,"author":{"gitId":"Anton Shabinskiy"},"content":"                \u003cconfiguration\u003e"},{"lineNumber":178,"author":{"gitId":"Anton Shabinskiy"},"content":"                    \u003cfailIfNoTests\u003etrue\u003c/failIfNoTests\u003e"},{"lineNumber":179,"author":{"gitId":"Anton Shabinskiy"},"content":"                \u003c/configuration\u003e"},{"lineNumber":180,"author":{"gitId":"Anton Shabinskiy"},"content":"            \u003c/plugin\u003e"},{"lineNumber":181,"author":{"gitId":"Anton Shabinskiy"},"content":"            \u003cplugin\u003e"},{"lineNumber":182,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\u003cgroupId\u003eorg.jacoco\u003c/groupId\u003e"},{"lineNumber":183,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\u003cartifactId\u003ejacoco-maven-plugin\u003c/artifactId\u003e"},{"lineNumber":184,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\u003cversion\u003e0.8.8\u003c/version\u003e"},{"lineNumber":185,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\u003cexecutions\u003e"},{"lineNumber":186,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\u003cexecution\u003e"},{"lineNumber":187,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\t\u003cid\u003eprepare-agent\u003c/id\u003e"},{"lineNumber":188,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\t\u003cgoals\u003e"},{"lineNumber":189,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\t\t\u003cgoal\u003eprepare-agent\u003c/goal\u003e"},{"lineNumber":190,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\t\u003c/goals\u003e"},{"lineNumber":191,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\u003c/execution\u003e"},{"lineNumber":192,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\u003cexecution\u003e"},{"lineNumber":193,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\t\u003cid\u003ereport\u003c/id\u003e"},{"lineNumber":194,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\t\u003cphase\u003etest\u003c/phase\u003e"},{"lineNumber":195,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\t\u003cgoals\u003e"},{"lineNumber":196,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\t\t\u003cgoal\u003ereport\u003c/goal\u003e"},{"lineNumber":197,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\t\u003c/goals\u003e"},{"lineNumber":198,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\t\u003c/execution\u003e"},{"lineNumber":199,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\t\u003c/executions\u003e"},{"lineNumber":200,"author":{"gitId":"Anton Shabinskiy"},"content":"\t\t\t\u003c/plugin\u003e"},{"lineNumber":201,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003c!--Remove obj folder generated by .NET SDK in maven clean--\u003e"},{"lineNumber":202,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003cplugin\u003e"},{"lineNumber":203,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cartifactId\u003emaven-clean-plugin\u003c/artifactId\u003e"},{"lineNumber":204,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cversion\u003e3.1.0\u003c/version\u003e"},{"lineNumber":205,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003cconfiguration\u003e"},{"lineNumber":206,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003cfilesets\u003e"},{"lineNumber":207,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003cfileset\u003e"},{"lineNumber":208,"author":{"gitId":"github-classroom[bot]"},"content":"                            \u003cdirectory\u003eobj\u003c/directory\u003e"},{"lineNumber":209,"author":{"gitId":"github-classroom[bot]"},"content":"                        \u003c/fileset\u003e"},{"lineNumber":210,"author":{"gitId":"github-classroom[bot]"},"content":"                    \u003c/filesets\u003e"},{"lineNumber":211,"author":{"gitId":"github-classroom[bot]"},"content":"                \u003c/configuration\u003e"},{"lineNumber":212,"author":{"gitId":"github-classroom[bot]"},"content":"            \u003c/plugin\u003e"},{"lineNumber":213,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":214,"author":{"gitId":"sun-ok"},"content":"            \u003cplugin\u003e"},{"lineNumber":215,"author":{"gitId":"sun-ok"},"content":"                \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e"},{"lineNumber":216,"author":{"gitId":"sun-ok"},"content":"                \u003cartifactId\u003espring-boot-maven-plugin\u003c/artifactId\u003e"},{"lineNumber":217,"author":{"gitId":"sun-ok"},"content":"            \u003c/plugin\u003e"},{"lineNumber":218,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":219,"author":{"gitId":"github-classroom[bot]"},"content":"        \u003c/plugins\u003e"},{"lineNumber":220,"author":{"gitId":"github-classroom[bot]"},"content":"    \u003c/build\u003e"},{"lineNumber":221,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":222,"author":{"gitId":"sun-ok"},"content":"    \u003crepositories\u003e"},{"lineNumber":223,"author":{"gitId":"sun-ok"},"content":"        \u003crepository\u003e"},{"lineNumber":224,"author":{"gitId":"sun-ok"},"content":"            \u003cid\u003espring-snapshots\u003c/id\u003e"},{"lineNumber":225,"author":{"gitId":"sun-ok"},"content":"            \u003cname\u003eSpring Snapshots\u003c/name\u003e"},{"lineNumber":226,"author":{"gitId":"sun-ok"},"content":"            \u003curl\u003ehttps://repo.spring.io/libs-snapshot-local\u003c/url\u003e"},{"lineNumber":227,"author":{"gitId":"sun-ok"},"content":"            \u003csnapshots\u003e"},{"lineNumber":228,"author":{"gitId":"sun-ok"},"content":"                \u003cenabled\u003etrue\u003c/enabled\u003e"},{"lineNumber":229,"author":{"gitId":"sun-ok"},"content":"            \u003c/snapshots\u003e"},{"lineNumber":230,"author":{"gitId":"sun-ok"},"content":"            \u003creleases\u003e"},{"lineNumber":231,"author":{"gitId":"sun-ok"},"content":"                \u003cenabled\u003efalse\u003c/enabled\u003e"},{"lineNumber":232,"author":{"gitId":"sun-ok"},"content":"            \u003c/releases\u003e"},{"lineNumber":233,"author":{"gitId":"sun-ok"},"content":"        \u003c/repository\u003e"},{"lineNumber":234,"author":{"gitId":"sun-ok"},"content":"        \u003crepository\u003e"},{"lineNumber":235,"author":{"gitId":"sun-ok"},"content":"            \u003cid\u003espring-milestones\u003c/id\u003e"},{"lineNumber":236,"author":{"gitId":"sun-ok"},"content":"            \u003cname\u003eSpring Milestones\u003c/name\u003e"},{"lineNumber":237,"author":{"gitId":"sun-ok"},"content":"            \u003curl\u003ehttps://repo.spring.io/libs-milestone-local\u003c/url\u003e"},{"lineNumber":238,"author":{"gitId":"sun-ok"},"content":"            \u003csnapshots\u003e"},{"lineNumber":239,"author":{"gitId":"sun-ok"},"content":"                \u003cenabled\u003efalse\u003c/enabled\u003e"},{"lineNumber":240,"author":{"gitId":"sun-ok"},"content":"            \u003c/snapshots\u003e"},{"lineNumber":241,"author":{"gitId":"sun-ok"},"content":"        \u003c/repository\u003e"},{"lineNumber":242,"author":{"gitId":"sun-ok"},"content":"        \u003crepository\u003e"},{"lineNumber":243,"author":{"gitId":"sun-ok"},"content":"            \u003cid\u003espring-releases\u003c/id\u003e"},{"lineNumber":244,"author":{"gitId":"sun-ok"},"content":"            \u003cname\u003eSpring Releases\u003c/name\u003e"},{"lineNumber":245,"author":{"gitId":"sun-ok"},"content":"            \u003curl\u003ehttps://repo.spring.io/release\u003c/url\u003e"},{"lineNumber":246,"author":{"gitId":"sun-ok"},"content":"            \u003csnapshots\u003e"},{"lineNumber":247,"author":{"gitId":"sun-ok"},"content":"                \u003cenabled\u003efalse\u003c/enabled\u003e"},{"lineNumber":248,"author":{"gitId":"sun-ok"},"content":"            \u003c/snapshots\u003e"},{"lineNumber":249,"author":{"gitId":"sun-ok"},"content":"        \u003c/repository\u003e"},{"lineNumber":250,"author":{"gitId":"sun-ok"},"content":"    \u003c/repositories\u003e"},{"lineNumber":251,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":252,"author":{"gitId":"github-classroom[bot]"},"content":"\u003c/project\u003e"}],"authorContributionMap":{"Anton Shabinskiy":28,"github-classroom[bot]":110,"sun-ok":99,"xOooQOFU":15}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/Application.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import org.springframework.boot.SpringApplication;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import org.springframework.boot.autoconfigure.SpringBootApplication;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"@SpringBootApplication"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"public class Application {"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"    public static void main(String[] args) {"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"        SpringApplication.run(Application.class, args);"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":13}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/Dispatcher.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.handlers.Handler;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.services.SessionService;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.models.Session;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.StateMachine;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.CallbackQuery;"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"import java.util.ArrayList;"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"import java.util.List;"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"import java.util.Optional;"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"@Component"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"public class Dispatcher {"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"    private final List\u003cHandler\u003e handlers \u003d new ArrayList\u003c\u003e();"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    private final SessionService sessionService;"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"    private final StateMachine stateMachine;"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    public Dispatcher(StateMachine stateMachine, SessionService sessionService) {"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"        this.stateMachine \u003d stateMachine;"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"        this.sessionService \u003d sessionService;"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"    public void registerHandler(Handler handler) {"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"        handlers.add(handler);"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":32,"author":{"gitId":"sun-ok"},"content":"    public boolean dispatch(Message message) {"},{"lineNumber":33,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":34,"author":{"gitId":"sun-ok"},"content":"        Optional\u003cHandler\u003e commandHandler \u003d handlers.stream().filter(h -\u003e h.hasCommand(message.getText())).findFirst();"},{"lineNumber":35,"author":{"gitId":"sun-ok"},"content":"        if (commandHandler.isPresent()) {"},{"lineNumber":36,"author":{"gitId":"sun-ok"},"content":"            commandHandler.get().handle(message, stateMachine);"},{"lineNumber":37,"author":{"gitId":"sun-ok"},"content":"            return true;"},{"lineNumber":38,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":39,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":40,"author":{"gitId":"sun-ok"},"content":"        Optional\u003cHandler\u003e stateHandler \u003d getHandlerByState(message.getChatId());"},{"lineNumber":41,"author":{"gitId":"sun-ok"},"content":"        if (stateHandler.isPresent()) {"},{"lineNumber":42,"author":{"gitId":"sun-ok"},"content":"            stateHandler.get().handle(message, stateMachine);"},{"lineNumber":43,"author":{"gitId":"sun-ok"},"content":"            return true;"},{"lineNumber":44,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":45,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":46,"author":{"gitId":"sun-ok"},"content":"        return false;"},{"lineNumber":47,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":49,"author":{"gitId":"sun-ok"},"content":"    public boolean dispatch(CallbackQuery callbackQuery) {"},{"lineNumber":50,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":51,"author":{"gitId":"sun-ok"},"content":"        Optional\u003cHandler\u003e stateHandler \u003d getHandlerByState(callbackQuery.getMessage().getChatId());"},{"lineNumber":52,"author":{"gitId":"sun-ok"},"content":"        if (stateHandler.isPresent()) {"},{"lineNumber":53,"author":{"gitId":"sun-ok"},"content":"            stateHandler.get().handle(callbackQuery, stateMachine);"},{"lineNumber":54,"author":{"gitId":"sun-ok"},"content":"            return true;"},{"lineNumber":55,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":56,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":57,"author":{"gitId":"sun-ok"},"content":"        return false;"},{"lineNumber":58,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":60,"author":{"gitId":"sun-ok"},"content":"    private Optional\u003cHandler\u003e getHandlerByState(Long chatId) {"},{"lineNumber":61,"author":{"gitId":"sun-ok"},"content":"        Session session \u003d sessionService.getSessionByUserId(chatId).orElseGet(() -\u003e {"},{"lineNumber":62,"author":{"gitId":"sun-ok"},"content":"                    try {"},{"lineNumber":63,"author":{"gitId":"sun-ok"},"content":"                        return sessionService.createSessionById(chatId);"},{"lineNumber":64,"author":{"gitId":"sun-ok"},"content":"                    } catch (Exception e) {"},{"lineNumber":65,"author":{"gitId":"sun-ok"},"content":"                        throw new RuntimeException(e);"},{"lineNumber":66,"author":{"gitId":"sun-ok"},"content":"                    }"},{"lineNumber":67,"author":{"gitId":"sun-ok"},"content":"                });"},{"lineNumber":68,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":69,"author":{"gitId":"sun-ok"},"content":"        return handlers.stream().filter(h -\u003e h.getState() !\u003d null).filter(h -\u003e h.getState().key().equalsIgnoreCase(session.currentState)).findFirst();"},{"lineNumber":70,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":71}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/config/MongoMapKeyDotReplacementConfiguration.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.config;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import org.springframework.context.annotation.Configuration;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.springframework.data.mongodb.core.convert.MappingMongoConverter;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"@Configuration"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"public class MongoMapKeyDotReplacementConfiguration {"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"    @Autowired"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"    public void setMapKeyDotReplacement(MappingMongoConverter mongoConverter) {"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"        mongoConverter.setMapKeyDotReplacement(\"#\");"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":14}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/config/SpringConfig.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.config;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import org.springframework.context.annotation.Bean;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.springframework.context.annotation.Configuration;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.methods.updates.SetWebhook;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import org.springframework.context.MessageSource;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"import org.springframework.context.support.ReloadableResourceBundleMessageSource;"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"@Configuration"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"public class SpringConfig {"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"    private final TelegramConfig telegramConfig;"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"    @Autowired"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    public SpringConfig(TelegramConfig telegramConfig) {"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"        this.telegramConfig \u003d telegramConfig;"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    @Bean"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"    public SetWebhook setWebhookInstance() {"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"        return SetWebhook.builder().url(telegramConfig.getWebhookPath()).build();"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"    @Bean"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"    public MessageSource messageSource() {"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"        ReloadableResourceBundleMessageSource messageSource"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":"                \u003d new ReloadableResourceBundleMessageSource();"},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"        messageSource.setBasename(\"classpath:messages\");"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"        messageSource.setDefaultEncoding(\"UTF-8\");"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"        return messageSource;"},{"lineNumber":32,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":33}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/config/TelegramConfig.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.config;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import lombok.Getter;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import org.springframework.beans.factory.annotation.Value;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"/**"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":" * Bot settings"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":" */"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"@Component"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"@Getter"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"public class TelegramConfig {"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    @Value(\"${webhook-path}\")"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"    String webhookPath;"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"    @Value(\"${bot-name}\")"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    String botName;"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"    @Value(\"${bot-token}\")"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    String botToken;"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":23}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handlers/Handler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.handlers;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.State;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.StateMachine;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.CallbackQuery;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"import java.util.ArrayList;"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"import java.util.List;"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"public abstract class Handler {"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"    protected Handler(List\u003cString\u003e commands, State state){"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"        this.commands \u003d commands;"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"        this.state \u003d state;"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"    public abstract void handle(Message message, StateMachine stateMachine);"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"    public void handle(CallbackQuery callbackQuery, StateMachine stateMachine) {}"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    final public List\u003cString\u003e getCommands() {"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"        return commands;"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"    final public State getState() {"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":"        return state;"},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"    final public boolean hasCommand(String command) {"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"        return getCommands() !\u003d null \u0026\u0026 getCommands().stream().anyMatch(c -\u003e (\"/\" + c).equalsIgnoreCase(command));"},{"lineNumber":32,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":34,"author":{"gitId":"sun-ok"},"content":"    private List\u003cString\u003e commands;"},{"lineNumber":35,"author":{"gitId":"sun-ok"},"content":"    private State state;"},{"lineNumber":36,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":36}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handlers/experts/CreateExpert.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.handlers.experts;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.State;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"public enum CreateExpert implements State, State.Group {"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"    NAME, EMAIL, TYPE, SAVING;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"    public String key() {"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"        return getClass().getName() + \".\" + name();"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":12}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handlers/experts/CreateExpertEmailHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.handlers.experts;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.services.TelegramService;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.handlers.Handler;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.models.Expert;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.StateMachine;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"@Component"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"public class CreateExpertEmailHandler extends Handler {"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    @Autowired"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"    public CreateExpertEmailHandler(TelegramService telegramService) {"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"        super(null, CreateExpert.EMAIL);"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    public void handle(Message message, StateMachine stateMachine) {"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"        try {"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"            Expert expert \u003d stateMachine"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"                    .getStateCache(message.getChatId(), CreateExpert.TYPE, Expert.class)"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"                    .orElseThrow();"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"            expert.setType(message.getText());"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"            stateMachine.updateStateCache(message.getChatId(), CreateExpert.EMAIL, expert);"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"            stateMachine.setState(message.getChatId(), CreateExpert.SAVING);"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"            telegramService.sendMessage(message.getChatId(), \"reply.getEmail\");"},{"lineNumber":32,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":33,"author":{"gitId":"sun-ok"},"content":"        } catch (Exception exception) {"},{"lineNumber":34,"author":{"gitId":"sun-ok"},"content":"            telegramService.sendMessage(message.getChatId(), \"reply.error\");"},{"lineNumber":35,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":36,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":37}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handlers/experts/CreateExpertNameHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.handlers.experts;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.services.TelegramService;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.handlers.Handler;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.State;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.StateMachine;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"import java.util.List;"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"@Component"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"public class CreateExpertNameHandler extends Handler {"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    public CreateExpertNameHandler(TelegramService telegramService) {"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"        super(List.of(\"createExpert\"), new State.Any());"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"    public void handle(Message message, StateMachine stateMachine) {"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"        try {"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"            stateMachine.setState(message.getChatId(), CreateExpert.TYPE);"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"            telegramService.sendMessage(message.getChatId(), \"reply.getName\");"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":"        } catch (Exception e) {"},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"            telegramService.sendMessage(message.getChatId(), \"reply.error\");"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":31}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handlers/experts/CreateExpertSavingHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.handlers.experts;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.services.ExpertsService;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.services.TelegramService;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.handlers.Handler;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.models.Expert;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.State;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.StateMachine;"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"@Component"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"public class CreateExpertSavingHandler extends Handler {"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"    private final ExpertsService expertService;"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"    public CreateExpertSavingHandler(TelegramService telegramService, ExpertsService expertService) {"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"        super(null, CreateExpert.SAVING);"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"        this.expertService \u003d expertService;"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"    public void handle(Message message, StateMachine stateMachine) {"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"        try {"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":"            Expert expert \u003d stateMachine"},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"                    .getStateCache(message.getChatId(), CreateExpert.EMAIL, Expert.class)"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"                    .orElseThrow();"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"            expert.setEmail(message.getText());"},{"lineNumber":32,"author":{"gitId":"sun-ok"},"content":"            expertService.createExpert(expert);"},{"lineNumber":33,"author":{"gitId":"sun-ok"},"content":"            stateMachine.setState(message.getChatId(), new State.Any());"},{"lineNumber":34,"author":{"gitId":"sun-ok"},"content":"            telegramService.sendMessage(message.getChatId(), \"reply.expertWasCreated\");"},{"lineNumber":35,"author":{"gitId":"sun-ok"},"content":"        } catch (Exception exception) {"},{"lineNumber":36,"author":{"gitId":"sun-ok"},"content":"            telegramService.sendMessage(message.getChatId(), \"reply.error\");"},{"lineNumber":37,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":38,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":39}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/handlers/experts/CreateExpertTypeHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.handlers.experts;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.services.TelegramService;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.handlers.Handler;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.models.Expert;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.StateMachine;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"@Component"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"public class CreateExpertTypeHandler extends Handler {"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"    private final TelegramService telegramService;"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    public CreateExpertTypeHandler(TelegramService telegramService) {"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"        super(null, CreateExpert.TYPE);"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"        this.telegramService \u003d telegramService;"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"    public void handle(Message message, StateMachine stateMachine) {"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"        try {"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"            //asked for name in previous step"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"            String expertName \u003d message.getText();"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"            Expert expert \u003d new Expert(null, null, expertName);"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"            stateMachine.updateStateCache(message.getChatId(), CreateExpert.NAME, expert);"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":"            stateMachine.setState(message.getChatId(), CreateExpert.EMAIL);"},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"            telegramService.sendMessage(message.getChatId(), \"reply.getType\");"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"        } catch (Exception exception) {"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"            telegramService.sendMessage(message.getChatId(), \"reply.error\");"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":32,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":33}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/models/Expert.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.models;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import com.fasterxml.jackson.annotation.JsonProperty;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import lombok.*;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"/*"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"* Entity that represents expert"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"*/"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"@AllArgsConstructor"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"@NoArgsConstructor"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"@Getter"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"@Setter"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"@ToString"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"public class Expert {"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"    @JsonProperty()"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    private String email;"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    @JsonProperty()"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"    private String type;"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    @JsonProperty()"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"    private String name;"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":25}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/models/Session.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.models;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.State;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import lombok.*;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import java.util.HashMap;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import java.util.Map;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"/*"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"* Stores the state of bot session with the user"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"*/"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"@AllArgsConstructor"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"@NoArgsConstructor"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"@Getter"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"@Setter"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"@ToString"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"public class Session"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"{"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    public Session(Long id) {"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"        this.id \u003d id;"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"        this.currentState \u003d new State.Any().key();"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"        this.statesCache \u003d new HashMap\u003c\u003e();"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"    public Long id;"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"    public String currentState;"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":"    public Map\u003cString, String\u003e statesCache;"},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":28}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/repository/ExpertsRepository.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.repository;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.models.Expert;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import org.springframework.data.mongodb.repository.MongoRepository;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Repository;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"@Repository"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"public interface ExpertsRepository extends MongoRepository\u003cExpert, String\u003e {"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":9}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/repository/SessionRepository.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.repository;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.models.Session;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.springframework.data.mongodb.repository.MongoRepository;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"public interface SessionRepository extends MongoRepository\u003cSession, Long\u003e {"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":8}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/services/ExpertsService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.services;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.models.Expert;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"public interface ExpertsService {"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"    Expert createExpert(Expert expert);"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"    void deleteExpert(Expert expert);"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":10}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/services/ExpertsServiceImpl.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.services;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.models.Expert;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.repository.ExpertsRepository;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.springframework.beans.factory.annotation.Autowired;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Service;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"@Service"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"public class ExpertsServiceImpl implements ExpertsService {"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"    private final ExpertsRepository expertsRepository;"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"    @Autowired"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"    public ExpertsServiceImpl(ExpertsRepository expertsRepository) {"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"        this.expertsRepository \u003d expertsRepository;"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    public Expert createExpert(Expert expert){"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"        return expertsRepository.save(expert);"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    public void deleteExpert(Expert expert){"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"        expertsRepository.delete(expert);"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":25}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/services/LocaleMessageService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.services;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import org.springframework.beans.factory.annotation.Value;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import org.springframework.context.MessageSource;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Service;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import java.util.Locale;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"@Service"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"public class LocaleMessageService {"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"    private final Locale locale;"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"    private final MessageSource messageSource;"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"    public LocaleMessageService(@Value(\"${localeTag}\") String localeTag, MessageSource messageSource) {"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"        this.messageSource \u003d messageSource;"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"        this.locale \u003d Locale.forLanguageTag(localeTag);"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    public String getMessage(String message) {"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"        return messageSource.getMessage(message, null, locale);"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"    public String getMessage(String message, Object... args) {"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"        return messageSource.getMessage(message, args, locale);"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":28}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/services/SessionService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.services;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.models.Session;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.State;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import java.util.Optional;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"public interface SessionService {"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"    Optional\u003cSession\u003e getSessionByUserId(Long userId);"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"    Session createSessionById(Long userId) throws Exception;"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"    Session updateStateById(Long userId, State state) throws Exception;"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"    Session updateCacheById(Long userId, State.Group group, String cache) throws Exception;"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"    String getCacheById(Long userId, State.Group group) throws Exception;"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":19}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/services/SessionServiceImpl.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.services;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.statemachine.State;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.models.Session;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.repository.SessionRepository;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Service;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"import java.util.Map;"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"import java.util.Optional;"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"@Service"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"public class SessionServiceImpl implements SessionService {"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"    private final SessionRepository sessionRepository;"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    public SessionServiceImpl(SessionRepository sessionRepository) {"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"        this.sessionRepository \u003d sessionRepository;"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"    public Optional\u003cSession\u003e getSessionByUserId(Long userId) {"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"        return sessionRepository.findById(userId);"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"    public Session createSessionById(Long userId) throws Exception {"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"        Optional\u003cSession\u003e session \u003d sessionRepository.findById(userId);"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"        if (session.isPresent()) {"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"            throw new Exception();"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":32,"author":{"gitId":"sun-ok"},"content":"        return sessionRepository.save(new Session(userId));"},{"lineNumber":33,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":35,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":36,"author":{"gitId":"sun-ok"},"content":"    public Session updateStateById(Long userId, State state) throws Exception {"},{"lineNumber":37,"author":{"gitId":"sun-ok"},"content":"        Optional\u003cSession\u003e session \u003d sessionRepository.findById(userId);"},{"lineNumber":38,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":39,"author":{"gitId":"sun-ok"},"content":"        if (session.isEmpty()) {"},{"lineNumber":40,"author":{"gitId":"sun-ok"},"content":"            session \u003d Optional.of(createSessionById(userId));"},{"lineNumber":41,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":42,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":43,"author":{"gitId":"sun-ok"},"content":"        session.get().currentState \u003d state.key();"},{"lineNumber":44,"author":{"gitId":"sun-ok"},"content":"        return sessionRepository.save(session.get());"},{"lineNumber":45,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":47,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"sun-ok"},"content":"    public Session updateCacheById(Long userId, State.Group group, String cache) throws Exception {"},{"lineNumber":49,"author":{"gitId":"sun-ok"},"content":"        Optional\u003cSession\u003e session \u003d sessionRepository.findById(userId);"},{"lineNumber":50,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":51,"author":{"gitId":"sun-ok"},"content":"        if (session.isEmpty()) {"},{"lineNumber":52,"author":{"gitId":"sun-ok"},"content":"            session \u003d Optional.of(createSessionById(userId));"},{"lineNumber":53,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":54,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":55,"author":{"gitId":"sun-ok"},"content":"        session.get().statesCache.put(group.group(), cache);"},{"lineNumber":56,"author":{"gitId":"sun-ok"},"content":"        return sessionRepository.save(session.get());"},{"lineNumber":57,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":59,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":60,"author":{"gitId":"sun-ok"},"content":"    public String getCacheById(Long userId, State.Group group) throws Exception {"},{"lineNumber":61,"author":{"gitId":"sun-ok"},"content":"        Optional\u003cSession\u003e session \u003d sessionRepository.findById(userId);"},{"lineNumber":62,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":63,"author":{"gitId":"sun-ok"},"content":"        if (session.isEmpty()) {"},{"lineNumber":64,"author":{"gitId":"sun-ok"},"content":"            throw new Exception();"},{"lineNumber":65,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":66,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":67,"author":{"gitId":"sun-ok"},"content":"        Map\u003cString, String\u003e cacheMap \u003d session.get().statesCache;"},{"lineNumber":68,"author":{"gitId":"sun-ok"},"content":"        return cacheMap.get(group.group());"},{"lineNumber":69,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":70}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/services/TelegramService.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.services;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.telegram.TelegramApi;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Service;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.methods.ParseMode;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"@Service"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"public class TelegramService {"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"    private final TelegramApi telegramApi;"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"    private final LocaleMessageService localeMessageService;"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"    public TelegramService(TelegramApi telegramApi, LocaleMessageService localeMessageService) {"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"        this.telegramApi \u003d telegramApi;"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"        this.localeMessageService \u003d localeMessageService;"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"    public void sendMessage(Long chatId, String text) {"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"        SendMessage sendMessage \u003d SendMessage"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"                .builder()"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"                .text(localeMessageService.getMessage(text))"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"                .chatId(chatId.toString())"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"                .parseMode(ParseMode.HTML)"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"                .build();"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"        try {"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"            telegramApi.execute(sendMessage);"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":"        } catch (Exception ignored) {"},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":31}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/statemachine/State.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.statemachine;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"public interface State {"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"    default String key() {"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"        return getClass().getName();"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"    interface Group {"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"        default String group() {"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"            return getClass().getName();"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    class Any implements State {}"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":16}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/statemachine/StateMachine.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.statemachine;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import java.util.Optional;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"public interface StateMachine {"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"    void updateStateCache(Long userId, State.Group group, Object obj) throws Exception;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"    \u003cCache\u003e Optional\u003cCache\u003e getStateCache(Long userId, State.Group group, Class\u003cCache\u003e cacheClass);"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"    void setState(Long userId, State state) throws Exception;"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":12}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/statemachine/StateMachineImpl.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.statemachine;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import com.fasterxml.jackson.databind.ObjectMapper;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.services.SessionService;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import java.util.Optional;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"@Component"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"public class StateMachineImpl implements StateMachine {"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"    private final SessionService sessionService;"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"    public StateMachineImpl(SessionService sessionService) {"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"        this.sessionService \u003d sessionService;"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"    public void setState(Long userId, State state) throws Exception {"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"        sessionService.updateStateById(userId, state);"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":"    public void updateStateCache(Long userId, State.Group group, Object obj) throws Exception {"},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"        String cachedString \u003d new ObjectMapper().writeValueAsString(obj);"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"        sessionService.updateCacheById(userId, group, cachedString);"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"    public \u003cCache\u003e Optional\u003cCache\u003e getStateCache(Long userId, State.Group group, Class\u003cCache\u003e cacheClass) {"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"        try {"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"            String cache \u003d sessionService.getCacheById(userId, group);"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"            ObjectMapper mapper \u003d new ObjectMapper();"},{"lineNumber":32,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":33,"author":{"gitId":"sun-ok"},"content":"            return Optional.of(mapper.readValue(cache, cacheClass));"},{"lineNumber":34,"author":{"gitId":"sun-ok"},"content":"        } catch (Exception exception) {"},{"lineNumber":35,"author":{"gitId":"sun-ok"},"content":"            return Optional.empty();"},{"lineNumber":36,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":37,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":38}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/telegram/TelegramApi.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.telegram;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.config.TelegramConfig;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.bots.DefaultAbsSender;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.bots.DefaultBotOptions;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"@Component"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"public class TelegramApi extends DefaultAbsSender {"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"    TelegramConfig telegramConfig;"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"    protected TelegramApi(TelegramConfig telegramConfig) {"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"        super(new DefaultBotOptions());"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"        this.telegramConfig \u003d telegramConfig;"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":"    public String getBotToken() {"},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"        return telegramConfig.getBotToken();"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":21}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/webhook/TelegramWebHook.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.webhook;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.Dispatcher;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import edu.kmaooad.handlers.Handler;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import org.springframework.stereotype.Component;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.CallbackQuery;"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.Message;"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"import java.util.List;"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"import java.util.function.Function;"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":"@Component"},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"public class TelegramWebHook implements Function\u003cUpdate, BotApiMethod\u003c?\u003e\u003e {"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    private final Dispatcher dispatcher;"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    public TelegramWebHook(Dispatcher dispatcher, List\u003cHandler\u003e handlers) {"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"        this.dispatcher \u003d dispatcher;"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"        handlers.forEach(dispatcher::registerHandler);"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"    public BotApiMethod\u003c?\u003e apply(Update update) {"},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"        if (update \u003d\u003d null) {"},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":"            return new SendMessage(update.getMessage().getChatId().toString(), \"reply.error\");"},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"        if (update.hasMessage()) {"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"            Message message \u003d update.getMessage();"},{"lineNumber":32,"author":{"gitId":"sun-ok"},"content":"            dispatcher.dispatch(message);"},{"lineNumber":33,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":34,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":35,"author":{"gitId":"sun-ok"},"content":"        if (update.hasCallbackQuery()) {"},{"lineNumber":36,"author":{"gitId":"sun-ok"},"content":"            CallbackQuery callbackQuery \u003d update.getCallbackQuery();"},{"lineNumber":37,"author":{"gitId":"sun-ok"},"content":"            dispatcher.dispatch(callbackQuery);"},{"lineNumber":38,"author":{"gitId":"sun-ok"},"content":"        }"},{"lineNumber":39,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":40,"author":{"gitId":"sun-ok"},"content":"        return new SendMessage(update.getMessage().getChatId().toString(), \"reply.error\");"},{"lineNumber":41,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":42}},{"path":"kmaooad-functions/src/main/java/edu/kmaooad/webhook/TelegramWebhookHandler.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad.webhook;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"lizaboiarchuk"},"content":"import com.fasterxml.jackson.databind.ObjectMapper;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import com.microsoft.azure.functions.*;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"import com.microsoft.azure.functions.annotation.AuthorizationLevel;"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"import com.microsoft.azure.functions.annotation.FunctionName;"},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"import com.microsoft.azure.functions.annotation.HttpTrigger;"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"import org.springframework.cloud.function.adapter.azure.FunctionInvoker;"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.methods.BotApiMethod;"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"import java.util.Optional;"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"/**"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":" * Azure Functions with HTTP Trigger."},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":" */"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"public class TelegramWebhookHandler extends FunctionInvoker\u003cUpdate, BotApiMethod\u003c?\u003e\u003e {"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"    /**"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"     * This function listens at endpoint \"/api/TelegramWebhook\". To invoke it using \"curl\" command in bash:"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":"     * curl -d \"HTTP Body\" http://localhost:8080/api/TelegramWebhook"},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"     */"},{"lineNumber":23,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":24,"author":{"gitId":"sun-ok"},"content":"    @FunctionName(\"TelegramWebhook\")"},{"lineNumber":25,"author":{"gitId":"sun-ok"},"content":"    public HttpResponseMessage run("},{"lineNumber":26,"author":{"gitId":"sun-ok"},"content":"            @HttpTrigger("},{"lineNumber":27,"author":{"gitId":"sun-ok"},"content":"                    name \u003d \"req\","},{"lineNumber":28,"author":{"gitId":"sun-ok"},"content":"                    methods \u003d {HttpMethod.POST},"},{"lineNumber":29,"author":{"gitId":"sun-ok"},"content":"                    authLevel \u003d AuthorizationLevel.FUNCTION)"},{"lineNumber":30,"author":{"gitId":"sun-ok"},"content":"            HttpRequestMessage\u003cOptional\u003cString\u003e\u003e request,"},{"lineNumber":31,"author":{"gitId":"sun-ok"},"content":"            final ExecutionContext context) {"},{"lineNumber":32,"author":{"gitId":"lizaboiarchuk"},"content":"        Update update;"},{"lineNumber":33,"author":{"gitId":"lizaboiarchuk"},"content":"        try {"},{"lineNumber":34,"author":{"gitId":"lizaboiarchuk"},"content":"            final String body \u003d request.getBody().get();"},{"lineNumber":35,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":36,"author":{"gitId":"lizaboiarchuk"},"content":"            final ObjectMapper mapper \u003d new ObjectMapper();"},{"lineNumber":37,"author":{"gitId":"lizaboiarchuk"},"content":"            update \u003d mapper.readValue(body, Update.class);"},{"lineNumber":38,"author":{"gitId":"lizaboiarchuk"},"content":"            handleRequest(update, context);"},{"lineNumber":39,"author":{"gitId":"lizaboiarchuk"},"content":"        } catch (Exception exception) {"},{"lineNumber":40,"author":{"gitId":"lizaboiarchuk"},"content":"            System.err.println(exception.getMessage());"},{"lineNumber":41,"author":{"gitId":"lizaboiarchuk"},"content":"        }"},{"lineNumber":42,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":43,"author":{"gitId":"lizaboiarchuk"},"content":"        return request"},{"lineNumber":44,"author":{"gitId":"lizaboiarchuk"},"content":"                .createResponseBuilder(HttpStatus.OK)"},{"lineNumber":45,"author":{"gitId":"lizaboiarchuk"},"content":"                .build();"},{"lineNumber":46,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"lizaboiarchuk":15,"sun-ok":32}},{"path":"kmaooad-functions/src/main/resources/application.properties","fileType":"properties","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"#MongoDB server settings"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":"spring.data.mongodb.uri\u003dmongodb+srv://admin:admin@cluster0.tn0cl.mongodb.net/?retryWrites\u003dtrue\u0026w\u003dmajority"},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"spring.data.mongodb.database\u003dcaja22-bots"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"#Bot settings"},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":"api-url\u003d \"https://api.telegram.org/\""},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"webhook-path\u003d \"https://localhost:8080/api/TelegramWebhook\""},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":"bot-name\u003d kmaooad-bots"},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"bot-token\u003d 5769072800:AAFnJGcVW2BBIwq7x96SUYV-KFaOa11l-CQ"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"localeTag\u003den-En"}],"authorContributionMap":{"sun-ok":10}},{"path":"kmaooad-functions/src/main/resources/messages_en_EN.properties","fileType":"properties","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"reply.error \u003d Unexpected exception, try again"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":"reply.getEmail \u003d Enter expert`s email"},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"reply.getName \u003d Enter expert`s name"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"reply.getType \u003d Enter expert`s type"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":"reply.expertWasCreated \u003d Expert was created"}],"authorContributionMap":{"sun-ok":5}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/ExpertManagementTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"sun-ok"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":3,"author":{"gitId":"sun-ok"},"content":"import org.junit.jupiter.api.Test;"},{"lineNumber":4,"author":{"gitId":"sun-ok"},"content":"import org.telegram.telegrambots.meta.api.objects.Update;"},{"lineNumber":5,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":6,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":7,"author":{"gitId":"sun-ok"},"content":"public class ExpertManagementTest {"},{"lineNumber":8,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":9,"author":{"gitId":"sun-ok"},"content":"    final static String botUpdateQuery \u003d \"{\\\"update_id\\\":983721550,\\n\" +"},{"lineNumber":10,"author":{"gitId":"sun-ok"},"content":"            \"\\\"message\\\":{\\\"message_id\\\":6,\\\"from\\\":{\\\"id\\\":421325006,\\\"is_bot\\\":false,\\\"\" +"},{"lineNumber":11,"author":{"gitId":"sun-ok"},"content":"            \"first_name\\\":\\\"John\\\",\\\"last_name\\\":\\\"Smith\\\",\\\"username\\\":\\\"Sun_0k\" +"},{"lineNumber":12,"author":{"gitId":"sun-ok"},"content":"            \"\\\",\\\"language_code\\\":\\\"ru\\\"},\\\"chat\\\":{\\\"id\\\":421325006,\\\"first_name\\\":\\\"John\\\",\\\"l\" +"},{"lineNumber":13,"author":{"gitId":"sun-ok"},"content":"            \"ast_name\\\":\\\"Smith\\\",\\\"username\\\":\\\"Sun_0k\\\",\\\"type\\\":\\\"private\\\"},\\\"date\\\":1664723185,\\\"\" +"},{"lineNumber":14,"author":{"gitId":"sun-ok"},"content":"            \"text\\\":\\\"addExpert\\\"}}\";"},{"lineNumber":15,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":16,"author":{"gitId":"sun-ok"},"content":"    @Test"},{"lineNumber":17,"author":{"gitId":"sun-ok"},"content":"    public void createBotUpdate(){"},{"lineNumber":18,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":19,"author":{"gitId":"sun-ok"},"content":"        Update update \u003d new Update();"},{"lineNumber":20,"author":{"gitId":"sun-ok"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"sun-ok"},"content":""},{"lineNumber":22,"author":{"gitId":"sun-ok"},"content":"}"}],"authorContributionMap":{"sun-ok":22}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/HttpResponseMessageMock.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"github-classroom[bot]"},"content":"package edu.kmaooad;"},{"lineNumber":2,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":3,"author":{"gitId":"github-classroom[bot]"},"content":"import com.microsoft.azure.functions.*;"},{"lineNumber":4,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":5,"author":{"gitId":"github-classroom[bot]"},"content":"import java.util.Map;"},{"lineNumber":6,"author":{"gitId":"github-classroom[bot]"},"content":"import java.util.HashMap;"},{"lineNumber":7,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":8,"author":{"gitId":"github-classroom[bot]"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"github-classroom[bot]"},"content":" * The mock for HttpResponseMessage, can be used in unit tests to verify if the"},{"lineNumber":10,"author":{"gitId":"github-classroom[bot]"},"content":" * returned response by HTTP trigger function is correct or not."},{"lineNumber":11,"author":{"gitId":"github-classroom[bot]"},"content":" */"},{"lineNumber":12,"author":{"gitId":"github-classroom[bot]"},"content":"public class HttpResponseMessageMock implements HttpResponseMessage {"},{"lineNumber":13,"author":{"gitId":"github-classroom[bot]"},"content":"    private int httpStatusCode;"},{"lineNumber":14,"author":{"gitId":"github-classroom[bot]"},"content":"    private HttpStatusType httpStatus;"},{"lineNumber":15,"author":{"gitId":"github-classroom[bot]"},"content":"    private Object body;"},{"lineNumber":16,"author":{"gitId":"github-classroom[bot]"},"content":"    private Map\u003cString, String\u003e headers;"},{"lineNumber":17,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":18,"author":{"gitId":"github-classroom[bot]"},"content":"    public HttpResponseMessageMock(HttpStatusType status, Map\u003cString, String\u003e headers, Object body) {"},{"lineNumber":19,"author":{"gitId":"github-classroom[bot]"},"content":"        this.httpStatus \u003d status;"},{"lineNumber":20,"author":{"gitId":"github-classroom[bot]"},"content":"        this.httpStatusCode \u003d status.value();"},{"lineNumber":21,"author":{"gitId":"github-classroom[bot]"},"content":"        this.headers \u003d headers;"},{"lineNumber":22,"author":{"gitId":"github-classroom[bot]"},"content":"        this.body \u003d body;"},{"lineNumber":23,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":25,"author":{"gitId":"github-classroom[bot]"},"content":"    @Override"},{"lineNumber":26,"author":{"gitId":"github-classroom[bot]"},"content":"    public HttpStatusType getStatus() {"},{"lineNumber":27,"author":{"gitId":"github-classroom[bot]"},"content":"        return this.httpStatus;"},{"lineNumber":28,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":30,"author":{"gitId":"github-classroom[bot]"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"github-classroom[bot]"},"content":"    public int getStatusCode() {"},{"lineNumber":32,"author":{"gitId":"github-classroom[bot]"},"content":"        return httpStatusCode;"},{"lineNumber":33,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":35,"author":{"gitId":"github-classroom[bot]"},"content":"    @Override"},{"lineNumber":36,"author":{"gitId":"github-classroom[bot]"},"content":"    public String getHeader(String key) {"},{"lineNumber":37,"author":{"gitId":"github-classroom[bot]"},"content":"        return this.headers.get(key);"},{"lineNumber":38,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":40,"author":{"gitId":"github-classroom[bot]"},"content":"    @Override"},{"lineNumber":41,"author":{"gitId":"github-classroom[bot]"},"content":"    public Object getBody() {"},{"lineNumber":42,"author":{"gitId":"github-classroom[bot]"},"content":"        return this.body;"},{"lineNumber":43,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":44,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":45,"author":{"gitId":"github-classroom[bot]"},"content":"    public static class HttpResponseMessageBuilderMock implements HttpResponseMessage.Builder {"},{"lineNumber":46,"author":{"gitId":"github-classroom[bot]"},"content":"        private Object body;"},{"lineNumber":47,"author":{"gitId":"github-classroom[bot]"},"content":"        private int httpStatusCode;"},{"lineNumber":48,"author":{"gitId":"github-classroom[bot]"},"content":"        private Map\u003cString, String\u003e headers \u003d new HashMap\u003c\u003e();"},{"lineNumber":49,"author":{"gitId":"github-classroom[bot]"},"content":"        private HttpStatusType httpStatus;"},{"lineNumber":50,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":51,"author":{"gitId":"github-classroom[bot]"},"content":"        public Builder status(HttpStatus status) {"},{"lineNumber":52,"author":{"gitId":"github-classroom[bot]"},"content":"            this.httpStatusCode \u003d status.value();"},{"lineNumber":53,"author":{"gitId":"github-classroom[bot]"},"content":"            this.httpStatus \u003d status;"},{"lineNumber":54,"author":{"gitId":"github-classroom[bot]"},"content":"            return this;"},{"lineNumber":55,"author":{"gitId":"github-classroom[bot]"},"content":"        }"},{"lineNumber":56,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":57,"author":{"gitId":"github-classroom[bot]"},"content":"        @Override"},{"lineNumber":58,"author":{"gitId":"github-classroom[bot]"},"content":"        public Builder status(HttpStatusType httpStatusType) {"},{"lineNumber":59,"author":{"gitId":"github-classroom[bot]"},"content":"            this.httpStatusCode \u003d httpStatusType.value();"},{"lineNumber":60,"author":{"gitId":"github-classroom[bot]"},"content":"            this.httpStatus \u003d httpStatusType;"},{"lineNumber":61,"author":{"gitId":"github-classroom[bot]"},"content":"            return this;"},{"lineNumber":62,"author":{"gitId":"github-classroom[bot]"},"content":"        }"},{"lineNumber":63,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":64,"author":{"gitId":"github-classroom[bot]"},"content":"        @Override"},{"lineNumber":65,"author":{"gitId":"github-classroom[bot]"},"content":"        public HttpResponseMessage.Builder header(String key, String value) {"},{"lineNumber":66,"author":{"gitId":"github-classroom[bot]"},"content":"            this.headers.put(key, value);"},{"lineNumber":67,"author":{"gitId":"github-classroom[bot]"},"content":"            return this;"},{"lineNumber":68,"author":{"gitId":"github-classroom[bot]"},"content":"        }"},{"lineNumber":69,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":70,"author":{"gitId":"github-classroom[bot]"},"content":"        @Override"},{"lineNumber":71,"author":{"gitId":"github-classroom[bot]"},"content":"        public HttpResponseMessage.Builder body(Object body) {"},{"lineNumber":72,"author":{"gitId":"github-classroom[bot]"},"content":"            this.body \u003d body;"},{"lineNumber":73,"author":{"gitId":"github-classroom[bot]"},"content":"            return this;"},{"lineNumber":74,"author":{"gitId":"github-classroom[bot]"},"content":"        }"},{"lineNumber":75,"author":{"gitId":"github-classroom[bot]"},"content":""},{"lineNumber":76,"author":{"gitId":"github-classroom[bot]"},"content":"        @Override"},{"lineNumber":77,"author":{"gitId":"github-classroom[bot]"},"content":"        public HttpResponseMessage build() {"},{"lineNumber":78,"author":{"gitId":"github-classroom[bot]"},"content":"            return new HttpResponseMessageMock(this.httpStatus, this.headers, this.body);"},{"lineNumber":79,"author":{"gitId":"github-classroom[bot]"},"content":"        }"},{"lineNumber":80,"author":{"gitId":"github-classroom[bot]"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"github-classroom[bot]"},"content":"}"}],"authorContributionMap":{"github-classroom[bot]":81}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/services/ExpertServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"lizaboiarchuk"},"content":"package edu.kmaooad.services;"},{"lineNumber":2,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":3,"author":{"gitId":"lizaboiarchuk"},"content":"import edu.kmaooad.models.Expert;"},{"lineNumber":4,"author":{"gitId":"lizaboiarchuk"},"content":"import edu.kmaooad.repository.ExpertsRepository;"},{"lineNumber":5,"author":{"gitId":"lizaboiarchuk"},"content":"import org.junit.Test;"},{"lineNumber":6,"author":{"gitId":"lizaboiarchuk"},"content":"import static org.junit.Assert.assertEquals;"},{"lineNumber":7,"author":{"gitId":"lizaboiarchuk"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":8,"author":{"gitId":"lizaboiarchuk"},"content":"import static org.mockito.Mockito.*;"},{"lineNumber":9,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":10,"author":{"gitId":"lizaboiarchuk"},"content":"public class ExpertServiceTest {"},{"lineNumber":11,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":12,"author":{"gitId":"lizaboiarchuk"},"content":"    private final ExpertsRepository expertsRepository \u003d mock(ExpertsRepository.class);"},{"lineNumber":13,"author":{"gitId":"lizaboiarchuk"},"content":"    private final ExpertsService expertsService \u003d new ExpertsServiceImpl(expertsRepository);"},{"lineNumber":14,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":15,"author":{"gitId":"lizaboiarchuk"},"content":"    @Test"},{"lineNumber":16,"author":{"gitId":"lizaboiarchuk"},"content":"    public void shouldCreateExpert() {"},{"lineNumber":17,"author":{"gitId":"lizaboiarchuk"},"content":"        when(expertsRepository.save(any()))"},{"lineNumber":18,"author":{"gitId":"lizaboiarchuk"},"content":"                .then(invocationOnMock -\u003e invocationOnMock.getArgument(0));"},{"lineNumber":19,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":20,"author":{"gitId":"lizaboiarchuk"},"content":"        Expert expert \u003d new Expert(\"email\", \"type\", \"name\");"},{"lineNumber":21,"author":{"gitId":"lizaboiarchuk"},"content":"        Expert result \u003d expertsService.createExpert(expert);"},{"lineNumber":22,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":23,"author":{"gitId":"lizaboiarchuk"},"content":"        assertEquals(expert, result);"},{"lineNumber":24,"author":{"gitId":"lizaboiarchuk"},"content":"        verify(expertsRepository, times(1))"},{"lineNumber":25,"author":{"gitId":"lizaboiarchuk"},"content":"                .save(expert);"},{"lineNumber":26,"author":{"gitId":"lizaboiarchuk"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":28,"author":{"gitId":"lizaboiarchuk"},"content":"    @Test"},{"lineNumber":29,"author":{"gitId":"lizaboiarchuk"},"content":"    public void shouldDeleteExpert() {"},{"lineNumber":30,"author":{"gitId":"lizaboiarchuk"},"content":"        expertsService.deleteExpert(any());"},{"lineNumber":31,"author":{"gitId":"lizaboiarchuk"},"content":"        verify(expertsRepository, times(1))"},{"lineNumber":32,"author":{"gitId":"lizaboiarchuk"},"content":"                .delete(any());"},{"lineNumber":33,"author":{"gitId":"lizaboiarchuk"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":35,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":36,"author":{"gitId":"lizaboiarchuk"},"content":"}"}],"authorContributionMap":{"lizaboiarchuk":36}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/services/LocaleMessageServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"lizaboiarchuk"},"content":"package edu.kmaooad.services;"},{"lineNumber":2,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":3,"author":{"gitId":"lizaboiarchuk"},"content":"import org.junit.Test;"},{"lineNumber":4,"author":{"gitId":"lizaboiarchuk"},"content":"import org.springframework.context.MessageSource;"},{"lineNumber":5,"author":{"gitId":"lizaboiarchuk"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":6,"author":{"gitId":"lizaboiarchuk"},"content":"import static org.mockito.Mockito.*;"},{"lineNumber":7,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":8,"author":{"gitId":"lizaboiarchuk"},"content":"public class LocaleMessageServiceTest {"},{"lineNumber":9,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":10,"author":{"gitId":"lizaboiarchuk"},"content":"    private final MessageSource messageSource \u003d mock(MessageSource.class);"},{"lineNumber":11,"author":{"gitId":"lizaboiarchuk"},"content":"    private final LocaleMessageService localeMessageService \u003d new LocaleMessageService(\"${localeTag}\", messageSource);"},{"lineNumber":12,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":13,"author":{"gitId":"lizaboiarchuk"},"content":"    @Test"},{"lineNumber":14,"author":{"gitId":"lizaboiarchuk"},"content":"    public void shouldGetMessage() {"},{"lineNumber":15,"author":{"gitId":"lizaboiarchuk"},"content":"        when(messageSource.getMessage(any(), any(), any()))"},{"lineNumber":16,"author":{"gitId":"lizaboiarchuk"},"content":"                .then(invocationOnMock -\u003e invocationOnMock.getArgument(0));"},{"lineNumber":17,"author":{"gitId":"lizaboiarchuk"},"content":"        String message \u003d \"mess\";"},{"lineNumber":18,"author":{"gitId":"lizaboiarchuk"},"content":"        String result \u003d localeMessageService.getMessage(message);"},{"lineNumber":19,"author":{"gitId":"lizaboiarchuk"},"content":"        verify(messageSource, times(1))"},{"lineNumber":20,"author":{"gitId":"lizaboiarchuk"},"content":"                .getMessage(any(), any(), any());"},{"lineNumber":21,"author":{"gitId":"lizaboiarchuk"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":23,"author":{"gitId":"lizaboiarchuk"},"content":"}"}],"authorContributionMap":{"lizaboiarchuk":23}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/services/SessionServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"lizaboiarchuk"},"content":"package edu.kmaooad.services;"},{"lineNumber":2,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":3,"author":{"gitId":"lizaboiarchuk"},"content":"import edu.kmaooad.models.Session;"},{"lineNumber":4,"author":{"gitId":"lizaboiarchuk"},"content":"import edu.kmaooad.repository.SessionRepository;"},{"lineNumber":5,"author":{"gitId":"lizaboiarchuk"},"content":"import org.junit.Test;"},{"lineNumber":6,"author":{"gitId":"lizaboiarchuk"},"content":"import java.util.Optional;"},{"lineNumber":7,"author":{"gitId":"lizaboiarchuk"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":8,"author":{"gitId":"lizaboiarchuk"},"content":"import static org.mockito.Mockito.*;"},{"lineNumber":9,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":10,"author":{"gitId":"lizaboiarchuk"},"content":"public class SessionServiceTest {"},{"lineNumber":11,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":12,"author":{"gitId":"lizaboiarchuk"},"content":"    private final SessionRepository sessionRepository \u003d mock(SessionRepository.class);"},{"lineNumber":13,"author":{"gitId":"lizaboiarchuk"},"content":"    private final SessionService sessionService \u003d new SessionServiceImpl(sessionRepository);"},{"lineNumber":14,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":15,"author":{"gitId":"lizaboiarchuk"},"content":"    @Test"},{"lineNumber":16,"author":{"gitId":"lizaboiarchuk"},"content":"    public void shouldReturnUser() {"},{"lineNumber":17,"author":{"gitId":"lizaboiarchuk"},"content":"        when(sessionRepository.findById(any()))"},{"lineNumber":18,"author":{"gitId":"lizaboiarchuk"},"content":"                .then(invocationOnMock -\u003e invocationOnMock.getArgument(0));"},{"lineNumber":19,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":20,"author":{"gitId":"lizaboiarchuk"},"content":"        Optional\u003cSession\u003e session \u003d sessionService.getSessionByUserId(any());"},{"lineNumber":21,"author":{"gitId":"lizaboiarchuk"},"content":"        verify(sessionRepository, times(1))"},{"lineNumber":22,"author":{"gitId":"lizaboiarchuk"},"content":"                .findById(any());"},{"lineNumber":23,"author":{"gitId":"lizaboiarchuk"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":25,"author":{"gitId":"lizaboiarchuk"},"content":"    @Test"},{"lineNumber":26,"author":{"gitId":"lizaboiarchuk"},"content":"    public void shouldCreateSession() throws Exception {"},{"lineNumber":27,"author":{"gitId":"lizaboiarchuk"},"content":"        when(sessionRepository.save(any()))"},{"lineNumber":28,"author":{"gitId":"lizaboiarchuk"},"content":"                .then(invocationOnMock -\u003e invocationOnMock.getArgument(0));"},{"lineNumber":29,"author":{"gitId":"lizaboiarchuk"},"content":"        Session session \u003d sessionService.createSessionById(any());"},{"lineNumber":30,"author":{"gitId":"lizaboiarchuk"},"content":"        verify(sessionRepository, times(1))"},{"lineNumber":31,"author":{"gitId":"lizaboiarchuk"},"content":"                .save(any());"},{"lineNumber":32,"author":{"gitId":"lizaboiarchuk"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":34,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":35,"author":{"gitId":"lizaboiarchuk"},"content":"}"}],"authorContributionMap":{"lizaboiarchuk":35}},{"path":"kmaooad-functions/src/test/java/edu/kmaooad/services/TelegramServiceTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"lizaboiarchuk"},"content":"package edu.kmaooad.services;"},{"lineNumber":2,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":3,"author":{"gitId":"lizaboiarchuk"},"content":"import org.junit.Test;"},{"lineNumber":4,"author":{"gitId":"lizaboiarchuk"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":5,"author":{"gitId":"lizaboiarchuk"},"content":"import edu.kmaooad.telegram.TelegramApi;"},{"lineNumber":6,"author":{"gitId":"lizaboiarchuk"},"content":"import org.telegram.telegrambots.meta.api.methods.send.SendMessage;"},{"lineNumber":7,"author":{"gitId":"lizaboiarchuk"},"content":"import org.telegram.telegrambots.meta.exceptions.TelegramApiException;"},{"lineNumber":8,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":9,"author":{"gitId":"lizaboiarchuk"},"content":"import static org.mockito.Mockito.*;"},{"lineNumber":10,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":11,"author":{"gitId":"lizaboiarchuk"},"content":"public class TelegramServiceTest {"},{"lineNumber":12,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":13,"author":{"gitId":"lizaboiarchuk"},"content":"    private final TelegramApi telegramApi \u003d mock(TelegramApi.class);"},{"lineNumber":14,"author":{"gitId":"lizaboiarchuk"},"content":"    private final LocaleMessageService localeMessageService \u003d mock(LocaleMessageService.class);"},{"lineNumber":15,"author":{"gitId":"lizaboiarchuk"},"content":"    private final TelegramService telegramService \u003d new TelegramService(telegramApi, localeMessageService);"},{"lineNumber":16,"author":{"gitId":"lizaboiarchuk"},"content":""},{"lineNumber":17,"author":{"gitId":"lizaboiarchuk"},"content":"    @Test"},{"lineNumber":18,"author":{"gitId":"lizaboiarchuk"},"content":"    public void shouldSendMessage() throws TelegramApiException {"},{"lineNumber":19,"author":{"gitId":"lizaboiarchuk"},"content":"        telegramService.sendMessage(0L, \"hi there\");"},{"lineNumber":20,"author":{"gitId":"lizaboiarchuk"},"content":"        verify(telegramApi, times(1))"},{"lineNumber":21,"author":{"gitId":"lizaboiarchuk"},"content":"                .execute(any(SendMessage.class));"},{"lineNumber":22,"author":{"gitId":"lizaboiarchuk"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"lizaboiarchuk"},"content":"}"}],"authorContributionMap":{"lizaboiarchuk":23}}]
